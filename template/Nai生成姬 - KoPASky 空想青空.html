<!DOCTYPE html>
<!-- saved from url=(0033)https://kopasky.com/pages/Gen.php -->
<html lang="zh-CN"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <!-- Primary Meta Tags -->
    <title>Nai生成姬 - KoPASky 空想青空</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Favicon -->
    <link type="text/css" href="./Nai生成姬 - KoPASky 空想青空_files/all.min.css" rel="stylesheet">

    <!-- Sweet Alert -->
    <link type="text/css" href="./Nai生成姬 - KoPASky 空想青空_files/sweetalert2.min.css" rel="stylesheet">

    <!-- Notyf -->
    <link type="text/css" href="./Nai生成姬 - KoPASky 空想青空_files/notyf.min.css" rel="stylesheet">

    <!-- Volt CSS -->
    <link type="text/css" href="./Nai生成姬 - KoPASky 空想青空_files/volt.css" rel="stylesheet">

  <style>
            .form-control-has-title{
                padding-top: 1.25em;
            }
            .textarea-wrapper {
                position: relative;
                width: 100%;
                margin-top: 0.75rem;
            }
            .char-counter {
                position: absolute;
                top: -0.75em;
                right: 1.5em;
                background: #fff;
                font-size: 0.9em;
                padding: 0 8px;
                border-radius: 6px;
                border: 0.5px solid #dee2e6;
                box-shadow: 0 1px 3px rgba(0,0,0,0.04);
                line-height: 1.3;
                z-index: 2;
                pointer-events: none;
                transition: background 0.2s;
                display: flex;
                align-items: center;
                gap: 0.2em;
            }
            .textarea-title-label {
                position: absolute;
                top: -0.75em;
                left: 1.5em;
                background: #fff;
                font-size: 0.9em;
                padding: 0 8px;
                border-radius: 6px;
                border: 0.5px solid #dee2e6;
                box-shadow: 0 1px 3px rgba(0,0,0,0.04);
                line-height: 1.3;
                z-index: 2;
                pointer-events: none;
                color: #1f2937;
                font-weight: 600;
                transition: background 0.2s;
                display: inline-block;
            }
            textarea.form-control {
                resize: vertical;
            }
            .counter-current {
                color: #8c929a;
                transition: color 0.2s;
            }
            .counter-current.over {
                color: #be3a26;
            }
            .counter-slash {
                color: #1f2937;
                font-weight: 600;
            }
            .counter-max {
                color: #1f2937;
            }
            @media (max-width: 500px) {
                .textarea-wrapper {
                    max-width: 100%;
                }
                .char-counter {
                    right: 0.4em;
                    font-size: 0.9em;
                }
                .textarea-title-label {
                    left: 0.4em;
                    font-size: 0.9em;
                }
                .load-template-btn {
                    right: 5.5em; /* 在移动端也调整位置 */
                    font-size: 0.8em;
                }
            }
            .downloaded-overlay {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(0, 0, 0, 0.5); /* 半透明黑色遮罩 */
                color: white;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 20px;
                font-weight: bold;
                text-align: center;
                border-radius: 0.5rem; /* 确保遮罩层与图片有相同的圆角 */
            }

            .image-container {
                position: relative;
                display: inline-block;
                border-radius: 0.5rem; /* 确保遮罩层与图片有相同的圆角 */
            }

              #vibeform-container {
                transition: opacity 0.3s ease-in-out, max-height 0.3s ease-in-out;
                max-height: 0;
                opacity: 0;
                overflow: hidden;
              }

              #vibeform-container.show {
                max-height: 2000px; /* 根据实际内容调整这个值 */
                opacity: 1;
              }

              #inpaint-container {
                transition: opacity 0.3s ease-in-out, max-height 0.3s ease-in-out;
                max-height: 0;
                opacity: 0;
                overflow: hidden;
              }

              #inpaint-container.show {
                max-height: 2000px; /* 根据实际内容调整这个值 */
                opacity: 1;
              }

              #V4Caption {
                    transition: opacity 0.3s ease-in-out, max-height 0.3s ease-in-out;
                    max-height: 0;
                    opacity: 0;
                    overflow: hidden;
                }

                #V4Caption:not(.d-none) {
                    max-height: 2000px; /* 根据实际内容调整这个值 */
                    opacity: 1;
                }

            .ai-autocomplete-container {
                position: relative;
            }

            .ai-autocomplete-mirror {
                position: absolute;
                top: 0;
                left: 0;
                height: 100%;
                width: 100%;
                overflow: hidden;
                color: transparent;
                pointer-events: none;
            }

            .ai-autocomplete-suggestions {
                border: 1px solid rgb(203 213 225);
                background: #fff;
                border-radius: 0.5rem;
                display: none;
                position: absolute;
                min-width: 12rem;
                z-index: 9999;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            }

            .ai-autocomplete-suggestion {
                align-items: center;
                cursor: pointer;
                display: flex;
                padding: 0.5rem;
                overflow: hidden;
            }

            .ai-autocomplete-suggestion:nth-child(even) {
                background-color: #f3f4f6;
            }

            .ai-autocomplete-suggestion:not(:first-child) {
                border-top: 1px solid rgb(203 213 225);
            }

            .ai-autocomplete-suggestion--focused {
                background: rgb(226 232 240) !important;
            }

            .ai-autocomplete-suggestion strong {
                font-weight: bold;
            }

            .suggestion-text {
                flex: 1;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                margin-right: 0.5rem;
            }

            .suggestion-weight {
                flex-shrink: 0;
                color: #6b7280;
                font-size: 0.875rem;
            }

            .coord-popup {
                border: 1px solid rgb(203 213 225);
                background: #fff;
                border-radius: 0.5rem;
                display: none;
                position: absolute;
                min-width: 12rem;
                z-index: 9999;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                padding: 10px;
            }

            .coord-btn {
                width: 45px;
                height: 45px;
                margin: 2px;
                padding: 0;
                font-size: 12px;
            }

            .coord-grid {
                display: grid;
                grid-template-columns: repeat(5, 1fr);
                gap: 2px;
            }

            .load-template-btn {
                position: absolute;
                top: -0.8em; /* 与计数器和标题垂直对齐 */
                right: 9.5em; /* 放置在计数器左侧，预留足够空间 */
                z-index: 3; /* 确保在最上层 */
                padding: 0.05rem 0.5rem; /* 调整按钮大小使其小巧 */
                font-size: 0.8em; /* 调整字体大小 */
                line-height: 1.4;
                border-radius: 6px;
            }

            </style><style>.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4!important;grid-row:1/4!important;grid-template-columns:1fr 99fr 1fr;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:700}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.8em;left:-.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-toast-animate-success-line-tip .75s;animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-toast-animate-success-line-long .75s;animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{-webkit-animation:swal2-toast-show .5s;animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{-webkit-animation:swal2-toast-hide .1s forwards;animation:swal2-toast-hide .1s forwards}.swal2-container{display:grid;position:fixed;z-index:1060;top:0;right:0;bottom:0;left:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(-webkit-min-content,auto) minmax(-webkit-min-content,auto) minmax(-webkit-min-content,auto);grid-template-rows:minmax(min-content,auto) minmax(min-content,auto) minmax(min-content,auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}.swal2-container.swal2-backdrop-show,.swal2-container.swal2-noanimation{background:rgba(0,0,0,.4)}.swal2-container.swal2-backdrop-hide{background:0 0!important}.swal2-container.swal2-bottom-start,.swal2-container.swal2-center-start,.swal2-container.swal2-top-start{grid-template-columns:minmax(0,1fr) auto auto}.swal2-container.swal2-bottom,.swal2-container.swal2-center,.swal2-container.swal2-top{grid-template-columns:auto minmax(0,1fr) auto}.swal2-container.swal2-bottom-end,.swal2-container.swal2-center-end,.swal2-container.swal2-top-end{grid-template-columns:auto auto minmax(0,1fr)}.swal2-container.swal2-top-start>.swal2-popup{align-self:start}.swal2-container.swal2-top>.swal2-popup{grid-column:2;align-self:start;justify-self:center}.swal2-container.swal2-top-end>.swal2-popup,.swal2-container.swal2-top-right>.swal2-popup{grid-column:3;align-self:start;justify-self:end}.swal2-container.swal2-center-left>.swal2-popup,.swal2-container.swal2-center-start>.swal2-popup{grid-row:2;align-self:center}.swal2-container.swal2-center>.swal2-popup{grid-column:2;grid-row:2;align-self:center;justify-self:center}.swal2-container.swal2-center-end>.swal2-popup,.swal2-container.swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;align-self:center;justify-self:end}.swal2-container.swal2-bottom-left>.swal2-popup,.swal2-container.swal2-bottom-start>.swal2-popup{grid-column:1;grid-row:3;align-self:end}.swal2-container.swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;justify-self:center;align-self:end}.swal2-container.swal2-bottom-end>.swal2-popup,.swal2-container.swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;align-self:end;justify-self:end}.swal2-container.swal2-grow-fullscreen>.swal2-popup,.swal2-container.swal2-grow-row>.swal2-popup{grid-column:1/4;width:100%}.swal2-container.swal2-grow-column>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}.swal2-container.swal2-no-transition{transition:none!important}.swal2-popup{display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0,100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}.swal2-popup:focus{outline:0}.swal2-popup.swal2-loading{overflow-y:hidden}.swal2-title{position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}.swal2-actions{display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}.swal2-actions:not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}.swal2-actions:not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0,0,0,.1),rgba(0,0,0,.1))}.swal2-actions:not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2))}.swal2-loader{display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;-webkit-animation:swal2-rotate-loading 1.5s linear 0s infinite normal;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 transparent #2778c4 transparent}.swal2-styled{margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px transparent;font-weight:500}.swal2-styled:not([disabled]){cursor:pointer}.swal2-styled.swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}.swal2-styled.swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}.swal2-styled.swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}.swal2-styled.swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}.swal2-styled.swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}.swal2-styled.swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}.swal2-styled.swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}.swal2-styled:focus{outline:0}.swal2-styled::-moz-focus-inner{border:0}.swal2-footer{justify-content:center;margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em}.swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto!important;height:.25em;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}.swal2-timer-progress-bar{width:100%;height:.25em;background:rgba(0,0,0,.2)}.swal2-image{max-width:100%;margin:2em auto 1em}.swal2-close{z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:0 0;color:#ccc;font-family:serif;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}.swal2-close:hover{transform:none;background:0 0;color:#f27474}.swal2-close:focus{outline:0;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}.swal2-close::-moz-focus-inner{border:0}.swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:400;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}.swal2-checkbox,.swal2-file,.swal2-input,.swal2-radio,.swal2-select,.swal2-textarea{margin:1em 2em 3px}.swal2-file,.swal2-input,.swal2-textarea{box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:inherit;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px transparent;color:inherit;font-size:1.125em}.swal2-file.swal2-inputerror,.swal2-input.swal2-inputerror,.swal2-textarea.swal2-inputerror{border-color:#f27474!important;box-shadow:0 0 2px #f27474!important}.swal2-file:focus,.swal2-input:focus,.swal2-textarea:focus{border:1px solid #b4dbed;outline:0;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}.swal2-file::-moz-placeholder,.swal2-input::-moz-placeholder,.swal2-textarea::-moz-placeholder{color:#ccc}.swal2-file:-ms-input-placeholder,.swal2-input:-ms-input-placeholder,.swal2-textarea:-ms-input-placeholder{color:#ccc}.swal2-file::placeholder,.swal2-input::placeholder,.swal2-textarea::placeholder{color:#ccc}.swal2-range{margin:1em 2em 3px;background:#fff}.swal2-range input{width:80%}.swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}.swal2-range input,.swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}.swal2-input{height:2.625em;padding:0 .75em}.swal2-file{width:75%;margin-right:auto;margin-left:auto;background:inherit;font-size:1.125em}.swal2-textarea{height:6.75em;padding:.75em}.swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:inherit;color:inherit;font-size:1.125em}.swal2-checkbox,.swal2-radio{align-items:center;justify-content:center;background:#fff;color:inherit}.swal2-checkbox label,.swal2-radio label{margin:0 .6em;font-size:1.125em}.swal2-checkbox input,.swal2-radio input{flex-shrink:0;margin:0 .4em}.swal2-input-label{display:flex;justify-content:center;margin:1em auto 0}.swal2-validation-message{align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}.swal2-validation-message::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}.swal2-icon{position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:.25em solid transparent;border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}.swal2-icon.swal2-error{border-color:#f27474;color:#f27474}.swal2-icon.swal2-error .swal2-x-mark{position:relative;flex-grow:1}.swal2-icon.swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}.swal2-icon.swal2-error.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-error.swal2-icon-show .swal2-x-mark{-webkit-animation:swal2-animate-error-x-mark .5s;animation:swal2-animate-error-x-mark .5s}.swal2-icon.swal2-warning{border-color:#facea8;color:#f8bb86}.swal2-icon.swal2-warning.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-warning.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-i-mark .5s;animation:swal2-animate-i-mark .5s}.swal2-icon.swal2-info{border-color:#9de0f6;color:#3fc3ee}.swal2-icon.swal2-info.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-info.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-i-mark .8s;animation:swal2-animate-i-mark .8s}.swal2-icon.swal2-question{border-color:#c9dae1;color:#87adbd}.swal2-icon.swal2-question.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-question.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-question-mark .8s;animation:swal2-animate-question-mark .8s}.swal2-icon.swal2-success{border-color:#a5dc86;color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}.swal2-icon.swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-.25em;left:-.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}.swal2-icon.swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}.swal2-icon.swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}.swal2-icon.swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-animate-success-line-tip .75s;animation:swal2-animate-success-line-tip .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-animate-success-line-long .75s;animation:swal2-animate-success-line-long .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-circular-line-right{-webkit-animation:swal2-rotate-success-circular-line 4.25s ease-in;animation:swal2-rotate-success-circular-line 4.25s ease-in}.swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:inherit;font-weight:600}.swal2-progress-steps li{display:inline-block;position:relative}.swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}.swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}[class^=swal2]{-webkit-tap-highlight-color:transparent}.swal2-show{-webkit-animation:swal2-show .3s;animation:swal2-show .3s}.swal2-hide{-webkit-animation:swal2-hide .15s forwards;animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@-webkit-keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@-webkit-keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@-webkit-keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@-webkit-keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@-webkit-keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@-webkit-keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@-webkit-keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@-webkit-keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@-webkit-keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@-webkit-keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@-webkit-keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@-webkit-keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@-webkit-keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@-webkit-keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto!important}body.swal2-no-backdrop .swal2-container{background-color:transparent!important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll!important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static!important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:transparent;pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{top:0;right:auto;bottom:auto;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{top:0;right:0;bottom:auto;left:auto}body.swal2-toast-shown .swal2-container.swal2-top-left,body.swal2-toast-shown .swal2-container.swal2-top-start{top:0;right:auto;bottom:auto;left:0}body.swal2-toast-shown .swal2-container.swal2-center-left,body.swal2-toast-shown .swal2-container.swal2-center-start{top:50%;right:auto;bottom:auto;left:0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{top:50%;right:auto;bottom:auto;left:50%;transform:translate(-50%,-50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{top:50%;right:0;bottom:auto;left:auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-left,body.swal2-toast-shown .swal2-container.swal2-bottom-start{top:auto;right:auto;bottom:0;left:0}body.swal2-toast-shown .swal2-container.swal2-bottom{top:auto;right:auto;bottom:0;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{top:auto;right:0;bottom:0;left:auto}</style>
        <style>
            .custom-tabs {
                display: flex;
                border-bottom: 1px solid #dee2e6;
                margin-bottom: 8px;
            }
            .custom-tab {
                padding: 2px 12px;
                font-size: 12px;
                background: none;
                border: none;
                border-bottom: 2px solid transparent;
                margin-bottom: -1px;
                cursor: pointer;
            }
            .custom-tab.active {
                border-bottom: 2px solid #1F2937;
                color: #1F2937;
            }
            .custom-tab-content {
                display: none;
            }
            .custom-tab-content.active {
                display: block;
            }
        </style>
    <style data-id="immersive-translate-input-injected-css">.immersive-translate-input {
  position: absolute;
  top: 0;
  right: 0;
  left: 0;
  bottom: 0;
  z-index: 2147483647;
  display: flex;
  justify-content: center;
  align-items: center;
}
.immersive-translate-attach-loading::after {
  content: " ";

  --loading-color: #f78fb6;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  display: block;
  margin: 12px auto;
  position: relative;
  color: white;
  left: -100px;
  box-sizing: border-box;
  animation: immersiveTranslateShadowRolling 1.5s linear infinite;

  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-2000%, -50%);
  z-index: 100;
}

.immersive-translate-loading-spinner {
  vertical-align: middle !important;
  width: 10px !important;
  height: 10px !important;
  display: inline-block !important;
  margin: 0 4px !important;
  border: 2px rgba(221, 244, 255, 0.6) solid !important;
  border-top: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-left: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-radius: 50% !important;
  padding: 0 !important;
  -webkit-animation: immersive-translate-loading-animation 0.6s infinite linear !important;
  animation: immersive-translate-loading-animation 0.6s infinite linear !important;
}

@-webkit-keyframes immersive-translate-loading-animation {
  from {
    -webkit-transform: rotate(0deg);
  }

  to {
    -webkit-transform: rotate(359deg);
  }
}

@keyframes immersive-translate-loading-animation {
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(359deg);
  }
}

.immersive-translate-input-loading {
  --loading-color: #f78fb6;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  display: block;
  margin: 12px auto;
  position: relative;
  color: white;
  left: -100px;
  box-sizing: border-box;
  animation: immersiveTranslateShadowRolling 1.5s linear infinite;
}

@keyframes immersiveTranslateShadowRolling {
  0% {
    box-shadow: 0px 0 rgba(255, 255, 255, 0), 0px 0 rgba(255, 255, 255, 0),
      0px 0 rgba(255, 255, 255, 0), 0px 0 rgba(255, 255, 255, 0);
  }

  12% {
    box-shadow: 100px 0 var(--loading-color), 0px 0 rgba(255, 255, 255, 0),
      0px 0 rgba(255, 255, 255, 0), 0px 0 rgba(255, 255, 255, 0);
  }

  25% {
    box-shadow: 110px 0 var(--loading-color), 100px 0 var(--loading-color),
      0px 0 rgba(255, 255, 255, 0), 0px 0 rgba(255, 255, 255, 0);
  }

  36% {
    box-shadow: 120px 0 var(--loading-color), 110px 0 var(--loading-color),
      100px 0 var(--loading-color), 0px 0 rgba(255, 255, 255, 0);
  }

  50% {
    box-shadow: 130px 0 var(--loading-color), 120px 0 var(--loading-color),
      110px 0 var(--loading-color), 100px 0 var(--loading-color);
  }

  62% {
    box-shadow: 200px 0 rgba(255, 255, 255, 0), 130px 0 var(--loading-color),
      120px 0 var(--loading-color), 110px 0 var(--loading-color);
  }

  75% {
    box-shadow: 200px 0 rgba(255, 255, 255, 0), 200px 0 rgba(255, 255, 255, 0),
      130px 0 var(--loading-color), 120px 0 var(--loading-color);
  }

  87% {
    box-shadow: 200px 0 rgba(255, 255, 255, 0), 200px 0 rgba(255, 255, 255, 0),
      200px 0 rgba(255, 255, 255, 0), 130px 0 var(--loading-color);
  }

  100% {
    box-shadow: 200px 0 rgba(255, 255, 255, 0), 200px 0 rgba(255, 255, 255, 0),
      200px 0 rgba(255, 255, 255, 0), 200px 0 rgba(255, 255, 255, 0);
  }
}

.immersive-translate-modal {
  position: fixed;
  z-index: 2147483647;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  background-color: rgb(0, 0, 0);
  background-color: rgba(0, 0, 0, 0.4);
  font-size: 15px;
}

.immersive-translate-modal-content {
  background-color: #fefefe;
  margin: 10% auto;
  padding: 40px 24px 24px;
  border-radius: 12px;
  width: 350px;
  font-family: system-ui, -apple-system, "Segoe UI", "Roboto", "Ubuntu",
    "Cantarell", "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji",
    "Segoe UI Symbol", "Noto Color Emoji";
  position: relative;
}

@media screen and (max-width: 768px) {
  .immersive-translate-modal-content {
    margin: 25% auto !important;
  }
}

@media screen and (max-width: 480px) {
  .immersive-translate-modal-content {
    width: 80vw !important;
    margin: 20vh auto !important;
    padding: 20px 12px 12px !important;
  }

  .immersive-translate-modal-title {
    font-size: 14px !important;
  }

  .immersive-translate-modal-body {
    font-size: 13px !important;
    max-height: 60vh !important;
  }

  .immersive-translate-btn {
    font-size: 13px !important;
    padding: 8px 16px !important;
    margin: 0 4px !important;
  }

  .immersive-translate-modal-footer {
    gap: 6px !important;
    margin-top: 16px !important;
  }
}

.immersive-translate-modal .immersive-translate-modal-content-in-input {
  max-width: 500px;
}
.immersive-translate-modal-content-in-input .immersive-translate-modal-body {
  text-align: left;
  max-height: unset;
}

.immersive-translate-modal-title {
  text-align: center;
  font-size: 16px;
  font-weight: 700;
  color: #333333;
}

.immersive-translate-modal-body {
  text-align: center;
  font-size: 14px;
  font-weight: 400;
  color: #333333;
  margin-top: 24px;
}

@media screen and (max-width: 768px) {
  .immersive-translate-modal-body {
    max-height: 250px;
    overflow-y: auto;
  }
}

.immersive-translate-close {
  color: #666666;
  position: absolute;
  right: 16px;
  top: 16px;
  font-size: 20px;
  font-weight: bold;
}

.immersive-translate-close:hover,
.immersive-translate-close:focus {
  text-decoration: none;
  cursor: pointer;
}

.immersive-translate-modal-footer {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  margin-top: 24px;
}

.immersive-translate-btn {
  width: fit-content;
  color: #fff;
  background-color: #ea4c89;
  border: none;
  font-size: 14px;
  margin: 0 8px;
  padding: 9px 30px;
  border-radius: 5px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: background-color 0.3s ease;
}

.immersive-translate-btn-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

.immersive-translate-btn:hover {
  background-color: #f082ac;
}
.immersive-translate-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}
.immersive-translate-btn:disabled:hover {
  background-color: #ea4c89;
}

.immersive-translate-link-btn {
  background-color: transparent;
  color: #ea4c89;
  border: none;
  cursor: pointer;
  height: 30px;
  line-height: 30px;
}

.immersive-translate-cancel-btn {
  /* gray color */
  background-color: rgb(89, 107, 120);
}

.immersive-translate-cancel-btn:hover {
  background-color: hsl(205, 20%, 32%);
}

.immersive-translate-action-btn {
  background-color: transparent;
  color: #ea4c89;
  border: 1px solid #ea4c89;
}

.immersive-translate-btn svg {
  margin-right: 5px;
}

.immersive-translate-link {
  cursor: pointer;
  user-select: none;
  -webkit-user-drag: none;
  text-decoration: none;
  color: #ea4c89;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
}

.immersive-translate-primary-link {
  cursor: pointer;
  user-select: none;
  -webkit-user-drag: none;
  text-decoration: none;
  color: #ea4c89;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
}

.immersive-translate-modal input[type="radio"] {
  margin: 0 6px;
  cursor: pointer;
}

.immersive-translate-modal label {
  cursor: pointer;
}

.immersive-translate-close-action {
  position: absolute;
  top: 2px;
  right: 0px;
  cursor: pointer;
}

.imt-image-status {
  background-color: rgba(0, 0, 0, 0.5) !important;
  display: flex !important;
  flex-direction: column !important;
  align-items: center !important;
  justify-content: center !important;
  border-radius: 16px !important;
}
.imt-image-status img,
.imt-image-status svg,
.imt-img-loading {
  width: 28px !important;
  height: 28px !important;
  margin: 0 0 8px 0 !important;
  min-height: 28px !important;
  min-width: 28px !important;
  position: relative !important;
}
.imt-img-loading {
  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAMAAACfWMssAAAAtFBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////oK74hAAAAPHRSTlMABBMIDyQXHwyBfFdDMSw+OjXCb+5RG51IvV/k0rOqlGRM6KKMhdvNyZBz9MaupmxpWyj437iYd/yJVNZeuUC7AAACt0lEQVRIx53T2XKiUBCA4QYOiyCbiAsuuGBcYtxiYtT3f6/pbqoYHVFO5r+iivpo6DpAWYpqeoFfr9f90DsYAuRSWkFnPO50OgR9PwiCUFcl2GEcx+N/YBh6pvKaefHlUgZd1zVe0NbYcQjGBfzrPE8Xz8aF+71D8gG6DHFPpc4a7xFiCDuhaWgKgGIJQ3d5IMGDrpS4S5KgpIm+en9f6PlAhKby4JwEIxlYJV9h5k5nee9GoxHJ2IDSNB0dwdad1NAxDJ/uXDHYmebdk4PdbkS58CIVHdYSUHTYYRWOJblWSyu2lmy3KNFVJNBhxcuGW4YBVCbYGRZwIooipHsNqjM4FbgOQqQqSKQQU9V8xmi1QlgHqQQ6DDBvRUVCDirs+EzGDGOQTCATgtYTnbCVLgsVgRE0T1QE0qHCFAht2z6dLvJQs3Lo2FQoDxWNUiBhaP4eRgwNkI+dAjVOA/kUrIDwf3CG8NfNOE0eiFotSuo+rBiq8tD9oY4Qzc6YJw99hl1wzpQvD7ef2M8QgnOGJfJw+EltQc+oX2yn907QB22WZcvlUpd143dqQu+8pCJZuGE4xCuPXJqqcs5sNpsI93Rmzym1k4Npk+oD1SH3/a3LOK/JpUBpWfqNySxWzCfNCUITuDG5dtuphrUJ1myeIE9bIsPiKrfqTai5WZxbhtNphYx6GEIHihyGFTI69lje/rxajdh0s0msZ0zYxyPLhYCb1CyHm9Qsd2H37Y3lugVwL9kNh8Ot8cha6fUNQ8nuXi5z9/ExsAO4zQrb/ev1yrCB7lGyQzgYDGuxq1toDN/JGvN+HyWNHKB7zEoK+PX11e12G431erGYzwmytAWU56fkMHY5JJnDRR2eZji3AwtIcrEV8Cojat/BdQ7XOwGV1e1hDjGGjXbdArm8uJZtCH5MbcctVX8A1WpqumJHwckAAAAASUVORK5CYII=");
  background-size: 28px 28px;
  animation: image-loading-rotate 1s linear infinite !important;
}

.imt-image-status span {
  color: var(--bg-2, #fff) !important;
  font-size: 14px !important;
  line-height: 14px !important;
  font-weight: 500 !important;
  font-family: "PingFang SC", Arial, sans-serif !important;
}

.imt-primary-button {
  display: flex;
  padding: 12px 80px;
  justify-content: center;
  align-items: center;
  gap: 8px;
  border-radius: 8px;
  background: #ea4c89;
  color: #fff;
  font-size: 16px;
  font-style: normal;
  font-weight: 700;
  line-height: 24px;
  border: none;
  cursor: pointer;
}

.imt-retry-text {
  color: #999;
  text-align: center;
  font-size: 14px;
  font-style: normal;
  font-weight: 400;
  line-height: 21px;
  cursor: pointer;
}

.imt-action-container {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.imt-modal-content-text {
  text-align: left;
  color: #333;
  font-size: 16px;
  font-weight: 400;
  line-height: 24px;
}

@keyframes image-loading-rotate {
  from {
    transform: rotate(360deg);
  }
  to {
    transform: rotate(0deg);
  }
}

.imt-linear-gradient-text {
  background: linear-gradient(90deg, #00a6ff 0%, #c369ff 52.4%, #ff4590 100%);
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.imt-flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

.imt-linear-black-btn {
  border-radius: 50px;
  background: linear-gradient(66deg, #222 19%, #696969 94.25%);
  height: 48px;
  width: 100%;
  color: #fff;
  font-size: 16px;
  font-weight: 700;
  display: flex;
  align-items: center;
  cursor: pointer;
  justify-content: center;
}
</style></head>

  <body class="" style="">
    <style>
  .copy-link {
            color: #33ADFF;
            cursor: pointer;
        }

        .white-glass-effect {
            background-color: rgba(255, 255, 255, 0.87);  /* 0.7透明度的白色背景 */
            backdrop-filter: blur(5px);  /* 轻微的背景模糊效果 */
            -webkit-backdrop-filter: blur(5px);  /* 为 Safari 浏览器添加前缀 */
            border: 1px solid rgba(255, 255, 255, 0.3);  /* 添加一个微妙的边框 */
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);  /* 保持阴影效果 */
        }

        .header-title {
            color: #E1E4E8;
            text-shadow:
                2px 2px 4px rgba(0, 0, 0, 0.3),  /* 主要阴影 */
                0 0 10px rgba(255, 255, 255, 0.1),  /* 轻微的发光效果 */
                -1px -1px 0 rgba(0, 0, 0, 0.2),  /* 描边效果 */
                1px -1px 0 rgba(0, 0, 0, 0.2),
                -1px 1px 0 rgba(0, 0, 0, 0.2),
                1px 1px 0 rgba(0, 0, 0, 0.2);
            font-weight: 600;  /* 稍微加粗字体 */
            letter-spacing: 1px;  /* 增加字母间距 */
        }
</style>
<div>
  <nav class="navbar navbar-dark navbar-theme-primary px-4 col-12 d-lg-none">
    <a class="navbar-brand me-lg-5" href="https://kopasky.com/index.html">
      <img class="navbar-brand-dark" src="./Nai生成姬 - KoPASky 空想青空_files/favicon.ico" alt="Volt logo">
      <img class="navbar-brand-light" src="./Nai生成姬 - KoPASky 空想青空_files/dark.svg" alt="Volt logo">
    </a>
    <div class="d-flex align-items-center">
      <button class="navbar-toggler d-lg-none collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>

  <nav id="sidebarMenu" class="sidebar d-lg-block bg-gray-800 text-white collapse" data-simplebar="init"><div class="simplebar-wrapper" style="margin: 0px;"><div class="simplebar-height-auto-observer-wrapper"><div class="simplebar-height-auto-observer"></div></div><div class="simplebar-mask"><div class="simplebar-offset" style="right: 0px; bottom: 0px;"><div class="simplebar-content-wrapper" tabindex="0" role="region" aria-label="scrollable content" style="height: auto; overflow: hidden;"><div class="simplebar-content" style="padding: 0px;">
    <div class="sidebar-inner px-4 pt-3">
      <div class="user-card d-flex d-md-none align-items-center justify-content-between justify-content-md-center pb-4">
        <div class="d-flex align-items-center">
          <div class="avatar-lg me-4">
            <img src="./Nai生成姬 - KoPASky 空想青空_files/favicon.ico" class="card-img-top rounded-circle border-white" alt="logo">
          </div>
          <div class="d-block">
            <h2 class="h5 mb-3">KoPASky.com</h2>
          </div>
        </div>
      <div class="collapse-close d-md-none">
        <a href="https://kopasky.com/pages/Gen.php#sidebarMenu" data-bs-toggle="collapse" data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="true" aria-label="Toggle navigation">
            <svg class="icon icon-xs" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
          </a>
      </div>
      </div>
      <ul class="nav flex-column pt-3 pt-md-0">
        <li class="nav-item ">
          <a href="https://kopasky.com/pages/Gen.php" class="nav-link d-flex align-items-center">
            <span class="sidebar-icon">
              <img src="./Nai生成姬 - KoPASky 空想青空_files/favicon.ico" height="20" width="20" alt="Logo">
            </span>
            <span class="mt-1 ms-1 sidebar-text">KoPASky.com</span>
          </a>
        </li>
        <li class="nav-item active">
          <a href="https://kopasky.com/pages/Gen.php" class="nav-link d-flex justify-content-between">
            <span>
              <span class="sidebar-icon">
                <i class="fa-solid fa-pen-nib fa-fw"></i>
              </span>
              <span class="sidebar-text">Nai 生成姬</span>
            </span>
          </a>
        </li>
        <li class="nav-item ">
          <a href="https://kopasky.com/pages/GenSD.php" class="nav-link d-flex justify-content-between">
            <span>
              <span class="sidebar-icon">
                <i class="fa-solid fa-paintbrush fa-fw"></i>
              </span>
              <span class="sidebar-text">SD 生成姬</span>
            </span>
          </a>
        </li>
        <!--
        <li class="nav-item ">
          <a href="../pages/WorkShop.php" class="nav-link d-flex justify-content-between">
            <span>
              <span class="sidebar-icon">
                <i class="fa-regular fa-paintbrush-pencil fa-fw"></i>
              </span>
              <span class="sidebar-text">创意工坊</span>
            </span>
          </a>
        </li>-->
        <li class="nav-item ">
          <a href="https://kopasky.com/pages/TaskList.php" class="nav-link d-flex justify-content-between">
            <span>
              <span class="sidebar-icon">
                <i class="fa-solid fa-list-check fa-fw"></i>
              </span>
              <span class="sidebar-text">任务清单</span>
            </span>
          </a>
        </li>
        <li class="nav-item ">
          <a href="https://kopasky.com/pages/Notes.php" class="nav-link d-flex justify-content-between">
            <span>
              <span class="sidebar-icon">
                <i class="fa-solid fa-paperclip fa-fw"></i>
              </span>
              <span class="sidebar-text">云笔记</span>
            </span>
          </a>
        </li>
        <li class="nav-item">
          <a href="https://kopasky.com/extra/Gallery.php" target="_blank" class="nav-link d-flex justify-content-between">
            <span>
              <span class="sidebar-icon">
                <i class="fa-regular fa-images fa-fw"></i>
              </span>
              <span class="sidebar-text">时光姬(维护中)</span>
            </span>
          </a>
        </li>
        <li class="nav-item">
          <a href="https://kopasky.com/pages/Tipo.php" target="_blank" class="nav-link d-flex justify-content-between">
            <span>
              <span class="sidebar-icon">
                <i class="fa-regular fa-arrow-down-a-z fa-fw"></i>
              </span>
              <span class="sidebar-text">提示词优化姬</span>
            </span>
          </a>
        </li>
        <li class="nav-item">
          <span class="nav-link  collapsed  d-flex justify-content-between align-items-center" data-bs-toggle="collapse" data-bs-target="#submenu-app">
            <span>
              <span class="sidebar-icon">
                <i class="fa-solid fa-toolbox fa-fw"></i>
              </span>
              <span class="sidebar-text">工具箱</span>
            </span>
            <span class="link-arrow">
              <svg class="icon icon-sm" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
              </svg>
            </span>
          </span>
          <div class="multi-level collapse " role="list" id="submenu-app" aria-expanded="false">
            <ul class="flex-column nav">
              <li class="nav-item ">
                <a class="nav-link" target="_blank" href="https://jx.aitags.fun/">
                  <span class="sidebar-text">图片Tag解析</span>
                </a>
              </li>
              <li class="nav-item ">
                <a class="nav-link" target="_blank" href="http://ft.kopasky.com/">
                  <span class="sidebar-text">图片Tag推理</span>
                </a>
              </li>
              <li class="nav-item ">
                <a class="nav-link" href="https://kopasky.com/pages/WorkShop.php">
                <span>
                  <span class="sidebar-icon">
                    <i class="fa-regular fa-paintbrush-pencil fa-fw"></i>
                  </span>
                  <span class="sidebar-text">创意工坊</span>
                </span>
                </a>
              </li>
              <li class="nav-item ">
                <a class="nav-link" target="_blank" href="https://kopasky.com/pages/extend/TagSeacher/ts2.php">
                <span>
                  <span class="sidebar-icon">
                    <i class="fa-solid fa-magnifying-glass fa-fw"></i>
                  </span>
                  <span class="sidebar-text">角色搜索器</span>
                </span>
                </a>
              </li>
              <li class="nav-item ">
                <a class="nav-link" target="_blank" href="https://wolfchen.top/tag">
                  <span class="sidebar-text">提词器</span>
                </a>
              </li>
            </ul>
          </div>
        </li>
        <li class="nav-item">
          <span class="nav-link  collapsed  d-flex justify-content-between align-items-center" data-bs-toggle="collapse" data-bs-target="#submenu-pages">
            <span>
              <span class="sidebar-icon">
                <i class="fa-solid fa-book fa-fw"></i>
              </span>
              <span class="sidebar-text">新手指南</span>
            </span>
            <span class="link-arrow">
              <svg class="icon icon-sm" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
              </svg>
            </span>
          </span>
          <div class="multi-level collapse " role="list" id="submenu-pages" aria-expanded="false">
            <ul class="flex-column nav">
              <li class="nav-item">
                <a class="nav-link" target="_blank" href="https://docs.aitags.fun/#/zhc/threepart">
                  <span class="sidebar-text">三段式编辑</span>
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" target="_blank" href="https://docs.aitags.fun/#/zhc/style">
                  <span class="sidebar-text">画师串是什么?</span>
                </a>
              </li>
            </ul>
          </div>
        </li>
        <li class="nav-item">
          <span class="nav-link  collapsed  d-flex justify-content-between align-items-center" data-bs-toggle="collapse" data-bs-target="#submenu-components">
            <span>
              <span class="sidebar-icon">
                <i class="fa-solid fa-globe fa-fw"></i>
              </span>
              <span class="sidebar-text">站点</span>
            </span>
            <span class="link-arrow">
              <svg class="icon icon-sm" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
              </svg>
            </span>
          </span>
          <div class="multi-level collapse " role="list" id="submenu-components" aria-expanded="false">
            <ul class="flex-column nav">
              <li class="nav-item">
                <a class="nav-link" target="_blank" href="https://aitags.fun/">
                  <span class="sidebar-text">AiTag.Fun 画廊</span>
                </a>
              </li>
              <li class="nav-item ">
                <a class="nav-link" target="_blank" href="https://novelai.net/">
                  <span class="sidebar-text">NovelAI 官网</span>
                </a>
              </li>
              <li class="nav-item ">
                <a class="nav-link" target="_blank" href="https://danbooru.donmai.us/">
                  <span class="sidebar-text">Danbooru.us</span>
                </a>
              </li>
              <li class="nav-item ">
                <a class="nav-link" target="_blank" href="https://kopasky.com/pages/extend/MonthReport/MP.php">
                  <span class="sidebar-text">生成姬状态</span>
                </a>
              </li>
            </ul>
          </div>
        </li>
        <li role="separator" class="dropdown-divider mt-4 mb-3 border-gray-700"></li>
        <li class="nav-item ">
          <a href="https://kopasky.com/pages/Invite.php" class="nav-link d-flex justify-content-between">
            <span>
              <span class="sidebar-icon">
                <i class="fa-solid fa-user-group fa-fw"></i>
              </span>
              <span class="sidebar-text">邀请奖励</span>
            </span>
          </a>
        </li>
        <li class="nav-item">
          <a href="https://qm.qq.com/q/ZOdEAcvjOi" target="_blank" class="nav-link d-flex justify-content-between">
            <span>
                <span class="sidebar-icon">
                  <i class="fa-brands fa-qq fa-fw"></i>
                </span>
                <span class="sidebar-text">QQ群</span>
            </span>
          </a>
        </li>
        <li class="nav-item">
          <a href="https://t.me/+KWNJTNq4ZgplODQ1" target="_blank" class="nav-link d-flex justify-content-between">
            <span>
                <span class="sidebar-icon">
                  <i class="fa-brands fa-telegram fa-fw"></i>
                </span>
                <span class="sidebar-text">Telegram</span>
            </span>
          </a>
        </li>
        <li class="nav-item">
          <a href="https://kopasky.com/pages/Plus.php" class="btn btn-secondary d-flex align-items-center justify-content-center btn-upgrade-pro">
            <span class="sidebar-icon d-inline-flex align-items-center justify-content-center">
              <i class="fa-solid fa-ruble-sign fa-fw me-2"></i>
            </span>
            <span>高级账号</span>
          </a>
        </li>
      </ul>
    </div>
  </div></div></div></div><div class="simplebar-placeholder" style="width: auto; height: 667px;"></div></div><div class="simplebar-track simplebar-horizontal" style="visibility: hidden;"><div class="simplebar-scrollbar" style="width: 0px; display: none;"></div></div><div class="simplebar-track simplebar-vertical" style="visibility: hidden;"><div class="simplebar-scrollbar" style="height: 0px; display: none;"></div></div></nav>
</div>

    <!-- Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" style="display: none;">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Captain On the Bridge</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
              <span aria-hidden="true"></span>
            </button>
          </div>
          <div class="modal-body">
                <h4 class="mb-3">欢迎回到 <strong>KoPASky 空想青空</strong></h4>
                <p>在左侧列表中可以切换 NAI / SD 生成姬</p>

                <hr>

                <p class="small text-muted"><i class="fa-solid fa-circle-question"></i> 遇到困难？可以从这里开始：</p>
                <ul>
                    <li>新手可以参考 <a class="copy-link" href="https://aitags.fun/" target="_blank" rel="noopener noreferrer">画廊</a> 中其他用户的参数来生成图片</li>
                    <li>可以通过 <a class="copy-link" href="http://ft.aitags.fun/" target="_blank" rel="noopener noreferrer">反推功能</a> 来反向推理图片中的提示词</li>
                </ul>

                <hr>

                <p class="small text-muted"><i class="fa-solid fa-bell"></i> 近期通知：</p>
                <p><i class="fa-solid fa-bolt"></i> 2档及以上月卡会员可不限量使用 SD生成姬 ILLUSION_V2 模型(常规尺寸)</p>
                <p><i class="fa-solid fa-wrench"></i> 生成姬的提示词上限提升至 <strong>3000</strong></p>
                <p><i class="fa-solid fa-wrench"></i> 时光姬目前正在维护中，请自行保存/归档生成的图片</p>
                <hr>

                <p class="small">任何疑问请在交流群中@群主或通过爱发电反馈</p>
                <p class="text-end mt-4"><em></em></p>
            </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-gray-800 ms-auto" data-bs-dismiss="modal">我知道了</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal2 -->
    <div class="modal fade" id="exampleModalMessage" data-bs-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="exampleModalMessageTitle" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">从图片码中加载参数</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
              <span aria-hidden="true"></span>
            </button>
          </div>
          <div class="modal-body">
            <form id="readerForm">
              <div class="form-group">
                <label>图片码: (GUID)</label>
                <input type="text" name="picUUid" class="form-control" placeholder="类似 xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx">
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" id="readerBtn" class="btn btn-gray-800 ms-auto" data-bs-dismiss="modal">读取参数</button>
          </div>
        </div>
      </div>
    </div>


    <!-- NoteBookModal (样式优化后) -->
    <div class="modal fade" id="noteBookModal" tabindex="-1" aria-labelledby="noteBookModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="noteBookModalLabel">从笔记本加载</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <!-- 笔记分类 -->
                    <div class="mb-4">
                        <label for="noteBookTypeSelector" class="form-label">笔记分类</label>
                        <select class="form-select" id="noteBookTypeSelector">
                            <option value="1">选择笔记类型</option>
                            <option value="2">★ 画师词条</option>
                            <option value="3">✿ 角色词条</option>
                            <option value="4">♥ 描述词条</option>
                            <option value="5">☂ 其他词条</option>
                        </select>
                    </div>

                    <!-- 选择已有笔记 -->
                    <div class="mb-6">
                        <label for="existingProjects" class="form-label">选择已有笔记</label>
                        <select class="form-select" id="existingProjects" aria-label="选择已有笔记">
                            <option selected="" value="">请选择一个笔记...</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal">取消</button>
                    <div class="ms-auto d-flex gap-2">
                        <button type="button" id="loadNoteAdd" class="btn btn-secondary">追加到末尾</button>
                        <button type="button" id="loadNote" class="btn btn-secondary">覆盖并加载</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- MoreActionModal -->
    <div class="modal fade" id="MoreActionModal" data-bs-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="exampleModalMessageTitle" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="MoreActionUuid">更多操作</h5>
          </div>
        <div class="modal-body">
            <h6>- UpScale -</h6>
            <div style="margin-left: 20px;">
              <label style="font-size: 0.9em; display: block; margin-top: 10px;">
                <div class="d-flex justify-content-between" style="width: 100%;">
                  <span>将该图片放大4倍 (仅锐化非二次重绘)
                  </span>
                  <a type="button" id="upscaleButton" target="_blank" class="copy-link" style="font-size: 0.95em;">UpScale (消耗 10 Anlas)</a>
                </div>
            </label></div>
            <h6>- Variations -</h6>
            <div style="margin-left: 20px;">
              <label style="font-size: 0.9em; display: block; margin-top: 10px;">
                <div class="d-flex justify-content-between" style="width: 100%;">
                  <span>生成相似差分 (请注意:大尺寸图片同样需要Anlas)
                  </span>
                  <a type="button" id="variationsButton" target="_blank" class="copy-link" style="font-size: 0.95em;" data-bs-dismiss="modal">抽一张看看</a>
                </div>
            </label></div>
          <div class="modal-footer">
            <button type="button" class="btn btn-gray-800 ms-auto" id="MoreActionCloseBtn" data-bs-dismiss="modal">关闭</button>
          </div>
        </div>
      </div>
    </div>
    </div>


    <!-- toast -->
    <div id="liveToast" class="toast position-fixed bottom-0 end-0 mb-5 me-3" style="z-index: 5" role="alert" aria-live="assertive" aria-atomic="true">
      <div class="toast-header">

        <strong class="me-auto">已载入最后请求的参数</strong>
        <small>AiTags.Fun</small>
        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
      </div>
      <div class="toast-body">
        即将跳转至生成姬
      </div>
    </div>

    <div class="ai-autocomplete-container" id="aiAutocompleteContainer1"><div class="ai-autocomplete-mirror" style="border: 1px solid transparent; box-sizing: border-box; font-family: CustomFont, sans-serif; font-size: 14px; font-weight: 400; letter-spacing: normal; line-height: 21px; padding: 17.5px 16px 8px; text-decoration: none; text-indent: 0px; text-transform: none; white-space: pre-wrap; word-spacing: 0px; overflow-wrap: break-word; width: 1288px; height: 155.5px;"></div><div class="ai-autocomplete-mirror" style="border: 1px solid transparent; box-sizing: border-box; font-family: CustomFont, sans-serif; font-size: 14px; font-weight: 400; letter-spacing: normal; line-height: 21px; padding: 17.5px 16px 8px; text-decoration: none; text-indent: 0px; text-transform: none; white-space: pre-wrap; word-spacing: 0px; overflow-wrap: break-word; width: 1288px; height: 92.5px;"></div><div class="ai-autocomplete-mirror" style="border: 1px solid transparent; box-sizing: border-box; font-family: CustomFont, sans-serif; font-size: 14px; font-weight: 400; letter-spacing: normal; line-height: 21px; padding: 17.5px 16px 8px; text-decoration: none; text-indent: 0px; text-transform: none; white-space: pre-wrap; word-spacing: 0px; overflow-wrap: break-word; width: 1288px; height: 50.5px;"></div>
    <div class="ai-autocomplete-suggestions"></div><div class="ai-autocomplete-suggestions"></div><div class="ai-autocomplete-suggestions"></div></div>



    <main class="content" style="background: var(--custom-page-bg); min-height: 100vh;" loading="lazy">
      <form id="contact-form" method="post" autocomplete="off">

        <nav class="navbar navbar-top navbar-expand navbar-dashboard navbar-dark ps-0 pe-2 pb-0">
          <div class="container-fluid px-0">
            <div class="d-flex justify-content-between w-100" id="navbarSupportedContent">
              <div class="d-flex align-items-center">
                <div class="mt-2 ms-3 d-flex align-items-center">
                  <!-- 添加 d-flex 和 align-items-center -->
                  <h4 class="header-title me-3">
                    <!-- 添加 me-3 为右边距 -->
                    <i class="fa-solid fa-pen-nib fa-fw"></i>
                    Nai生成姬
                  </h4>
                  <h6 class="header-title" id="loadStatusFather" data-bs-toggle="tooltip" data-bs-placement="bottom" title="" data-bs-original-title="同时在线用户数量">
                    负载: <span id="loadStatus">5</span>
                  </h6>
                </div>
              </div>
            </div>
          </div>
        </nav>
        <div class="row mt-3">
          <div class="col-12 col-xl-8">
            <div class="card card-body border-0 shadow mb-4 white-glass-effect">
              <div class="d-flex justify-content-between align-items-center">
                <h2 class="h5 mb-0">
                  <i class="fa-solid fa-gears fa-fw"></i> 基本参数
                </h2>
                <div class="form-check form-switch" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="调好了 给我消失">
                  <input class="form-check-input" type="checkbox" id="basicParamsSwitch" checked="">
                </div>
              </div>
              <div id="basicParamsContent">
                <div class="row mt-4">
                  <div class="col-md-4 mb-3">
                    <div class="d-flex flex-column justify-content-center h-100">
                      <label for="stepSlider">采样步数 Steps: <span id="stepValue">28</span>
                      </label>
                      <input type="range" min="1" max="50" name="step" step="1" class="form-range" id="stepSlider" value="28">
                    </div>
                  </div>
                  <div class="col-md-4 px-md-2 mb-3">
                    <div class="d-flex flex-column justify-content-center h-100">
                      <label for="cfgSlider" class="ms-0" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="该值越高，图片结果会越接近描述词">
                        CFG Prompt Guidance: <span id="cfgValue">6</span>
                      </label>
                      <input type="range" min="0" max="10" name="cfg" step="0.1" class="form-range" id="cfgSlider" value="6">
                    </div>
                  </div>
                  <div class="col-md-4 mb-3">
                        <label for="rescaleSlider" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="当使用较高的CFG时，可以通过调整此数值来改善可能出现的颜色异常。一般不用调整">CFG Rescale 重缩放: <span id="rescaleValue">0</span>
                      </label>
                      <input type="range" min="0" max="1" name="rescale" step="0.01" class="form-range" id="rescaleSlider" value="0">
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-4 mb-3">
                    <div>
                      <label for="exampleFormControlSelect1" class="ms-0" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="类似笔刷，每种出图效果不一样">采样器: (Sampler)</label>
                      <select class="form-select" name="sampler" id="samplerSelect">
                        <option value="1">k_euler</option>
                        <option value="2">k_euler_ancestral</option>
                        <option value="3">k_dpmpp_2s_ancestral</option>
                        <option value="4">k_dpmpp_2m</option>
                        <option value="5">k_dpmpp_sde</option>
                        <option value="6">ddim_v3</option>
                      </select>
                    </div>
                  </div>
<div class="col-md-4 px-md-2 mb-3">
      <div>
      <label class="ms-0">
        图片尺寸: (Size)
        <span id="imgPoints" style="color:#7c7cf3; margin-left:8px;">0Anlas(8折)</span>
      </label>
      <div class="d-flex align-items-center gap-2">
        <select class="form-select" id="sizeTemplateSelect" style="max-width: 115px; min-width: 90px;">
          <option data-width="832" data-height="1216">832×1216</option>
          <option data-width="1024" data-height="1024">1024×1024</option>
          <option data-width="960" data-height="1088">960×1088</option>
          <option data-width="512" data-height="1920">512×1920</option>
          <option data-width="1024" data-height="1536">1024×1536</option>
          <option data-width="1088" data-height="1920">1088×1920</option>
          <option data-width="1472" data-height="1472">1472×1472</option>
          <option data-width="1280" data-height="1856">1280×1856</option>
          <option data-width="1600" data-height="1920">1600×1920</option>
        </select>
          <div class="input-group">
          <input type="text" name="imgWidth" inputmode="numeric" pattern="[0-9]*" class="form-control text-end" id="imgWidth" maxlength="4" value="832" style="max-width: 70px;">
          <button type="button" class="input-group-text p-0 px-2" id="swapSizeBtn" title="交换宽高" style="cursor:pointer; background:transparent; border:none; color:#888; font-size:1.2rem; transition:color 0.2s;" onmouseover="this.style.color=&#39;#000&#39;" onmouseout="this.style.color=&#39;#888&#39;">×</button>
          <input type="text" name="imgHeight" inputmode="numeric" pattern="[0-9]*" class="form-control text-start" id="imgHeight" maxlength="4" value="1216" style="max-width: 70px;">
        </div>
      </div>
    </div>
</div>
                  <div class="col-md-4 mb-3">
                    <div>
                      <label for="exampleFormControlSelect1" class="ms-0" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="NovelAI提供的负面预设，会额外添加在当前负面的末端">预设负面模板:</label>
                      <select class="form-select" name="ucp" id="ucpSelect">
                        <option value="1">Heavy</option>
                        <option value="2">Light</option>
                        <option value="3">Human Focus</option>
                        <option value="4">None</option>
                      </select>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-4 mb-3">
                    <div class="d-flex flex-column justify-content-center h-100">
                    <div>
                      <label for="exampleFormControlSelect1" class="ms-0" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="混合 SMEA 采样器可能会改善图片生成的效果 图片越大效果更明显">SMEA 重采样:</label>
                      <select class="form-select" name="sema" id="semaSelect">
                        <option value="1">关闭</option>
                        <option value="2">开启</option>
                      </select>
                    </div>
                    </div>
                  </div>
                  <div class="col-md-4 px-md-2 mb-3">
                      <div>
                      <label class="ms-0" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="在保持图像质量的同时，获得更多样化的生成结果(或许吧)">多样性增强：(Variety)</label>
                      <select class="form-select" name="variety" id="varietySelect">
                        <option value="1">关闭</option>
                        <option value="2">开启</option>
                      </select>
                    </div>

                  </div>
                  <div class="col-md-4 mb-3">
                    <div>
                      <label class="ms-0" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="噪声调度器，和采样器差不多一个意思">Noise Schedule:</label>
                      <select class="form-select" name="noise" id="noiseSelect">
                        <option value="1">native</option>
                        <option value="2">karras</option>
                        <option value="3">exponential</option>
                        <option value="4">polyexponential</option>
                      </select>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="alert alert-warning alert-dismissible fade show" role="alert">
              <i class="fa-solid fa-party-horn fa-fw"></i>
              请通过新域名 KopaSky.com 访问 / 旧域名已被封锁需要开启VPN访问
              <button type="button" class="btn-close btn-sm" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
            <div class="alert alert-warning alert-dismissible fade show" role="alert">
              <i class="fa-solid fa-party-horn fa-fw"></i>
              大尺寸图片积分定期补充，先到先得。若提示生成姬积分不足请耐心等待补货<!--高迭代步数 / 大尺寸图片所需积分七折优惠中 / 点数图片专享快速生成通道 无需等待-->
              <button type="button" class="btn-close btn-sm" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
            <!--
            <div class="alert alert-warning alert-dismissible fade show" role="alert">
              <span class="fas fa-bullhorn me-1"></span>
                            <button type="button" class="btn-close btn-sm" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>-->
            <div class="card card-body border-0 shadow mb-4 white-glass-effect">
              <h2 class="h5 mb-4">
                <i class="fa-solid fa-code fa-fw"></i> 提示词
              </h2>
                <div class="textarea-wrapper"><textarea name="edit1" id="editor1" mytitle="角色词条" maxlength="1000" class="form-control mb-3 form-control-has-title char-counter-inited template-loader-inited" rows="1.5" placeholder="把你想要的角色写在这里，不指定角色就留空。"></textarea><span class="char-counter"><span class="counter-current">0</span><span class="counter-slash">/</span><span class="counter-max">1000</span></span><span class="textarea-title-label">角色词条</span><button type="button" class="btn btn-primary load-template-btn" data-bs-toggle="modal" data-bs-target="#noteBookModal" title="加载笔记" data-target-textarea-id="editor1">
                        <i class="fa-solid fa-solid fa-paperclip fa-fw"></i>
                    </button></div>
              <div class="mb-1">
                <div class="row align-items-center">
                  <div class="col">
                  </div>
                </div>
              </div>
              <div class="mb-3">
                  <div class="textarea-wrapper"><textarea name="edit2" id="editor2" maxlength="1000" mytitle="画师词条" class="form-control form-control-has-title char-counter-inited template-loader-inited" rows="3" placeholder="把你画师串写在这里，这将影响画风。
不知道如何编写？先从下方的模板库中选择感兴趣的内容试试吧。"></textarea><span class="char-counter"><span class="counter-current">0</span><span class="counter-slash">/</span><span class="counter-max">1000</span></span><span class="textarea-title-label">画师词条</span><button type="button" class="btn btn-primary load-template-btn" data-bs-toggle="modal" data-bs-target="#noteBookModal" title="加载笔记" data-target-textarea-id="editor2">
                        <i class="fa-solid fa-solid fa-paperclip fa-fw"></i>
                    </button></div>
              </div>
                <div class="textarea-wrapper"><textarea name="edit3" id="editor3" mytitle="描述词条" maxlength="2000" class="form-control form-control-has-title char-counter-inited template-loader-inited" rows="6" placeholder="把你剩下的东西写在这里。你也可以按照自己的习惯随意填写三个输入框的内容，提交时会自动从上到下拼接到一起。(会自动在末尾添加,号)
不知道如何编写？先从下方的模板库中选择感兴趣的内容试试吧。"></textarea><span class="char-counter"><span class="counter-current">0</span><span class="counter-slash">/</span><span class="counter-max">2000</span></span><span class="textarea-title-label">描述词条</span><button type="button" class="btn btn-primary load-template-btn" data-bs-toggle="modal" data-bs-target="#noteBookModal" title="加载笔记" data-target-textarea-id="editor3">
                        <i class="fa-solid fa-solid fa-paperclip fa-fw"></i>
                    </button></div>
              <div class="mt-3 d-flex flex-wrap justify-content-between align-items-start">
                <div class="mb-2 mb-md-0 d-flex flex-wrap flex-grow-1 align-items-center">
                  <button id="fillDataBtn" class="btn btn-gray-800 btn-tooltip me-2 mb-2" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-container="body" data-animation="true" data-bs-original-title="从服务器中加载最后一次请求图片的参数到生成姬">
                    <i class="fa-solid fa-clock-rotate-left fa-fw"></i> 加载历史参数
                  </button>
                  <button id="fillDataBtnByUUID" class="btn btn-gray-800 btn-tooltip me-2 mb-2" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-container="body" data-animation="true" data-bs-original-title="借由图片码来加载图片的参数到生成姬">
                    <i class="fa-solid fa-barcode fa-fw"></i> 读取图片码
                  </button>
                  <div class="form-check form-switch mb-0 d-flex align-items-center mb-2 me-3" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="不懂别开">
                    <input class="form-check-input mt-0" type="checkbox" id="vibeformSwitch">
                    <label class="form-check-label ms-1 mb-0" for="vibeformSwitch">风格迁移</label>
                  </div>
                  <div class="form-check form-switch mb-0 d-flex align-items-center mb-2 me-3" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="不懂别开">
                    <input class="form-check-input mt-0" type="checkbox" id="inpaintSwitch">
                    <label class="form-check-label ms-1 mb-0" for="inpaintSwitch">局部重绘</label>
                  </div>
                  <div class="form-check form-switch mb-0 d-flex align-items-center mb-2 me-3" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="网速太慢不建议开启">
                    <input class="form-check-input mt-0" type="checkbox" id="autoComplete">
                    <label class="form-check-label ms-1 mb-0" for="autoComplete">拼写帮助</label>
                  </div>
                </div>
                <div class="w-100 d-md-none"></div> <!-- 强制换行 -->
                <div class="d-flex justify-content-end w-100 w-md-auto mt-2 mt-md-0">
                  <div class="btn-group">
                    <button type="submit" id="submitBtn" class="btn btn-secondary btn-tooltip" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-container="body" data-animation="true" data-bs-original-title="开冲!">
                      <i class="fa-solid fa-plus fa-fw"></i> 添加任务
                    </button>
                    <button type="submit" id="submitBtnTriple" class="btn btn-warning btn-tooltip" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-container="body" data-animation="true" data-bs-original-title="额度爆破器">
                      x<i class="fa-solid fa-3 fa-fw"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <div id="vibeform-container">
              <div id="vibeform" class="card card-body border-0 shadow mb-4 white-glass-effect">
                <h2 class="h5 mb-4">
                  <i class="fa-solid fa-shuffle fa-fw"></i> 风格迁移 (Vibe Transfer):
                </h2>
                <div>
                  <label for="formFile" class="form-label">垫图素材</label>
                  <input class="form-control" type="file" id="formFile" name="formFile" accept="image/*">
                </div>
                <div class="mt-4">
                  <div class="row align-items-center">
                    <div class="col-md-4">
                      <div id="imageBox" class="image-box" style="width: 150px; height: 150px; background-color: #f0f0f0; border: 1px solid #ddd; margin: 0 auto; background-size: contain; background-repeat: no-repeat; background-position: center;">
                      </div>
                    </div>
                    <div class="col-md-8">
                      <div class="d-flex flex-column justify-content-center" style="height: 150px;">
                        <div class="mb-3">
                          <label for="slider1" class="form-label" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="该值越高，对图中的元素越敏感">Information Extracted: <span id="slider1Value">0.5</span>
                          </label>
                          <input type="range" class="form-range" min="0" max="1" value="0.5" step="0.01" id="slider1" name="Information_Extracted">
                        </div>
                        <div>
                          <label for="slider2" class="form-label" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="该值越高，文本Prompt权重越低">Reference Strength: <span id="slider2Value">0.5</span>
                          </label>
                          <input type="range" class="form-range" min="0" max="1" value="0.5" step="0.01" id="slider2" name="Reference_Strength">
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

<div id="inpaint-container">
  <div id="inpaintform" class="card card-body border-0 shadow mb-4 white-glass-effect">
    <h2 class="h5 mb-4">
     <i class="fa-solid fa-wand-magic-sparkles"></i> 局部重绘 (InPaint):
    </h2>
    <div>
      <label for="inpaintImgFile" class="form-label">原始素材 (上传后请去选择对应的图片尺寸，建议使用主流尺寸图片)</label>
      <input class="form-control" type="file" id="inpaintImgFile" name="inpaintImgFile" accept="image/*">
    </div>
    <div class="mt-4">
      <div class="row align-items-center">
        <div class="col-4">
          <div id="inpaintImageBox" class="image-box" style="width:150px;height:150px;background:#f0f0f0;border:1px solid #ddd;margin:0 auto;background-size:contain;background-repeat:no-repeat;background-position:center;"></div>
          <div class="text-center small mt-2">原图</div>
        </div>
        <div class="col-4">
          <div id="maskImageBox" class="image-box" style="width:150px;height:150px;background:#f0f0f0;border:1px solid #ddd;margin:0 auto;background-size:contain;background-repeat:no-repeat;background-position:center;"></div>
          <div class="text-center small mt-2">蒙版</div>
        </div>
        <div class="col-4">
          <div id="mixImageBox" class="image-box" style="width:150px;height:150px;background:#f0f0f0;border:1px solid #ddd;margin:0 auto;background-size:contain;background-repeat:no-repeat;background-position:center;"></div>
          <div class="text-center small mt-2">叠加预览</div>
        </div>
      </div>
      <div class="d-flex flex-column justify-content-center align-items-center mt-3" style="height: 56px;">
        <button id="DrawMask" type="button" class="btn btn-gray-800 btn-tooltip me-2 mb-2">
          <i class="fa-solid fa-pen-swirl"></i> 绘制蒙版
        </button>
      </div>
    </div>
  </div>
</div>

<!-- 全屏遮罩绘制弹窗 -->
<div id="maskModalOverlay" style="display:none;position:fixed;z-index:2000;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.85);justify-content:center;align-items:center;">
  <div id="maskDrawPanel" style="background:#1F2937;border-radius:12px;padding:12px;max-width:95vw;max-height:95vh;display:flex;flex-direction:column;align-items:center;">
    <div id="drawCanvasWrap" style="position:relative;display:inline-block;overflow:hidden;border-radius:10px;">
      <canvas id="drawBgCanvas"></canvas>
      <canvas id="drawMaskCanvas" style="position:absolute;left:0;top:0;"></canvas>
    </div>
    <div class="mt-3 d-flex gap-2 flex-wrap" style="width:100%;justify-content:center;">
      <button id="clearMaskBtn" type="button" class="btn btn-gray-200"><i class="fa-solid fa-trash-can-xmark"></i> 清空</button>
      <input id="brushRange" type="range" min="5" max="80" value="30" style="width:90px;vertical-align:middle;">
      <span id="brushRangeVal" class="text-white" style="width:30px;display:inline-block;vertical-align:middle;">30</span>
      <button id="saveMaskBtn" type="button" class="btn btn-secondary ms-3"><i class="fa-solid fa-circle-check"></i> 保存</button>
      <button id="closeMaskPanel" type="button" class="btn btn-gray-200 ms-3"><i class="fa-solid fa-ban"></i> 关闭</button>
    </div>
  </div>
</div>

              <div id="V4Caption" class="d-none" style="opacity: 0; max-height: 0px;">
                <div id="V4CaptionForm" class="card card-body border-0 shadow mb-4 white-glass-effect">
                    <div class="d-flex justify-content-between align-items-center">
                        <h2 class="h5 mb-0">
                            <i class="fa-solid fa-user-gear fa-fw"></i> V4角色控制器
                        </h2>
                        <div class="d-flex align-items-center gap-3">
                            <div class="form-check form-switch mb-0 d-flex align-items-center" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="让系统来自动决定角色控制器中的角色在画面中的位置">
                                <input class="form-check-input mt-0" type="checkbox" id="aichoices">
                                <label class="form-check-label ms-1 mb-0" for="aichoices">AI托管角色坐标</label>
                            </div>
                            <button type="button" id="addCaptionBtn" class="btn btn-secondary btn-tooltip">
                                <i class="fa-solid fa-plus fa-fw"></i>新增控制器
                            </button>
                        </div>
                    </div>
                    <!-- Caption blocks will be added here -->
                </div>
            </div>

            <div class="card card-body border-0 shadow mb-4 white-glass-effect">
              <div class="d-flex justify-content-between align-items-center">
                <h2 class="h5 mb-0">
                  <i class="fa-solid fa-code fa-fw"></i> 负面提示词
                </h2>
                <div class="form-check form-switch" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="反正没几个人会改我">
                  <input class="form-check-input" type="checkbox" id="basicParamsSwitch2" checked="">
                </div>
              </div>
              <div id="basicParamsContent2">
                <div class="mt-4">
                  <div class="textarea-wrapper"><textarea name="nevprompt" mytitle="负面提示词" maxlength="2000" class="form-control form-control-has-title char-counter-inited template-loader-inited" id="message" rows="4" placeholder="也称负面提示词，填写在这里的单词将会被排除。" value="">lowres, {bad}, error, fewer, extra, missing, worst quality, jpeg artifacts, bad quality, watermark, unfinished, displeasing, chromatic aberration, signature, extra digits, artistic error, username, scan, [abstract], lowres, {bad}, error, fewer, extra, missing, worst quality, jpeg artifacts, bad quality, unfinished, displeasing, chromatic aberration, signature, extra digits, artistic error, username, scan, [abstract],{{{+_+}}},{{chibi,animal,doll}},</textarea><span class="char-counter"><span class="counter-current">452</span><span class="counter-slash">/</span><span class="counter-max">2000</span></span><span class="textarea-title-label">负面提示词</span><button type="button" class="btn btn-primary load-template-btn" data-bs-toggle="modal" data-bs-target="#noteBookModal" title="加载笔记" data-target-textarea-id="message">
                        <i class="fa-solid fa-solid fa-paperclip fa-fw"></i>
                    </button></div>
                </div>
              </div>
            </div>

            <div class="card card-body border-0 shadow mb-4 white-glass-effect">
              <div class="d-flex justify-content-between align-items-center">
                <h2 class="h5 mb-0">
                  <i class="fa-solid fa-sliders fa-fw"></i> 杂项
                </h2>
                <div class="form-check form-switch" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="你又是哪里冒出来的">
                  <input class="form-check-input" type="checkbox" id="basicParamsSwitch3" checked="">
                </div>
              </div>
              <div id="basicParamsContent3">
                <div class="row mt-4">
                  <div class="col-md-4 mb-3">
                    <div>
                      <label>采样种子: (Seed) <a href="javascript:void(0)" class="text-info" type="button" onclick="setRandomSeed()">
                          <i class="fa-solid fa-dice fa-fw ms-1"></i>设为随机
                        </a>
                      </label>
                      <input type="number" name="seed" step="1" min="-1" max="9999999999" class="form-control" placeholder="-1 为随机 不懂不要改这个" value="-1">
                    </div>
                  </div>
                  <div class="col-md-4 px-md-2 mb-3">
                    <div>
                      <label for="exampleFormControlSelect1">模板库: <a class="text-info" href="https://aitags.fun/" target="_blank" type="button">
                          <i class="fa-solid fa-clone fa-fw ms-1"></i>更多模板
                        </a>
                      </label>
                      <select class="form-select" name="refabs" id="refabsSelect">
                        <option value="-1">无</option>
                        <option value="12">【推荐】生成姬预设模板</option><option value="14">纳西妲(原神)</option><option value="15">伊落玛丽(碧蓝档案)</option>                      </select>
                    </div>
                  </div>
                  <div class="col-md-4 mb-3">
                    <div>
                      <label for="exampleFormControlSelect1">生成模型:</label>
                      <select class="form-select" name="model" id="modelSelect">
                        <option value="1">nai-diffusion-3</option>
                        <option value="2">nai-diffusion-furry-3</option>
                        <option value="3">nai-diffusion-4-curated-preview</option>
                        <option value="4">nai-diffusion-4-full</option>
                        <option value="5">nai-diffusion-4-5-curated</option>
                        <option value="6">nai-diffusion-4-5-full</option>
                      </select>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div>
                    <input class="form-check-input" name="addQuality" type="checkbox" value="" id="fcustomCheck1" checked="">
                    <label class="custom-control-label" for="customCheck1" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="官方功能，在正面提示词末尾添加 best quality,amazing quality,very aesthetic,absurdres">末尾自动添加质量标签</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-12 col-xl-4">
            <div class="row">
              <div class="col-12 mb-4">
                <div class="card card-body border-0 shadow mb-4 white-glass-effect" style=" display: flex; flex-direction: column;">
                  <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2 class="h5 mb-0">
                      <i class="fa-solid fa-list-check fa-fw me-1 mt-2"></i>
                      <label id="taskBoxTitle">任务板</label>
                    </h2>
                    <div class="d-flex align-items-center">
                      <div class="me-3">
                        <input class="form-check-input" name="workMode" type="checkbox" id="workModeBtn">
                        <label class="custom-control-label ms-1" for="workModeBtn" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="N / S / F / W">排序</label>
                      </div>
                      <a href="https://kopasky.com/pages/Gen.php#" class="btn btn-outline-primary" id="downloadZip" data-bs-toggle="tooltip" data-bs-placement="left" title="" data-bs-original-title="批量下载任务板的中图片，已下载的不会重复打包">
                        <i class="fa-solid fa-circle-arrow-down fa-fw"></i> 批量下载
                      </a>
                    </div>
                  </div>
                  <div id="taskBox" style="flex-grow: 1; overflow-y: auto; min-height: 700px; max-height: 1100px; display: block;"></div>
                  <label>
                    <i class="fa-solid fa-lightbulb fa-fw"></i>此处均为预览，实际画质请以下载为准
                  </label>
                </div>
              </div>
            </div>
          </div>
        </div>
      </form>

<!--footmodal-->
<div class="modal fade" style="z-index: 1060;" id="footmodal" tabindex="-1" role="dialog" aria-labelledby="modal-default" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="h6 modal-title">通知</h2>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-gray-800 ms-auto" data-bs-dismiss="modal">我知道了</button>
      </div>
    </div>
  </div>
</div>

<!-- plusmodal -->
<div class="modal fade" id="plusmodal" tabindex="-1" data-bs-backdrop="static" role="dialog" aria-labelledby="exampleModalMessageTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel2">我的账号信息</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
          <span aria-hidden="true"></span>
        </button>
      </div>
      <div class="modal-body">
        <form id="cdkeyForm">
          <div class="form-group">
            <h6>- 额度 -</h6>
            <div style="margin-left: 20px;">
              <label style="font-size: 0.9em; display: block; margin-top: 10px;">
                <div class="d-flex justify-content-between" style="width: 100%;">
                  <span>Anlas点数:
                  145                  </span>
                  <span>
                    <a href="https://afdian.com/a/Kamakoto" type="button" target="_blank" class="copy-link" style="font-size: 0.95em;">购入点数</a> <a href="https://kopasky.com/pages/AnlasRecord.php" type="button" target="_blank" class="copy-link" style="font-size: 0.95em;">点数消耗明细</a>
                  </span>
                </div>
                <div class="d-flex justify-content-between" style="width: 100%;">
                  <span>账号每日额度:
                  0 /
                  0</span>
                  <span>重置还需:
                    12:34:43                  </span>
                </div>
                <div class="d-flex justify-content-between" style="width: 100%;">
                  <span>每日额度找回: 0</span>
                  <a id="getQuotaBtn" class="copy-link" type="button" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-original-title="" title="">找回次数</a>
                </div>
                <br>
                <div class="d-flex justify-content-between" style="width: 100%;">
                  <span>修改密码/绑定邮箱:</span>
                  <span><a class="copy-link" href="https://aitags.fun/register.aspx" target="_blank">AiTags.Fun账号管理</a></span>
                </div>
              </label>
            </div>
            <h6>- 高级账号 -</h6>
            <div style="margin-left: 20px;">
              <label style="font-size: 0.9em; display: block; margin-top: 10px;">
                <div class="d-flex justify-content-between" style="width: 100%;">
                  <span>当前档位有效期: -1                  </span>
                  <a href="https://afdian.com/a/Kamakoto" type="button" target="_blank" class="copy-link" style="font-size: 0.95em;">获取高级账号</a>
                </div>
                <span>完全过期时间: -1                  </span>
              </label>
            </div>
            <h6>- 激活CDKEY -</h6>
            <input type="text" name="cdkey" class="form-control" style="margin-bottom:10px" placeholder="在这里填写 CDKEY ，然后点击下方的按钮来激活">

            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                <div style="display: flex; align-items: center;">
                    <img id="captchaImage" src="./Nai生成姬 - KoPASky 空想青空_files/captcha.php" alt="验证码" style="border: 1px solid #ced4da; border-radius: 10px; margin-right: 10px; cursor: pointer;" onclick="refreshCaptcha()">
                    <input type="number" id="captchaInput" class="form-control" placeholder="计算" min="0" max="99" style="width: 80px;">
                </div>
                <div style="display: flex; align-items: center;">
                    <button type="button" id="UseCdkeyBtn" class="btn btn-secondary" data-bs-dismiss="modal">激活CDKEY</button>
                </div>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-gray-800" data-bs-dismiss="modal">关闭</button>
      </div>
    </div>
  </div>
</div>


<div class="theme-settings card bg-gray-800 pt-2 collapse" id="theme-settings">
  <div class="card-body bg-gray-800 text-white pt-4">
    <button type="button" class="btn-close theme-settings-close collapsed" aria-label="Close" data-bs-toggle="collapse" href="#theme-settings" role="button" aria-expanded="false" aria-controls="theme-settings"></button>
    <div class="d-flex justify-content-between align-items-center mb-3">
      <p class="m-0 mb-1 me-4 fs-7">
          <a href="https://aitags.fun/profile.aspx?name=Lraltas" target="_blank">
          <img class="rounded-circle me-2" src="https://aitags.fun/Pic.aitags.fun/Minimum/b6b0ac1a9a569ea7b2c4f1dbfe8588d6.webp" height="30" width="30" alt="headPic">
         Lraltas</a>

      </p>
      <div>
        <button id="UseCdkey" class="btn btn-outline-secondary" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-container="body" data-animation="true" data-bs-original-title="查看账号状态">账号信息</button>
      </div>
    </div>

    <div class="progress-wrapper">
      <div class="progress-info">
        <div class="progress-label">
          <span class="text-secondary">Anlas点数</span>
        </div>
        <div class="progress-percentage">
          <span>
            145          </span>
        </div>
      </div>
    </div>
    <div class="progress-wrapper">
      <div class="progress-info">
        <div class="progress-label">
          <span class="text-secondary">每日基础额度</span>
        </div>
        <div class="progress-percentage">
          <span>
            0 / 0          </span>
        </div>
      </div>
      <div class="progress">
        <div class="progress-bar bg-secondary" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
      </div>
    </div>
  </div>
</div>

<div class="card theme-settings bg-gray-800 theme-settings-expand show" id="theme-settings-expand">
  <div class="card-body bg-gray-800 text-white rounded-top p-3 py-2">
    <span class="fw-bold d-inline-flex align-items-center h6">
      <img class="rounded-circle me-2" src="https://aitags.fun/Pic.aitags.fun/Minimum/b6b0ac1a9a569ea7b2c4f1dbfe8588d6.webp" height="20" width="20" alt="headPic">
      Lraltas    </span>
  </div>
</div>

<!-- CSS for Chat Window (Native JS version) -->
<!-- CSS for Chat Window (Native JS version) -->
<style>
    #chatroom-window {
        position: fixed;
        width: 400px;
        height: 680px;
        min-width: 300px;
        min-height: 250px;
        background-color: white;
        border: 1px solid #dee2e6;
        border-radius: 0.375rem;
        box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
        display: flex;
        flex-direction: column;
        z-index: 1055;
        color: #212529;
        resize: both;
        overflow: hidden;

        /* --- 动画效果新增 --- */
        /* 默认状态：隐藏 */
        opacity: 0;
        transform: scale(0.95) translateY(15px); /* 从稍小、稍下的位置开始 */
        pointer-events: none; /* 隐藏时不可交互 */
        transition: opacity 0.3s ease, transform 0.3s ease; /* 为透明度和变换添加过渡动画 */
    }

    /* --- 动画效果新增 --- */
    /* 可见状态 */
    #chatroom-window.is-visible {
        opacity: 1;
        transform: scale(1) translateY(0); /* 恢复正常大小和位置 */
        pointer-events: auto; /* 可见时可交互 */
    }

    .chatroom-header {
        padding: 0.75rem 1rem;
        background-color: #f7f7f7;
        border-bottom: 1px solid #dee2e6;
        cursor: move;
        border-top-left-radius: 0.375rem;
        border-top-right-radius: 0.375rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-shrink: 0;
    }
    .chatroom-header .title { font-weight: 600; }
    .chatroom-header .window-controls button {
        margin-left: 0.25rem;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 28px;
        height: 28px;
    }
    .chatroom-body {
        flex-grow: 1;
        padding: 0;
        border-bottom-left-radius: 0.375rem;
        border-bottom-right-radius: 0.375rem;
    }
    .chatroom-body iframe { width: 100%; height: 100%; border: none; }

    #chatroom-icon {
        position: fixed;
        bottom: 200px;
        right: 16px;
        width: 45px;
        height: 45px;
        background-color: var(--bs-primary, #0d6efd);
        color: white;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 18px;
        cursor: pointer;
        box-shadow: 0 0.25rem 0.75rem rgba(0, 0, 0, 0.2);
        z-index: 1056;

        /* --- 动画效果新增 --- */
        opacity: 1;
        transform: scale(1);
        transition: opacity 0.3s ease, transform 0.3s ease, background-color 0.2s; /* 为图标也添加过渡 */
    }
    #chatroom-icon:hover {
        transform: scale(1.1); /* 保留悬停放大效果 */
    }

    /* --- 动画效果新增 --- */
    /* 图标隐藏时的状态 */
    #chatroom-icon.is-hidden {
        opacity: 0;
        transform: scale(0.8);
        pointer-events: none;
    }
</style>

<!-- HTML for Chat Window -->
<div id="chatroom-window">
    <div class="chatroom-header">
        <span class="title">内嵌聊天室</span>
        <div class="window-controls">
            <button id="open-new-window-btn" type="button" class="btn btn-sm btn-outline-info" title="在独立窗口打开">
                <i class="fas fa-external-link-alt"></i>
            </button>
            <button id="minimize-btn" type="button" class="btn btn-sm btn-outline-secondary" title="最小化">
                <i class="fas fa-window-minimize"></i>
            </button>
        </div>
    </div>
    <div class="chatroom-body">
        <iframe data-src="../telegram/chat.php" title="Chat Room" src="./Nai生成姬 - KoPASky 空想青空_files/saved_resource.html"></iframe>
    </div>
</div>
<div id="chatroom-icon">
    <i class="fas fa-comments"></i>
</div>


<!-- Scripts -->
<script src="./Nai生成姬 - KoPASky 空想青空_files/jquery.js" type="text/javascript"></script>
<script src="./Nai生成姬 - KoPASky 空想青空_files/rough-viz-105.js" type="text/javascript"></script>

<!-- Your Original Scripts -->
<script>
  function helper() {
    showModal('帮助', '使用手机访问时页面可能无法完整显示，请尝试向右滑动表格。');
  }

  function showModal(title, message) {
    const modal = new bootstrap.Modal(document.getElementById('footmodal'));
    const modalTitle = document.querySelector('#footmodal .modal-title');
    const modalBody = document.querySelector('#footmodal .modal-body');
    modalTitle.textContent = title;
    modalBody.innerHTML = `<p>${message}</p>`;
    modal.show();
  }

  $(document).ready(function() {
      $(document).on('click', '#UseCdkey', function(event) {
        event.preventDefault();
        var myModalEl = document.getElementById('plusmodal');
        var modal = new bootstrap.Modal(myModalEl);
        modal.show();
      });
  });

  document.getElementById("UseCdkeyBtn").addEventListener("click", function() {
      var formData = new FormData(document.getElementById("cdkeyForm"));
      var captchaInput = document.getElementById("captchaInput");
      formData.append("captcha", captchaInput.value);

      fetch('useCdkey.php', {
        method: 'POST',
        body: formData
      })
      .then(response => {
        if(response.ok) {
          return response.json();
        } else {
          throw new Error('服务器响应错误');
        }
      })
      .then(data => {
        if(data.SN === -10000) {
          showModal("激活CDKEY", "该CDKEY不存在或服务器异常");
        } else {
          showModal("激活CDKEY", data.msg);

          if(data.result === "vipcard") {
            setTimeout(function() {
              window.location.href = '../index.html';
            }, 5000);
          }
        }
        refreshCaptcha();
      })
      .catch(error => {
        console.error('请求错误:', error);
        refreshCaptcha();
      });
  });
</script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    var button = document.getElementById('getQuotaBtn');
    if (!button) return;
    var hasClicked = false;

    button.addEventListener('click', function(e) {
      e.preventDefault();
      if(hasClicked) { return; }
      hasClicked = true;
      button.style.pointerEvents = 'none';
      button.style.opacity = '0.5';
      var xhr = new XMLHttpRequest();
      xhr.open('GET', 'getLastDayQuota.php', true);
      xhr.responseType = 'text';
      xhr.onload = function() {
        if(xhr.status === 200) {
          button.outerHTML = '<span>' + xhr.responseText + '</span>';
        } else {
          button.outerHTML = '<span>请求失败，请稍后再试</span>';
          resetButton();
        }
      };
      xhr.onerror = function() {
        button.outerHTML = '<span>网络错误，请检查您的连接</span>';
        resetButton();
      };
      xhr.send();
    });

    function resetButton() {
      hasClicked = false;
      button.style.pointerEvents = 'auto';
      button.style.opacity = '1';
    }
  });
</script>
<script>
    function refreshCaptcha() {
        var img = document.getElementById("captchaImage");
        img.src = "../captcha.php?" + new Date().getTime();
    }
</script>

<!-- UPDATED: Native JavaScript for Chat Window Functionality -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    const chatWindow = document.getElementById('chatroom-window');
    const chatHeader = chatWindow.querySelector('.chatroom-header');
    const chatIcon = document.getElementById('chatroom-icon');
    const minimizeBtn = document.getElementById('minimize-btn');
    const openNewWindowBtn = document.getElementById('open-new-window-btn');
    const chatIframe = chatWindow.querySelector('iframe');

    let isFirstOpen = true;

    // 最小化按钮点击事件
    minimizeBtn.addEventListener('click', () => {
        // --- 动画逻辑修改 ---
        // 移除窗口的 'is-visible' 类，使其淡出
        chatWindow.classList.remove('is-visible');
        // 移除图标的 'is-hidden' 类，使其淡入
        chatIcon.classList.remove('is-hidden');
    });

    // 客服图标点击事件
    chatIcon.addEventListener('click', () => {
        // 延迟加载 iframe 内容
        if (!chatIframe.src) {
            chatIframe.src = chatIframe.dataset.src;
        }

        // --- 动画逻辑修改 ---
        // 添加 'is-visible' 类，让窗口平滑显示
        chatWindow.classList.add('is-visible');
        // 添加 'is-hidden' 类，让图标平滑消失
        chatIcon.classList.add('is-hidden');

        // 如果是第一次打开，则计算并设置居中位置
        if (isFirstOpen) {
            // 这里的逻辑无需改变，因为现在获取尺寸时窗口已经是可见的（即使是透明的）
            const winWidth = window.innerWidth;
            const winHeight = window.innerHeight;
            const chatWidth = chatWindow.offsetWidth;
            const chatHeight = chatWindow.offsetHeight;

            let top = (winHeight - chatHeight) / 2;
            let left = (winWidth - chatWidth) / 2;

            chatWindow.style.top = `${Math.max(0, top)}px`;
            chatWindow.style.left = `${Math.max(0, left)}px`;

            isFirstOpen = false;
        }
    });

    openNewWindowBtn.addEventListener('click', () => {
        window.open(chatIframe.dataset.src, '_blank');
    });

    // --- 拖动和窗口大小调整功能保持不变 ---
    let isDragging = false;
    let offsetX, offsetY;

    chatHeader.addEventListener('mousedown', (e) => {
        if (e.target.closest('button')) return;
        e.preventDefault();
        isDragging = true;
        offsetX = e.clientX - chatWindow.offsetLeft;
        offsetY = e.clientY - chatWindow.offsetTop;
        document.addEventListener('mousemove', onMouseMove);
        document.addEventListener('mouseup', onMouseUp);
    });

    function onMouseMove(e) {
        if (!isDragging) return;
        let newLeft = e.clientX - offsetX;
        let newTop = e.clientY - offsetY;
        const constrainedPos = keepInBounds(newLeft, newTop);
        chatWindow.style.left = constrainedPos.left + 'px';
        chatWindow.style.top = constrainedPos.top + 'px';
    }

    function onMouseUp() {
        isDragging = false;
        document.removeEventListener('mousemove', onMouseMove);
        document.removeEventListener('mouseup', onMouseUp);
    }

    function keepInBounds(left, top) {
        const maxLeft = window.innerWidth - chatWindow.offsetWidth;
        const maxTop = window.innerHeight - chatWindow.offsetHeight;
        const constrainedLeft = Math.max(0, Math.min(left, maxLeft));
        const constrainedTop = Math.max(0, Math.min(top, maxTop));
        return { left: constrainedLeft, top: constrainedTop };
    }

    window.addEventListener('resize', () => {
        // 只有当聊天窗口可见时才调整位置
        if (!chatWindow.classList.contains('is-visible')) {
            return;
        }
        const currentLeft = chatWindow.offsetLeft;
        const currentTop = chatWindow.offsetTop;
        const constrainedPos = keepInBounds(currentLeft, currentTop);
        chatWindow.style.left = constrainedPos.left + 'px';
        chatWindow.style.top = constrainedPos.top + 'px';
    });
});
</script>    </main>


    <!-- Core -->
    <script src="./Nai生成姬 - KoPASky 空想青空_files/popper.min.js"></script>
    <script src="./Nai生成姬 - KoPASky 空想青空_files/bootstrap.min.js"></script>

    <!-- Vendor JS -->
    <script src="./Nai生成姬 - KoPASky 空想青空_files/on-screen.umd.min.js"></script>

    <!-- Smooth scroll -->
    <script src="./Nai生成姬 - KoPASky 空想青空_files/smooth-scroll.polyfills.min.js"></script>

    <!-- Charts -->
    <script src="./Nai生成姬 - KoPASky 空想青空_files/chartist.min.js"></script>
    <script src="./Nai生成姬 - KoPASky 空想青空_files/chartist-plugin-tooltip.min.js"></script>

    <!-- Datepicker -->
    <script src="./Nai生成姬 - KoPASky 空想青空_files/datepicker.min.js"></script>

    <!-- Sweet Alerts 2 -->
    <script src="./Nai生成姬 - KoPASky 空想青空_files/sweetalert2.all.min.js"></script>

    <!-- Moment JS -->
    <script src="./Nai生成姬 - KoPASky 空想青空_files/moment.min.js"></script>

    <!-- Vanilla JS Datepicker -->
    <script src="./Nai生成姬 - KoPASky 空想青空_files/datepicker.min.js"></script>

    <!-- Notyf -->
    <script src="./Nai生成姬 - KoPASky 空想青空_files/notyf.min.js"></script>

    <!-- Simplebar -->
    <script src="./Nai生成姬 - KoPASky 空想青空_files/simplebar.min.js"></script>

    <!-- Volt JS -->
    <script src="./Nai生成姬 - KoPASky 空想青空_files/volt.js"></script>


    <script src="./Nai生成姬 - KoPASky 空想青空_files/jquery.js" type="text/javascript"></script>





<script>
//公告功能 24小时
    $(document).ready(function() {

        // --- Cookie 操作辅助函数 (保持不变) ---
        function setCookie(name, value, days) {
            let expires = "";
            if (days) {
                const date = new Date();
                date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
                expires = "; expires=" + date.toUTCString();
            }
            document.cookie = name + "=" + (value || "") + expires + "; path=/";
        }

        function getCookie(name) {
            const nameEQ = name + "=";
            const ca = document.cookie.split(';');
            for(let i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) === ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
        }

        const cookieName = 'announcementShown'; // Cookie 名称

        // 检查 Cookie 是否存在
        if (!getCookie(cookieName)) {

            var myModalEl = document.getElementById('exampleModal');
            var modal = new bootstrap.Modal(myModalEl);

            myModalEl.querySelector('.modal-title').textContent = "Captain On the Bridge";
            myModalEl.querySelector('.modal-body').innerHTML =
            `
                <h4 class="mb-3">欢迎回到 <strong>KoPASky 空想青空</strong></h4>
                <p>在左侧列表中可以切换 NAI / SD 生成姬</p>

                <hr>

                <p class="small text-muted"><i class="fa-solid fa-circle-question"></i> 遇到困难？可以从这里开始：</p>
                <ul>
                    <li>新手可以参考 <a class="copy-link" href="https://aitags.fun/" target="_blank" rel="noopener noreferrer">画廊</a> 中其他用户的参数来生成图片</li>
                    <li>可以通过 <a class="copy-link" href="http://ft.aitags.fun/" target="_blank" rel="noopener noreferrer">反推功能</a> 来反向推理图片中的提示词</li>
                </ul>

                <hr>

                <p class="small text-muted"><i class="fa-solid fa-bell"></i> 近期通知：</p>
                <p><i class="fa-solid fa-bolt"></i> 2档及以上月卡会员可不限量使用 SD生成姬 ILLUSION_V2 模型(常规尺寸)</p>
                <p><i class="fa-solid fa-wrench"></i> 生成姬的提示词上限提升至 <strong>3000</strong></p>
                <p><i class="fa-solid fa-wrench"></i> 时光姬目前正在维护中，请自行保存/归档生成的图片</p>
                <hr>

                <p class="small">任何疑问请在交流群中@群主或通过爱发电反馈</p>
                <p class="text-end mt-4"><em></em></p>
            `;
            modal.show();
            document.getElementById('inpaintImgFile').value = '';

            // 4. 设置 24 小时 Cookie
            setCookie(cookieName, 'true', 1);
            console.log(`Cookie "${cookieName}" has been set for 24 hours.`);

        } else {
            console.log(`Announcement modal not shown because cookie "${cookieName}" was found.`);
        }
    });
</script>
<script>
//INPAINT控制器
// ====== 参数和全局变量 ======
let originImg = null;
let originImgDataUrl = null;
let originImgBlob = null; // 新增: 上传用
let maskDataUrl = null;
let maskCanvasData = null;
let maskW = 512, maskH = 512;
let brushSize = 30;
let maskCanvas, maskCtx, bgCanvas, bgCtx;
let imageNaturalW = 0, imageNaturalH = 0;

// 工具：缩放尺寸（画板用）
function getContainSize(imgW, imgH, boxW, boxH) {
  let scale = Math.min(boxW/imgW, boxH/imgH);
  let w = imgW * scale, h = imgH * scale;
  return {w, h, x: (boxW-w)/2, y: (boxH-h)/2};
}

// 工具：上传限制用
function getLimitSize(nw, nh) {
    let maxSide = 1920;
    let maxArea = 3520 * 1920;
    let ow = nw, oh = nh;

    if (nw > maxSide || nh > maxSide) {
        if (nw > nh) {
            oh = Math.round(nh * maxSide / nw);
            ow = maxSide;
        } else {
            ow = Math.round(nw * maxSide / nh);
            oh = maxSide;
        }
    }
    while (ow * oh > maxArea) {
        ow = Math.floor(ow * 0.95);
        oh = Math.floor(oh * 0.95);
    }
    return {w: ow, h: oh};
}

// 工具：dataURL转Blob
function dataURLtoBlob(dataurl) {
    let arr = dataurl.split(','), mime = arr[0].match(/:(.*?);/)[1],
        bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n);
    while(n--){
        u8arr[n] = bstr.charCodeAt(n);
    }
    return new Blob([u8arr], {type:mime});
}

// 工具：canvas压缩为jpg
function canvasToJpegBlob(canvas, quality = 0.9) {
    return new Promise(resolve => {
        canvas.toBlob(blob => { resolve(blob); }, 'image/jpeg', quality);
    });
}

// 选择图片（核心上传处理）
document.getElementById('inpaintImgFile').addEventListener('change', async function(e){
    const file = this.files[0];
    if (!file) return;
    const img = new window.Image();
    img.onload = async function(){
        // 1. 限制尺寸
        let limit = getLimitSize(img.naturalWidth, img.naturalHeight);
        let cvs = document.createElement('canvas');
        cvs.width = limit.w; cvs.height = limit.h;
        let ctx = cvs.getContext('2d');
        ctx.clearRect(0,0,cvs.width,cvs.height);
        ctx.drawImage(img, 0,0,img.naturalWidth,img.naturalHeight, 0,0,limit.w,limit.h);

        // 2. PNG导出+体积判断
        let pngDataUrl = cvs.toDataURL('image/png');
        let pngBlob = dataURLtoBlob(pngDataUrl);
        let finalDataUrl, finalBlob, useJpeg = false;

        if (pngBlob.size <= 5 * 1024 * 1024) {
            finalDataUrl = pngDataUrl;
            finalBlob = pngBlob;
        } else {
            // 3. 超过5MB，jpg 90%
            let jpegBlob = await canvasToJpegBlob(cvs, 0.9);
            if (jpegBlob.size > 5 * 1024 * 1024) {
                var myModalEl = document.getElementById('exampleModal');
                var modal = new bootstrap.Modal(myModalEl);

                myModalEl.querySelector('.modal-title').textContent = "INPAINT控制器";
                myModalEl.querySelector('.modal-body').innerHTML ="图片压缩后仍超过5MB，请上传更小的图片";
                modal.show();
                document.getElementById('inpaintImgFile').value = '';
                return;
            }
            // 用jpg
            let reader = new FileReader();
            reader.onload = function(ev){
                finalDataUrl = ev.target.result;
                finalBlob = jpegBlob;
                originImgDataUrl = finalDataUrl; // 变量赋值（后续POST和画板用）
                originImgBlob = finalBlob;       // 上传用
                imageNaturalW = limit.w;
                imageNaturalH = limit.h;
                showOriginImg(finalDataUrl);
                clearMask();
                updateMaskBox();
                updateMixBox();
            };
            reader.readAsDataURL(jpegBlob);
            useJpeg = true;
            return; // 下面PNG分支不执行
        }
        // PNG正常分支
        originImgDataUrl = finalDataUrl;
        originImgBlob = finalBlob;
        imageNaturalW = limit.w;
        imageNaturalH = limit.h;
        showOriginImg(finalDataUrl);
        clearMask();
        updateMaskBox();
        updateMixBox();
    };
    img.onerror = function(){
        alert('图片加载失败！');
        return;
    };
    img.src = URL.createObjectURL(file);
});

function showOriginImg(dataUrl){
    document.getElementById('inpaintImageBox').style.backgroundImage = `url('${dataUrl}')`;
}

// ====== 绘制蒙版弹窗逻辑 ======
document.getElementById('DrawMask').addEventListener('click', function(e){
  e.preventDefault();
  if (!originImgDataUrl) {
    var myModalEl = document.getElementById('exampleModal');
    var modal = new bootstrap.Modal(myModalEl);

    myModalEl.querySelector('.modal-title').textContent = "INPAINT控制器";
    myModalEl.querySelector('.modal-body').innerHTML ="请先上传一张图片";
    modal.show();
    return;
  }
  showMaskPanel();
});

function showMaskPanel(){
  let overlay = document.getElementById('maskModalOverlay');
  overlay.style.display = 'flex';

  let wrap = document.getElementById('drawCanvasWrap');
  let maxW = Math.min(window.innerWidth*0.9, 600), maxH = Math.min(window.innerHeight*0.65, 600);
  let contain = getContainSize(imageNaturalW, imageNaturalH, maxW, maxH);
  maskW = Math.round(contain.w);
  maskH = Math.round(contain.h);
  wrap.style.width = maskW+'px';
  wrap.style.height = maskH+'px';

  // 背景
  bgCanvas = document.getElementById('drawBgCanvas');
  bgCanvas.width = maskW; bgCanvas.height = maskH;
  bgCanvas.style.width = maskW+'px'; bgCanvas.style.height = maskH+'px';
  bgCtx = bgCanvas.getContext('2d');
  bgCtx.clearRect(0,0,maskW,maskH);

  // 用originImgDataUrl绘制背景
  let bgImg = new Image();
  bgImg.onload = function(){
    bgCtx.drawImage(bgImg, 0,0,imageNaturalW,imageNaturalH, 0,0,maskW,maskH);
  };
  bgImg.src = originImgDataUrl;

  // 遮罩
  maskCanvas = document.getElementById('drawMaskCanvas');
  maskCanvas.width = maskW; maskCanvas.height = maskH;
  maskCanvas.style.width = maskW+'px'; maskCanvas.style.height = maskH+'px';
  maskCtx = maskCanvas.getContext('2d');
  maskCtx.clearRect(0,0,maskW,maskH);
  if(maskCanvasData) maskCtx.putImageData(maskCanvasData,0,0);

  bindDrawEvents(maskCanvas);
}

// 关闭弹窗
document.getElementById('closeMaskPanel').onclick = function(e){
  e.preventDefault();
  document.getElementById('maskModalOverlay').style.display = 'none';
};

// 清空mask
function clearMask(){
  maskCanvasData = null;
  if(maskCtx) maskCtx.clearRect(0,0,maskW,maskH);
  updateMaskBox();
  updateMixBox();
}
document.getElementById('clearMaskBtn').onclick = function(e){
  e.preventDefault();
  if(maskCtx) maskCtx.clearRect(0,0,maskW,maskH);
};

// 笔刷调节
let brushRange = document.getElementById('brushRange');
let brushRangeVal = document.getElementById('brushRangeVal');
brushRange.oninput = function(){
  brushSize = +this.value;
  brushRangeVal.textContent = this.value;
};

// 保存mask
document.getElementById('saveMaskBtn').onclick = function(e){
  e.preventDefault();
  maskCanvasData = maskCtx.getImageData(0,0,maskW,maskH);
  updateMaskBox();
  updateMixBox();
  document.getElementById('maskModalOverlay').style.display = 'none';
};

// ====== 绘制蒙版事件 ======
function bindDrawEvents(canvas){
  let drawing = false, last = {};
  // 鼠标
  canvas.onmousedown = function(e){
    e.preventDefault(); drawing = true;
    let rect = canvas.getBoundingClientRect();
    last.x = e.clientX - rect.left;
    last.y = e.clientY - rect.top;
  };
  canvas.onmousemove = function(e){
    if(!drawing) return;
    let rect = canvas.getBoundingClientRect();
    let x = e.clientX - rect.left, y = e.clientY - rect.top;
    drawLine(maskCtx, last.x, last.y, x, y, brushSize);
    last.x = x; last.y = y;
  };
  canvas.onmouseup = canvas.onmouseleave = function(e){ drawing = false; };
  // 触屏
  canvas.ontouchstart = function(e){
    e.preventDefault(); drawing = true;
    let rect = canvas.getBoundingClientRect();
    let t = e.touches[0];
    last.x = t.clientX - rect.left;
    last.y = t.clientY - rect.top;
  };
  canvas.ontouchmove = function(e){
    e.preventDefault();
    if(!drawing) return;
    let rect = canvas.getBoundingClientRect();
    let t = e.touches[0];
    let x = t.clientX - rect.left, y = t.clientY - rect.top;
    drawLine(maskCtx, last.x, last.y, x, y, brushSize);
    last.x = x; last.y = y;
  };
  canvas.ontouchend = function(e){ drawing = false; };
}

function drawLine(ctx, x0, y0, x1, y1, size){
  ctx.save();
  ctx.strokeStyle = 'rgba(0,0,0,0.6)'; // 60%黑色
  ctx.lineWidth = size;
  ctx.lineCap = 'round';
  ctx.globalCompositeOperation = 'source-over';
  ctx.beginPath();
  ctx.moveTo(x0, y0);
  ctx.lineTo(x1, y1);
  ctx.stroke();
  ctx.restore();
}

// ====== 展示mask和混合效果 ======
function updateMaskBox(){
  if(!maskCanvasData){
    document.getElementById('maskImageBox').style.backgroundImage = '';
    return;
  }
  let cvs = document.createElement('canvas');
  cvs.width = maskW; cvs.height = maskH;
  cvs.getContext('2d').putImageData(maskCanvasData,0,0);
  let imgData = cvs.getContext('2d').getImageData(0,0,maskW,maskH);
  // 变成黑白
  for(let i=0;i<imgData.data.length;i+=4){
    let a = imgData.data[i+3];
    if(a>50){
      imgData.data[i]=255; imgData.data[i+1]=255; imgData.data[i+2]=255; imgData.data[i+3]=255;
    }else{
      imgData.data[i]=0; imgData.data[i+1]=0; imgData.data[i+2]=0; imgData.data[i+3]=255;
    }
  }
  cvs.getContext('2d').putImageData(imgData,0,0);
  maskDataUrl = cvs.toDataURL('image/png');
  document.getElementById('maskImageBox').style.backgroundImage = `url('${maskDataUrl}')`;
}

function updateMixBox(){
  if(!originImgDataUrl) { document.getElementById('mixImageBox').style.backgroundImage = ''; return;}
  let cvs = document.createElement('canvas');
  cvs.width = maskW; cvs.height = maskH;
  let ctx = cvs.getContext('2d');
  // 用originImgDataUrl作为原图
  let oriImgEl = new Image();
  oriImgEl.onload = function(){
    ctx.drawImage(oriImgEl, 0,0,imageNaturalW,imageNaturalH, 0,0,maskW,maskH);
    if(!maskCanvasData){
      document.getElementById('mixImageBox').style.backgroundImage = `url('${cvs.toDataURL('image/png')}')`;
      return;
    }
    let maskCvs = document.createElement('canvas');
    maskCvs.width = maskW; maskCvs.height = maskH;
    maskCvs.getContext('2d').putImageData(maskCanvasData,0,0);
    let maskImg = maskCvs.getContext('2d').getImageData(0,0,maskW,maskH);

    let oriImg = ctx.getImageData(0,0,maskW,maskH);
    for(let i=0;i<oriImg.data.length;i+=4){
      let a = maskImg.data[i+3];
      if(a<50){ // 非mask区域
        oriImg.data[i+3] = Math.round(255*0.2);
      }else{
        oriImg.data[i+3] = 255;
      }
    }
    ctx.putImageData(oriImg,0,0);
    document.getElementById('mixImageBox').style.backgroundImage = `url('${cvs.toDataURL('image/png')}')`;
  };
  oriImgEl.src = originImgDataUrl;
}

// 响应式
window.addEventListener('resize', function(){
  if(document.getElementById('maskModalOverlay').style.display === 'flex'){
    showMaskPanel();
  }
});
</script>
<script>
// 图片尺寸/steps控制器
function toValidSizes(w, h) {
  w = parseInt(w, 10); if (isNaN(w)) w = 832;
  h = parseInt(h, 10); if (isNaN(h)) h = 832;

  // 步进64
  w = Math.round(w / 64) * 64;
  h = Math.round(h / 64) * 64;

  // 单边范围
  w = Math.max(256, Math.min(w, 1920));
  h = Math.max(256, Math.min(h, 1920));

  // 长宽和不超过3520，优先保留输入较大的那一个
  if (w + h > 3520) {
    if (w >= h) {
      w = Math.min(w, 1920);
      h = 3520 - w;
      h = Math.round(h / 64) * 64;
      h = Math.max(256, Math.min(h, 1920));
    } else {
      h = Math.min(h, 1920);
      w = 3520 - h;
      w = Math.round(w / 64) * 64;
      w = Math.max(256, Math.min(w, 1920));
    }
  }

  // 再次步进修正
  w = Math.round(w / 64) * 64;
  h = Math.round(h / 64) * 64;

  // 保证最小
  if (w < 256) w = 256;
  if (h < 256) h = 256;

  return [w, h];
}

function calcPoints(width, height, steps, discount = 0.8) {
    // 1. 计算总像素
    const pixels = width * height;
    const freeTierThreshold = 1024 * 1024; // 1MP (1048576 像素)

    // 2. 免积分规则判断
    // 如果总像素小于等于1MP并且steps低于29，则直接返回0分。
    // 折扣不影响免费层级。
    if (pixels <= freeTierThreshold && steps < 29) {
        return 0;
    }

    // 3. 通用计算规则（核心逻辑）
    // a. 根据 steps 计算动态除数
    const dynamicDivisor = 5200 * steps + 1280000;

    // b. 计算原始积分（应用公式，此时为浮点数）
    const rawPoints = (pixels * steps) / dynamicDivisor;

    // c. 应用折扣
    const discountedPoints = rawPoints * discount;

    // d. 对最终结果进行四舍五入，返回整数积分
    return Math.round(discountedPoints);
}

function updatePoints() {
  const width = parseInt(document.getElementById('imgWidth').value,10);
  const height = parseInt(document.getElementById('imgHeight').value,10);
  const steps = parseInt(document.getElementById('stepSlider').value,10);
  const points = calcPoints(width, height,steps);
  document.getElementById('imgPoints').innerText = points + 'Anlas(8折)';
}


// 只允许数字输入和长度限制，不做修正
['imgWidth', 'imgHeight'].forEach(function(id){
  const input = document.getElementById(id);
  input.addEventListener('input', function(){
    this.value = this.value.replace(/[^\d]/g, '');
    if(this.value.length > 4) this.value = this.value.slice(0,4);
    updatePoints();
  });
  // 失焦时才进行修正
  input.addEventListener('blur', function(){
    let w = document.getElementById('imgWidth').value;
    let h = document.getElementById('imgHeight').value;
    let [nw, nh] = toValidSizes(w, h);
    document.getElementById('imgWidth').value = nw;
    document.getElementById('imgHeight').value = nh;
    updatePoints();
  });
});

const stepSlider = document.getElementById('stepSlider');
const stepValue = document.getElementById('stepValue');
stepSlider.addEventListener('input', function() {
    stepValue.textContent = this.value;
    updatePoints();
});

// 交换
document.getElementById('swapSizeBtn').addEventListener('click', function() {
  const w = document.getElementById('imgWidth');
  const h = document.getElementById('imgHeight');
  let wv = w.value, hv = h.value;
  w.value = hv; h.value = wv;
  // 交换后直接修正
  let [nw, nh] = toValidSizes(w.value, h.value);
  w.value = nw; h.value = nh;
  updatePoints();
});

// 模板选择
document.getElementById('sizeTemplateSelect').addEventListener('change', function() {
  const opt = this.options[this.selectedIndex];
  document.getElementById('imgWidth').value = opt.getAttribute('data-width');
  document.getElementById('imgHeight').value = opt.getAttribute('data-height');
  // 选择后直接修正
  let [nw, nh] = toValidSizes(
    document.getElementById('imgWidth').value,
    document.getElementById('imgHeight').value
  );
  document.getElementById('imgWidth').value = nw;
  document.getElementById('imgHeight').value = nh;
  updatePoints();
});

// 初始
(function(){
  let [nw, nh] = toValidSizes(
    document.getElementById('imgWidth').value,
    document.getElementById('imgHeight').value
  );
  document.getElementById('imgWidth').value = nw;
  document.getElementById('imgHeight').value = nh;
  updatePoints();
})();
</script>
<script>
        function animateCounter($el, start, end, duration) {
            if(start === end) {
                $el.text(end);
                return;
            }
            let range = end - start;
            let stepTime = 10;
            let steps = Math.abs(Math.floor(duration / stepTime));
            if(steps === 0) steps = 1;
            let current = start;
            let increment = (end > start) ? 1 : -1;
            if(Math.abs(range) > steps) {
                increment = Math.ceil(range / steps);
            }
            let timer = setInterval(function() {
                current += increment;
                if ((increment > 0 && current >= end) || (increment < 0 && current <= end)) {
                    current = end;
                    clearInterval(timer);
                }
                $el.text(current);
            }, stepTime);
        }

        // 初始化textarea计数器
        function initTextareaCounters() {
            $('textarea:not(.char-counter-inited)').each(function(){
                var $textarea = $(this);
                // 防止已包裹的textarea重复初始化
                if ($textarea.closest('.textarea-wrapper').length > 0) {
                    $textarea.addClass('char-counter-inited');
                    return;
                }

                // 获取maxlength，如果没有则设为9999
                var maxlen = $textarea.attr('maxlength') ? parseInt($textarea.attr('maxlength')) : 9999;

                // 包装textarea
                $textarea.wrap('<div class="textarea-wrapper"></div>');
                var $wrapper = $textarea.closest('.textarea-wrapper');

                // 左上角标签
                var myTitle = $textarea.attr('myTitle');
                if(myTitle){
                    var $titleLabel = $('<span class="textarea-title-label"></span>').text(myTitle);
                    $wrapper.append($titleLabel);
                }

                // 右上角计数器
                var $counter = $(
                    '<span class="char-counter">' +
                        '<span class="counter-current"></span>' +
                        '<span class="counter-slash">/</span>' +
                        '<span class="counter-max"></span>' +
                    '</span>'
                );
                $textarea.after($counter);

                // 计数显示函数，带动画
                let lastLen = 0;
                function updateCounter() {
                    var currlen = $textarea.val().length;
                    var percent = currlen / maxlen;
                    // 动画显示当前数字
                    animateCounter(
                        $counter.find('.counter-current'),
                        lastLen,
                        currlen,
                        180 // 动画时长（ms），建议设置较短
                    );
                    // 超阈值变色
                    $counter.find('.counter-current')
                        .toggleClass('over', percent >= 0.95 && maxlen !== 9999);
                    $counter.find('.counter-max')
                        .text(maxlen === 9999 ? '∞' : maxlen);
                    lastLen = currlen;
                }

                // 输入事件监听
                $textarea.on('input propertychange', updateCounter);

                // 初始化
                updateCounter();

                // 标记已初始化
                $textarea.addClass('char-counter-inited');
            });
        }

        $(function(){
            initTextareaCounters();
            // 定时扫描新添加的textarea（如每500ms扫描一次）
            setInterval(initTextareaCounters, 500);

        });


        // ===============================================
        // == 新增：初始化模板加载器函数 ==
        // ===============================================
        function initTemplateLoader() {
            // 1. 选择所有尚未初始化的 textarea
            $('textarea:not(.template-loader-inited)').each(function() {
                var $textarea = $(this);
                var $wrapper = $textarea.closest('.textarea-wrapper');

                // 如果计数器函数还没来得及创建 wrapper，我们创建一个
                if ($wrapper.length === 0) {
                    // 这种情况很少见，但为了稳健性还是处理一下
                    $textarea.wrap('<div class="textarea-wrapper"></div>');
                    $wrapper = $textarea.closest('.textarea-wrapper');
                }

                // 2. 确保 textarea 有一个唯一的 ID，这是后续定位的关键
                var textareaId = $textarea.attr('id');
                if (!textareaId) {
                    textareaId = 'textarea-dynamic-' + Math.random().toString(36).substring(2, 11);
                    $textarea.attr('id', textareaId);
                }

                // 3. 创建 "加载" 按钮
                var $loadBtn = $(`
                    <button
                        type="button"
                        class="btn btn-primary load-template-btn"
                        data-bs-toggle="modal"
                        data-bs-target="#noteBookModal"
                        title="加载笔记"
                    >
                        <i class="fa-solid fa-solid fa-paperclip fa-fw"></i>
                    </button>
                `);

                // 4. 关键步骤：将当前 textarea 的 ID 存储在按钮上
                $loadBtn.attr('data-target-textarea-id', textareaId);

                // 5. 将按钮添加到 wrapper 中
                $wrapper.append($loadBtn);

                // 6. 标记此 textarea 已被初始化
                $textarea.addClass('template-loader-inited');
            });
        }

        $(function() {
            // 全局变量，用于存储当前操作的 textarea 的 ID
            let currentTargetTextareaId = null;
            const noteBookModal = new bootstrap.Modal(document.getElementById('noteBookModal'));

            // 初始化页面上已有的元素
            initTextareaCounters();
            initTemplateLoader();

            // 定时扫描新添加的textarea（如每500ms扫描一次）
            setInterval(function() {
                initTextareaCounters();
                initTemplateLoader();
            }, 500);

            // 事件委托：当点击任何一个 "加载" 按钮时
            $(document).on('click', '.load-template-btn', function() {
                // 从按钮的 data 属性中获取目标 textarea 的 ID
                currentTargetTextareaId = $(this).data('target-textarea-id');

                // 更新 Modal 标题，提示用户正在为哪个字段加载
                const targetTitle = $('#' + currentTargetTextareaId).attr('myTitle') || '输入框';
                $('#noteBookModalLabel').text('为 <' + targetTitle + '> 加载笔记');
            });

            // 初始化所有 Bootstrap Tooltip
            $('[data-bs-toggle="tooltip"]').each(function() {
                new bootstrap.Tooltip(this);
            });
        });
</script>
<script>
//V4
$(document).ready(function() {
    // 将弹出层移动到body下
    $('.coord-popup').appendTo('body');

    // 添加变量跟踪当前激活的输入框和AI托管状态
    let activeInput = null;

    // Create coord buttons (原代码保持不变)
    const grid = $('.coord-grid');
    for(let y = 1; y <= 5; y++) {
        for(let x = 1; x <= 5; x++) {
            const coordX = (x * 2 - 1) / 10;
            const coordY = (y * 2 - 1) / 10;
            grid.append(`
                <button type="button" class="btn btn-outline-primary coord-btn"
                        data-x="${coordX}"
                        data-y="${coordY}">
                    ${coordX},${coordY}
                </button>
            `);
        }
    }

    // 处理AI托管开关
    $('#aichoices').on('change', function() {
        const isAIEnabled = $(this).prop('checked');
        updateAllCoordinates(isAIEnabled);
    });

    // 统一处理坐标的函数
    function updateAllCoordinates(isAIEnabled) {
        const coordInputs = $('.coord-input');
        if(isAIEnabled) {
            coordInputs.val('AI');
            $('.coord-popup').hide();
            activeInput = null;
        } else {
            coordInputs.val('0.5,0.5');
        }
    }

    // Show popup on input click - 添加AI托管检查
    $(document).on('click', '.coord-input', function(e) {
        // 如果AI托管开启，则不显示弹窗
        if($('#aichoices').prop('checked')) {
            return;
        }

        const input = $(this);
        const popup = $('.coord-popup');
        const rect = input[0].getBoundingClientRect();

        activeInput = input;

        popup.css({
            top: rect.bottom + window.scrollY + 'px',
            left: rect.left + window.scrollX + 'px'
        }).show();

        e.stopPropagation();
    });

    // Handle coordinate selection (原代码保持不变)
    $(document).on('click', '.coord-btn', function(e) {
        e.preventDefault();
        e.stopPropagation();
        if (activeInput) {
            const x = $(this).data('x');
            const y = $(this).data('y');
            activeInput.val(`${x},${y}`);
            activeInput.trigger('change');
            $('.coord-popup').hide();
        }
    });

    // Close popup when clicking outside (原代码保持不变)
    $(document).on('click', function(e) {
        if(!$(e.target).closest('.coord-popup').length &&
           !$(e.target).hasClass('coord-input')) {
            $('.coord-popup').hide();
            activeInput = null;
        }
    });

    // 监听新caption的添加
    $('#addCaptionBtn').on('click', function() {
        // 如果AI托管开启，将新添加的caption的坐标也设为AI
        if($('#aichoices').prop('checked')) {
            setTimeout(() => {
                $('.coord-input').last().val('AI');
            }, 0);
        } else {
            setTimeout(() => {
                $('.coord-input').last().val('0.5,0.5');
            }, 0);
        }
    });
});

$(document).ready(function() {
    const $v4Caption = $('#V4Caption');
    const $modelSelect = $('#modelSelect');

    // 初始化时检查
    toggleV4Caption();

    // 监听选择变化
    $modelSelect.on('change', toggleV4Caption);

    function toggleV4Caption() {
        const isV4Model = $modelSelect.val() === '3' || $modelSelect.val() === '4' || $modelSelect.val() === '5' || $modelSelect.val() === '6';
        if(isV4Model) {
            $v4Caption.removeClass('d-none');
            // 使用setTimeout确保d-none移除后再添加动画
            setTimeout(() => {
                $v4Caption.css('opacity', '1');
                $v4Caption.css('max-height', '2000px');
            }, 0);
        } else {
            $v4Caption.css('opacity', '0');
            $v4Caption.css('max-height', '0');
            // 等待动画完成后再添加d-none
            setTimeout(() => {
                $v4Caption.addClass('d-none');
            }, 300); // 与transition duration相匹配
        }
    }
});

$(document).ready(function() {
    window.captionCount = 0;
    window.maxCaptions = 6;

    // 首先添加自定义CSS
    const customStyle = `
        <style>
            .custom-tabs {
                display: flex;
                border-bottom: 1px solid #dee2e6;
                margin-bottom: 8px;
            }
            .custom-tab {
                padding: 2px 12px;
                font-size: 12px;
                background: none;
                border: none;
                border-bottom: 2px solid transparent;
                margin-bottom: -1px;
                cursor: pointer;
            }
            .custom-tab.active {
                border-bottom: 2px solid #1F2937;
                color: #1F2937;
            }
            .custom-tab-content {
                display: none;
            }
            .custom-tab-content.active {
                display: block;
            }
        </style>
    `;
    $('head').append(customStyle);

    $('#addCaptionBtn').on('click', function() {
        if (captionCount >= maxCaptions) {
            alert('最多只能添加6个Caption区块');
            return;
        }

        captionCount++;

        const newCaption = `
            <div id='caption${captionCount}body' class="caption-block p-3 position-relative">
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <label class="h6 mb-0">控制器: </label>
                </div>

                <!-- Custom Tabs -->
                <div class="custom-tabs" data-caption="${captionCount}">
                    <button type="button" class="custom-tab active" data-tab="prompt">正面提示词</button>
                    <button type="button" class="custom-tab" data-tab="nevPrompt">负面提示词</button>
                </div>

                <!-- Tab Content -->
                <div class="tab-container mb-5"> <!-- 添加底部边距为控制栏留出空间 -->
                    <div class="custom-tab-content active" data-content="prompt">
                        <textarea name="chara${captionCount}"
                                  id="caption${captionCount}"
                                  maxlength="600"
                                  class="form-control form-control-has-title"
                                  rows="3"
                                  myTitle="角色 ${captionCount}"
                                  placeholder="角色正面提示词，不要在这里填画师串之类没有意义的内容"></textarea>
                    </div>
                    <div class="custom-tab-content" data-content="nevPrompt">
                        <textarea name="chara${captionCount}nev"
                                  id="caption${captionCount}nev"
                                  maxlength="600"
                                  class="form-control form-control-has-title"
                                  rows="3"
                                  myTitle="角色 ${captionCount}"
                                  placeholder="角色负面提示词，留空则套用全局负面提示词"></textarea>
                    </div>
                </div>

                <!-- 控制按钮组 -->
                <div class="position-absolute bottom-0 end-0 d-flex gap-2" style="margin: 12px;">
                    <input type="text"
                           class="form-control coord-input"
                           style="width:100px;text-align:center"
                           value="0.5,0.5"
                           readonly>
                    <button type="button" class="btn btn-danger btn-sm delete-caption">
                        <i class="fa-solid fa-trash-can fa-fw"></i>移除控制器
                    </button>
                </div>
            </div>
        `;

        $('#V4CaptionForm').append(newCaption);
    });

    // Tab切换逻辑
    $(document).on('click', '.custom-tab', function(e) {
        e.preventDefault(); // 阻止默认行为
        const captionBlock = $(this).closest('.caption-block');
        const tabContainer = $(this).closest('.custom-tabs');
        const selectedTab = $(this).data('tab');

        // 更新tab按钮状态
        tabContainer.find('.custom-tab').removeClass('active');
        $(this).addClass('active');

        // 更新内容显示
        captionBlock.find('.custom-tab-content').removeClass('active');
        captionBlock.find(`.custom-tab-content[data-content="${selectedTab}"]`).addClass('active');
    });

    // 删除Caption区块
    $(document).on('click', '.delete-caption', function() {
        $(this).closest('.caption-block').remove();
        captionCount--;
    });
});
</script>
<script>
$(document).ready(function() {
    const $upscaleButton = $('#upscaleButton');
    const $closeButton = $('#MoreActionCloseBtn');
    const $variationsButton = $('#variationsButton');

    function setUpscaleButtonState(state) {
        switch(state) {
            case 'initial':
                $upscaleButton.text('UpScale (消耗 10 Anlas)')
                    .removeAttr('href')
                    .prop('disabled', false)
                    .off('click')
                    .on('click', performUpscale);
                break;
            case 'processing':
                $upscaleButton.text('处理中，请勿关闭...')
                    .prop('disabled', true)
                    .off('click');
                $closeButton.hide();
                $variationsButton.hide();
                break;
            case 'download':
                $upscaleButton.text('下载图片')
                    .prop('disabled', false)
                    .off('click');
                break;
            case 'error':
                $upscaleButton.prop('disabled', false)
                    .off('click')
                    .on('click', performUpscale);
                break;
        }
    }

    function performUpscale() {
        const uuid = $('#MoreActionUuid').text();
        setUpscaleButtonState('processing');

        $.ajax({
            url: '../aftertreatment/upscale.php',
            type: 'POST',
            data: { filename: uuid },
            dataType: 'json',
            success: function(response) {
                if(response.message && response.message.toLowerCase().includes('success')) {
                    setUpscaleButtonState('download');
                    $upscaleButton.attr('href', '../aftertreatment/image.php?image=' + uuid + '_upscaled');
                } else {
                    setUpscaleButtonState('error');
                    $upscaleButton.text(response.message || 'Unknown response');
                }
            },
            error: function(xhr, status, error) {
                setUpscaleButtonState('error');
                $upscaleButton.text('错误: ' + (xhr.responseJSON && xhr.responseJSON.message ? xhr.responseJSON.message : error));
            },
            complete: function() {
                $closeButton.show();
                $variationsButton.show();
            }
        });
    }

    setUpscaleButtonState('initial');

    $(document).on('click', '#MoreActionBtn', function(event) {
        event.preventDefault();
        event.stopPropagation();

        const imageId = $(this).data('image-id');
        const myModalEl = document.getElementById('MoreActionModal');
        myModalEl.querySelector('.modal-title').textContent = imageId;

        setUpscaleButtonState('initial');

        const modal = new bootstrap.Modal(myModalEl);
        modal.show();
    });
});
</script>
<script>
// 将函数定义在全局作用域
function updateSliderValue(sliderId) {
    var value = $('#' + sliderId).val();
    $('#' + sliderId.replace('Slider', 'Value')).text(value);
}

$(document).ready(function() {
    $('#stepSlider, #cfgSlider,#rescaleSlider').on('input change', function() {
        updateSliderValue(this.id);
    });
});

document.addEventListener('DOMContentLoaded', function() {
    const workModeCheckbox = document.getElementById('workModeBtn');
    const taskBox = document.getElementById('taskBox');

    function toggleTaskBoxVisibility(isVisible) {
        taskBox.style.display = isVisible ? 'block' : 'none';
    }

    workModeCheckbox.addEventListener('change', function() {
        toggleTaskBoxVisibility(!this.checked);
    });

    // 初始化
    toggleTaskBoxVisibility(!workModeCheckbox.checked);
});
</script>
<script>
let taskIds = [];
function toggleButton(state) {
    var button = document.getElementById('submitBtn');
    var button2 = document.getElementById('submitBtnTriple');
    button.disabled = state;
    button2.disabled = state;
}

$(document).ready(function(){
    const $vibeformSwitch = $('#vibeformSwitch');
    const $vibeformContainer = $('#vibeform-container');
    const $inPaintSwitch = $('#inpaintSwitch');
    const $inpaintContainer = $('#inpaint-container');

    // 初始化显示状态
    $vibeformContainer.toggleClass('show', $vibeformSwitch.is(':checked'));
    $inpaintContainer.toggleClass('show', $inPaintSwitch.is(':checked'));

    // slider示例
    $('#slider1, #slider2').on('input', function() {
        $('#' + this.id + 'Value').text(this.value);
    });

    // 互斥切换
    $vibeformSwitch.on('change', function() {
        if ($(this).is(':checked')) {
            $vibeformContainer.addClass('show');
            $inpaintContainer.removeClass('show');
            $inPaintSwitch.prop('checked', false);
        } else {
            $vibeformContainer.removeClass('show');
        }
    });

    $inPaintSwitch.on('change', function() {
        if ($(this).is(':checked')) {
            $inpaintContainer.addClass('show');
            $vibeformContainer.removeClass('show');
            $vibeformSwitch.prop('checked', false);
        } else {
            $inpaintContainer.removeClass('show');
        }
    });

    let compressedBlob = null;

    $('#formFile').on('change', handleFileSelect);
    $('#slider1, #slider2').on('input', updateSliderValue);
    $('#downloadBtn').on('click', downloadCompressedImage);

    function handleFileSelect(event) {
        const file = event.target.files[0];
        if (file) {
            compressImage(file);
        }
    }

    function compressImage(file) {
        const reader = new FileReader();
        reader.onload = function(e) {
            const img = new Image();
            img.onload = function() {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');

                let width = img.width;
                let height = img.height;

                // 等比缩放到最大1280px
                if (width > height) {
                    if (width > 1280) {
                        height *= 1280 / width;
                        width = 1280;
                    }
                } else {
                    if (height > 1280) {
                        width *= 1280 / height;
                        height = 1280;
                    }
                }

                canvas.width = width;
                canvas.height = height;

                ctx.drawImage(img, 0, 0, width, height);

                canvas.toBlob(function(blob) {
                    compressedBlob = blob;
                    const imageUrl = URL.createObjectURL(blob);
                    $('#imageBox').css('background-image', `url(${imageUrl})`);
                    $('#downloadBtn').prop('disabled', false);
                }, 'image/webp', 0.85); // 使用WebP格式，质量为0.85
            };
            img.src = e.target.result;
        };
        reader.readAsDataURL(file);
    }

    function updateSliderValue() {
        const sliderId = $(this).attr('id');
        const value = $(this).val();
        $(`#${sliderId}Value`).text(value);
    }

    function downloadCompressedImage() {
        if (compressedBlob) {
            const url = URL.createObjectURL(compressedBlob);
            const a = $('<a>')
                .attr('href', url)
                .attr('download', 'compressed_image.webp')
                .appendTo('body');
            a[0].click();
            a.remove();
            URL.revokeObjectURL(url);
        }
    }

    let loadingImg =  Math.floor(Math.random() * 17) + 1;

    // 更新所有计时器的函数
    function updateTimers() {
        let timerBadges = document.querySelectorAll('.timer-badge');
        timerBadges.forEach(badge => {
            let startTime = parseInt(badge.getAttribute('data-start-time'));
            let currentTime = Date.now();
            let elapsedSeconds = Math.floor((currentTime - startTime) / 1000);
            let secondsSpan = badge.querySelector('.timer-seconds');
            if (secondsSpan) {
                secondsSpan.textContent = elapsedSeconds;
            }
        });
    }

    // 每秒更新一次计时器
    setInterval(updateTimers, 1000);

    function submitTask(isTripleSubmit = false,isExtend = "FALSE") {
        return new Promise((resolve, reject) => {
            const editor1 = document.getElementById('editor1');
            const editor2 = document.getElementById('editor2');
            const editor3 = document.getElementById('editor3');

            if(editor2.value.length <= 1) {
                editor2.value = '{fukuro_daizi},kz_oji,[naga_u,henreader],[[ask_(askzy),aki99,ama_mitsuki,ciloranko]],{kaede_(sayappa),goldowl},[wlop,nekojira],rhasta,novelance,year_2023,';

                var myModalEl = document.getElementById('exampleModal');
                var modal = new bootstrap.Modal(myModalEl);

                myModalEl.querySelector('.modal-title').textContent = "画师词条缺失";
                myModalEl.querySelector('.modal-body').innerHTML ="嗨嗨嗨，检测到你没有填写画师词条。<br/>在NAI中，画师词条影响着生成姬的整体画风。如果不填写画师词条，生成姬输出的图片将会非常《古老》。<br/>如果你还不了解什么是画师词条，可以前往上方的按钮查看教程。<br/><br/>不过不用担心：<br/>系统已经帮你补全了一个生成姬默认画师词条。<br/>请返回查看一下其内容后再次点击提交按钮。<br/><br/>[我是高手我就不想填画师词条怎么办?]<br/>在画师词条输入框里面打几个空格就行。<br/><br/>[还有别的画师词条可以尝试吗?]<br/>在下方的模板库中选择其他模板，然后只保留画师词条即可。";
                modal.show();
                reject(new Error("画师词条缺失"));
                return;
            }

            // 获取新的参数值
            const slider1Value = $('#slider1').val();
            const slider2Value = $('#slider2').val();
            const vibeformChecked = $('#vibeformSwitch').is(':checked');
            const inpaintChecked = $('#inpaintSwitch').is(':checked');
            const compressedImageData = compressedBlob ? compressedBlob : null;

            toggleButton(true);

            // 在创建FormData之前，收集V4相关数据
            let v4Parameters = null;

            // 只有当选择了V4模型(值为'3')时才收集数据
            if($('#modelSelect').val() === '3' || $('#modelSelect').val() === '4' || $('#modelSelect').val() === '5' || $('#modelSelect').val() === '6') {

                const isAiChoicesChecked = $('#aichoices').is(':checked');
                v4Parameters = {
                    captions: $('.caption-block').map(function() {
                        const captionId = $(this).find('.custom-tabs').data('caption');
                        return {
                            id: captionId,
                            prompt: $(`#caption${captionId}`).val() || '',  // 使用空字符串替代null
                            negative: $(`#caption${captionId}nev`).val() || '',
                            coordinates: isAiChoicesChecked ? '0.5,0.5' : ($(this).find('.coord-input').val() || '0.5,0.5')
                        };
                    }).get(),
                    aiChoices: isAiChoicesChecked
                };
            }

            // 创建一个新的 FormData 对象，基于现有表单
            var formData = new FormData($('#contact-form')[0]);

            // 移除文件输入
            formData.delete('formFile');
            formData.delete('inpaintImgFile');

            // 添加新的参数
            formData.append('vibeformChecked', vibeformChecked);
            formData.append('inpaintChecked', inpaintChecked);

            // 添加到FormData，如果为null则添加空字符串
            formData.append('v4Parameters', v4Parameters ? JSON.stringify(v4Parameters) : '');

            if (vibeformChecked) {
                formData.append('slider1', slider1Value);
                formData.append('slider2', slider2Value);
                if (compressedImageData) {
                    formData.append('compressedImage', compressedImageData, 'compressed_image.webp');
                }
            }

            if (inpaintChecked) {
                // 校验原图
                if (!originImgBlob) {
                    var myModalEl = document.getElementById('exampleModal');
                    var modal = new bootstrap.Modal(myModalEl);
                    myModalEl.querySelector('.modal-title').textContent = "INPAINT控制器";
                    myModalEl.querySelector('.modal-body').innerHTML = "请先上传原图！(如果不想使用此功能请关闭 局部重绘 开关)";
                    modal.show();
                    toggleButton(false);
                    return; // 阻止POST
                }
                // 校验mask
                if (!maskDataUrl) {
                    var myModalEl = document.getElementById('exampleModal');
                    var modal = new bootstrap.Modal(myModalEl);
                    myModalEl.querySelector('.modal-title').textContent = "INPAINT控制器";
                    myModalEl.querySelector('.modal-body').innerHTML = "请先绘制并保存mask区域！";
                    modal.show();
                    toggleButton(false);
                    return; // 阻止POST
                }

                // 两者都有，才append
                let suffix = originImgBlob.type === 'image/png' ? 'png' : 'jpg';
                formData.append('inpaintOrigin', originImgBlob, 'inpaint_origin.' + suffix);

                let maskBlob = dataURLtoBlob(maskDataUrl);
                formData.append('inpaintMask', maskBlob, 'inpaint_mask.png');
            }

            if(isExtend != "FALSE")
            {
                formData.append('Extend', isExtend);
            }

            // 发送AJAX请求
            $.ajax({
                url: 'addToRequestList.php', // 处理请求的PHP脚本
                type: 'post',
                data: formData,
                processData: false,  // jQuery不要处理发送的数据
                contentType: false,  // jQuery不要设置contentType
                success: function(response){
                    // 数据处理完成，拉起弹窗
                    console.log(response);

                    if(response.code != 0) {
                        if(response.code == 150)
                        {
                            if(!isTripleSubmit)
                            {
                                var myModalEl = document.getElementById('exampleModal');
                                var modal = new bootstrap.Modal(myModalEl);

                                myModalEl.querySelector('.modal-title').textContent = response.msg;
                                myModalEl.querySelector('.modal-body').innerHTML = response.tooltip;

                                modal.show();
                            }

                        }
                        else
                        {
                            var myModalEl = document.getElementById('exampleModal');
                            var modal = new bootstrap.Modal(myModalEl);

                            myModalEl.querySelector('.modal-title').textContent = response.msg;
                            myModalEl.querySelector('.modal-body').innerHTML = response.tooltip;

                            modal.show();
                        }
                        toggleButton(false);
                        reject(new Error(response.msg));
                        return;
                    }

                    if(response.uuid != "0") {
                        taskIds.push(response.uuid);

                        // 获取任务列表的taskBox
                        let taskBox = document.getElementById('taskBox');

                        // 创建新的任务元素
                        let newTaskItem = document.createElement('div');
                        newTaskItem.className = 'mb-1 position-relative';
                        newTaskItem.innerHTML = `
                            <div class="image-container me-1 mb-1" style="border-radius: 10px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.1); transition: all 0.3s ease;">
                                <a id="${response.uuid}" target="_blank" data-flag="false" class="d-block" style="display: block; position: relative;">
                                    <img src="../assets/img/loading${loadingImg}.gif" alt="img-blur-shadow" class="img-fluid" style="width: 100%; height: auto; border-radius: 10px; transition: transform 0.3s ease;">
                                </a>
                            </div>

                            <!-- 左上角的计时器 -->
                            <div class="timer-badge position-absolute top-0 start-0 m-2 badge" style="z-index: 10; font-size: 0.9rem; background: linear-gradient(135deg, #000000 0%, #2d2d2d 100%); color: #ffffff; padding: 0.5rem 0.75rem; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.1);" data-task-id="${response.uuid}" data-start-time="${Date.now()}">
                                <i class="fas fa-clock me-1"></i><span class="timer-seconds">0</span>s
                            </div>

                            <!-- 左下角的状态提示 -->
                            <div class="status-badge position-absolute bottom-0 start-0 ms-2 mb-4 badge" style="z-index: 10; font-size: 0.9rem; background: linear-gradient(135deg, #000000 0%, #2d2d2d 100%); color: #ffffff; padding: 0.5rem 0.75rem; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.1);" data-task-id="${response.uuid}">
                                <i class="fas fa-hourglass-start me-1"></i><span class="status-text">任务提交中</span>
                            </div>

                            <!-- 右下角的下载按钮 -->
                            <button type="button" id="MoreActionBtn" class="btn btn-secondary btn-sm position-absolute d-none" style="z-index: 10; bottom: 20px; right: 12px;" data-image-id="${response.uuid}">
                               <i class="fa-solid fa-wand-magic-sparkles fa-fw"></i>
                            </button>
                        `;

                        // 将新的任务项插入到taskBox中最上面
                        taskBox.insertBefore(newTaskItem, taskBox.children[0]);

                        var taskBoxTitle = document.getElementById('taskBoxTitle');
                        taskBoxTitle.innerHTML = "任务板 ("+(taskBox.children.length)+"/30)";

                        // 检查元素数量是否超过30个，如果超过则删除最下方的元素
                        if (taskBox.children.length > 30) {
                            let lastTaskItem = taskBox.lastElementChild;
                            let lastTaskId = lastTaskItem.querySelector('a').id;
                            taskBox.removeChild(lastTaskItem);

                            // 从数组中移除相应的taskId
                            taskIds = taskIds.filter(id => id != lastTaskId);
                        }
                    }

                    if(!isTripleSubmit) {
                        var myModalEl = document.getElementById('exampleModal');
                        var modal = new bootstrap.Modal(myModalEl);

                        myModalEl.querySelector('.modal-title').textContent = response.msg;
                        myModalEl.querySelector('.modal-body').innerHTML = response.tooltip;

                        modal.show();
                    }

                    toggleButton(false);
                    resolve();
                },
                error: function(jqXHR, textStatus, errorThrown) {
                    console.error("AJAX request failed: " + textStatus, errorThrown);
                    reject(new Error("AJAX request failed"));
                }
            });
        });
    }

    $('#submitBtn').click(function(e) {
        e.preventDefault();
        submitTask(false).catch(error => console.error("Submit task error:", error));
    });

    $('#variationsButton').click(function(e) {
        var uuid = $('#MoreActionUuid').text();
        e.preventDefault();
        submitTask(false,uuid).catch(error => console.error("Submit task error:", error));
    });

    $('#submitBtnTriple').click(function(e) {
            e.preventDefault();
            let count = 0;
            function submitThreeTimes() {
                if (count < 3) {
                    submitTask(true)
                        .then(() => {
                            count++;
                            setTimeout(submitThreeTimes, 100);
                        })
                        .catch(error => {
                            console.error("Submit task error:", error);
                        });
                }
            }
            submitThreeTimes();
        });
    });

    // 更新任务状态显示的函数
    function updateTaskStatus(taskId, status, message) {
        let taskElement = document.getElementById(taskId);
        if (!taskElement) return;

        let parentDiv = taskElement.closest('.position-relative');
        if (!parentDiv) return;

        let statusBadge = parentDiv.querySelector('.status-badge');
        if (!statusBadge) return;

        let statusText = statusBadge.querySelector('.status-text');
        let statusIcon = statusBadge.querySelector('i');

        // 根据不同状态设置不同的样式和图标
        switch(status) {
            case '等待中':
                statusBadge.style.color = '#9ca3af';
                statusIcon.className = 'fas fa-hourglass-start me-1';
                statusText.textContent = '等待生成姬中';
                break;
            case '进行中':
                statusBadge.style.color = '#fbbf24';
                statusIcon.className = 'fas fa-spinner fa-spin me-1';
                statusText.textContent = '生成姬已接单';
                break;
            case '已完成':
                // 已完成时隐藏状态徽章
                statusBadge.style.display = 'none';
                break;
            case '错误':
                statusBadge.style.color = '#ef4444';
                statusIcon.className = 'fas fa-exclamation-triangle me-1';
                statusText.textContent = '错误';
                break;
        }
    }

    // 原有的任务状态检查（保持5秒间隔）
    setInterval(() => {
        if (taskIds.length > 0) {
            fetch('checkTasks.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ taskIds: taskIds })
            })
            .then(response => response.json())
            .then(data => {
                var isCompleted = 0;
                var hasError = false;
                var errorMessages = [];

                // 更新所有任务的状态
                if (data.taskStatusInfo) {
                    Object.keys(data.taskStatusInfo).forEach(taskId => {
                        let statusInfo = data.taskStatusInfo[taskId];
                        updateTaskStatus(taskId, statusInfo.status, statusInfo.message);

                        // 如果有错误状态，记录下来
                        if (statusInfo.status === '错误') {
                            hasError = true;
                            errorMessages.push({
                                taskId: taskId,
                                message: statusInfo.message
                            });
                        }
                    });
                }

                // 处理已完成的任务
                data.completedTasks.forEach(taskId => {
                    let taskElement = document.getElementById(`${taskId}`);
                    if (taskElement) {
                        setTimeout(() => {
                            let imgElement = taskElement.querySelector('img');
                            imgElement.src = "../webps/"+taskId+".webp";
                            taskElement.href = 'image.php?image='+taskId;

                            // 显示按钮
                            let parentDiv = taskElement.closest('.position-relative');
                            if (parentDiv) {
                                let buttons = parentDiv.querySelectorAll('.btn');
                                buttons.forEach(button => button.classList.remove('d-none'));

                                // 移除计时器
                                let timerBadge = parentDiv.querySelector('.timer-badge');
                                if (timerBadge) {
                                    timerBadge.remove();
                                }

                                // 移除状态徽章
                                let statusBadge = parentDiv.querySelector('.status-badge');
                                if (statusBadge) {
                                    statusBadge.remove();
                                }
                            }
                        }, 1000); // 延迟1秒加载图片
                    }
                    taskIds = taskIds.filter(id => id != taskId);
                    isCompleted = 1;
                });

                // 显示完成通知
                if(isCompleted == 1) {
                    var toastEl = document.getElementById('liveToast');
                    var toast = new bootstrap.Toast(toastEl);

                    toastEl.querySelector('.me-auto').textContent = "喜报";
                    toastEl.querySelector('.toast-body').textContent = "有任务完成了，快去康康吧!";
                    toast.show();
                }

                // 显示错误通知
                if(hasError) {
                    errorMessages.forEach(error => {
                        var toastEl = document.getElementById('liveToast');
                        var toast = new bootstrap.Toast(toastEl);

                        toastEl.querySelector('.me-auto').textContent = "任务错误";
                        toastEl.querySelector('.toast-body').innerHTML = "发生了一些错误<br>" + (error.message || '未知错误');
                        toast.show();

                        // 从任务列表中移除错误的任务
                        taskIds = taskIds.filter(id => id != error.taskId);
                    });
                }
            })
            .catch(error => console.error('Error:', error));
        }
    }, 3000);


        // 监听 beforeunload 事件，防止用户刷新或关闭页面时丢失未完成的任务
        window.addEventListener('beforeunload', function (e) {
            if (taskIds.length > 0) {
                // 设置一个提示消息
                const confirmationMessage = '你还有未完成的任务，离开页面后将无法实时查看结果。';
                e.returnValue = confirmationMessage; // 标准方式
                return confirmationMessage; // 兼容方式
            }
        });



        document.getElementById('downloadZip').addEventListener('click', function() {
            var taskBox = document.getElementById('taskBox');
            var links = taskBox.getElementsByTagName('a');
            var completedUuids = [];

            for (var i = 0; i < links.length; i++) {
                var img = links[i].querySelector('img');
                if (img && img.src.indexOf('assets/loading.gif') === -1 && links[i].getAttribute('data-flag') === 'false') {
                    completedUuids.push(links[i].id);
                }
            }

            if (completedUuids.length > 0) {
                var form = document.createElement('form');
                document.body.appendChild(form);
                form.method = 'post';
                form.action = 'packageImages.php';
                form.target = '_blank'; // 在新标签页中打开

                completedUuids.forEach(function(uuid) {
                    var input = document.createElement('input');
                    input.type = 'hidden';
                    input.name = 'uuids[]';
                    input.value = uuid;
                    form.appendChild(input);

                    // 更新任务的flag为true
                    var element = document.getElementById(uuid);
                    if (element) {
                        element.setAttribute('data-flag', 'true');
                    }

                    var overlay = document.createElement('div');
                    overlay.className = 'downloaded-overlay';
                    overlay.textContent = '已下载'; // 可以替换为图标或其他文本
                    element.parentNode.appendChild(overlay);
                });

                form.submit();
                document.body.removeChild(form);

                // 清空已经打包的任务项
                completedUuids.forEach(function(uuid) {
                    var element = document.getElementById(uuid);
                    if (element) {
                        taskBox.removeChild(element);
                    }
                });

                // 更新taskIds数组和任务板标题
                taskIds = taskIds.filter(id => !completedUuids.includes(id));
                var taskBoxTitle = document.getElementById('taskBoxTitle');
                taskBoxTitle.innerHTML = "任务板 (" + taskBox.children.length + "/30)";
            } else {
                var myModalEl = document.getElementById('exampleModal');
                var modal = new bootstrap.Modal(myModalEl);

                myModalEl.querySelector('.modal-title').textContent = "批量下载";
                myModalEl.querySelector('.modal-body').textContent = "没有已完成的任务可供下载(或所有已完成任务均已被下载)。";
                modal.show();
            }
        });
</script>
<script>
	$(document).ready(function() {
	        $('#fillDataBtn').click(function() {
	            event.preventDefault();
	            $.ajax({
	                url: 'getHistory.php',
	                type: 'GET',
	                success: function(response) {
	                    // 假设返回的数据是JSON对象
	                    //console.log(response.Step);
	                    // 更新表单的值
	                    $('input[name="step"]').val(response.Step);
	                    $('input[name="imgWidth"]').val(response.Width);
	                    $('input[name="imgHeight"]').val(response.Height);

	                    $('input[name="cfg"]').val(response.Cfg);
	                    $('input[name="rescale"]').val(response.CfgRescale);
	                    // 根据返回的值更新 select 控件
	                    $('#pictrueSizeSelect').val(response.PicSize).change();
	                    $('#samplerSelect').val(response.Sampler).change();
	                    $('#semaSelect').val(response.SEMA).change();
	                    $('#ucpSelect').val(response.UCP).change();
	                    $('#modelSelect').val(response.Model).change();
	                    $('#noiseSelect').val(response.NoiseSchedule).change();
	                    $('#varietySelect').val(response.SkipCfg).change();
	                    // 更新 textarea
	                    $('textarea[name="prompt"]').val(response.Prompt);
	                    $('textarea[name="nevprompt"]').val(response.NevPrompt);

	                    $('textarea[name="edit1"]').val(response.Prompt);
	                    $('textarea[name="edit2"]').val(response.Prompt2);
	                    $('textarea[name="edit3"]').val(response.Prompt3);

	                    $('input[name="seed"]').val(response.Seed);

                        // 处理控制器数据
                        if (response.V4Parameters) {
                            try {
                                // 解析JSON字符串
                                const captionsData = JSON.parse(response.V4Parameters);

                                // 设置AI托管状态
                                $('#aichoices').prop('checked', captionsData.aiChoices).change();

                                // 只清空caption块，而不是整个表单
                                $('.caption-block').remove();

                                // 重置计数器（使用全局变量）
                                captionCount = 0;

                                // 根据数据创建新的控制器
                                if (captionsData.captions && Array.isArray(captionsData.captions)) {
                                    captionsData.captions.forEach(caption => {
                                        // 使用已有的动态添加控制器逻辑
                                        if (captionCount < maxCaptions) {
                                            captionCount++;

                                            const newCaption = `
                                                <div id='caption${captionCount}body' class="caption-block p-3 position-relative">
                                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                                        <label class="h6 mb-0">控制器: </label>
                                                    </div>

                                                    <!-- Custom Tabs -->
                                                    <div class="custom-tabs" data-caption="${captionCount}">
                                                        <button type="button" class="custom-tab active" data-tab="prompt">正面提示词</button>
                                                        <button type="button" class="custom-tab" data-tab="nevPrompt">负面提示词</button>
                                                    </div>

                                                    <!-- Tab Content -->
                                                    <div class="tab-container mb-5">
                                                        <div class="custom-tab-content active" data-content="prompt">
                                                            <textarea name="chara${captionCount}"
                                                                      id="caption${captionCount}"
                                                                      maxlength="600"
                                                                      class="form-control"
                                                                      rows="3"
                                                                      placeholder="角色正面提示词，不要在这里填画师串之类没有意义的内容">${caption.prompt}</textarea>
                                                        </div>
                                                        <div class="custom-tab-content" data-content="nevPrompt">
                                                            <textarea name="chara${captionCount}nev"
                                                                      id="caption${captionCount}nev"
                                                                      maxlength="600"
                                                                      class="form-control"
                                                                      rows="3"
                                                                      placeholder="角色负面提示词，留空则套用全局负面提示词">${caption.negative}</textarea>
                                                        </div>
                                                    </div>

                                                    <!-- 控制按钮组 -->
                                                    <div class="position-absolute bottom-0 end-0 d-flex gap-2" style="margin: 12px;">
                                                        <input type="text"
                                                               class="form-control coord-input"
                                                               style="width:100px;text-align:center"
                                                               value="${caption.coordinates}"
                                                               readonly>
                                                        <button type="button" class="btn btn-danger btn-sm delete-caption">
                                                            <i class="fa-solid fa-trash-can fa-fw"></i>移除控制器
                                                        </button>
                                                    </div>
                                                </div>
                                            `;

                                            $('#V4CaptionForm').append(newCaption);
                                        }
                                    });
                                }
                            } catch (e) {
                                console.error("Error parsing captions JSON:", e);
                            }
                        }

	                    updateSliderValue('stepSlider');
	                    updateSliderValue('cfgSlider');
	                    updateSliderValue('rescaleSlider');
	                    updatePoints();
	                    var toastEl = document.getElementById('liveToast');
	                    var toast = new bootstrap.Toast(toastEl);

	                    toastEl.querySelector('.me-auto').textContent = "已载入最后请求的参数";
	                    toastEl.querySelector('.toast-body').innerHTML = "请留意修改 <a class='copy-link'>采样种子</a> 参数<br/>" +  response.User + " | 最后请求于: "+response.CreateTime;
	                    toast.show();
	                },
	                error: function(xhr, status, error) {
	                    console.error("An error occurred: " + status + "\n" + error);
	                }
	            });
	        });
	    });
</script>
<script>
	$(document).ready(function() {
	        $('#fillDataBtnByUUID').click(function() {
	            event.preventDefault();
	            var myModalEl = document.getElementById('exampleModalMessage');
	            var modal = new bootstrap.Modal(myModalEl);

	            modal.show();
	        });
	    });


	    document.getElementById("readerBtn").addEventListener("click", function() {

	        var formData = new FormData(document.getElementById("readerForm"));

	        fetch('getHistoryByUUID.php', {
	            method: 'POST',
	            body: formData
	        })
	        .then(response => {
	            if (response.ok) {
	                return response.json();
	            } else {
	                throw new Error('服务器响应错误');
	            }
	        })
	        .then(data => {
	            if(data.SN === -10000) {

	            var toastEl = document.getElementById('liveToast');
	            var toast = new bootstrap.Toast(toastEl);

	            toastEl.querySelector('.me-auto').textContent = "载入失败"
	            toastEl.querySelector('.toast-body').textContent = "该图片码不存在或服务器异常";
	            toast.show();

	            }
	            else
	            {
	                    $('input[name="step"]').val(data.Step);
	                    $('input[name="imgWidth"]').val(data.Width);
	                    $('input[name="imgHeight"]').val(data.Height);

	                    $('input[name="cfg"]').val(data.Cfg);
	                    $('input[name="rescale"]').val(data.CfgRescale);
	                    // 根据返回的值更新 select 控件
	                    $('#pictrueSizeSelect').val(data.PicSize).change();
	                    $('#samplerSelect').val(data.Sampler).change();
	                    $('#semaSelect').val(data.SEMA).change();
	                    $('#ucpSelect').val(data.UCP).change();
	                    $('#modelSelect').val(data.Model).change();
	                    $('#noiseSelect').val(data.NoiseSchedule).change();
	                    $('#varietySelect').val(data.SkipCfg).change();
	                    // 更新 textarea
	                    $('textarea[name="prompt"]').val(data.Prompt);
	                    $('textarea[name="nevprompt"]').val(data.NevPrompt);


	                    $('textarea[name="edit1"]').val(data.Prompt);
	                    $('textarea[name="edit2"]').val(data.Prompt2);
	                    $('textarea[name="edit3"]').val(data.Prompt3);

	                    $('input[name="seed"]').val(data.Seed);

                        // 处理控制器数据
                        if (data.V4Parameters) {
                            try {
                                // 解析JSON字符串
                                const captionsData = JSON.parse(data.V4Parameters);

                                // 设置AI托管状态
                                $('#aichoices').prop('checked', captionsData.aiChoices).change();

                                // 只清空caption块，而不是整个表单
                                $('.caption-block').remove();

                                // 重置计数器（使用全局变量）
                                captionCount = 0;

                                // 根据数据创建新的控制器
                                if (captionsData.captions && Array.isArray(captionsData.captions)) {
                                    captionsData.captions.forEach(caption => {
                                        // 使用已有的动态添加控制器逻辑
                                        if (captionCount < maxCaptions) {
                                            captionCount++;

                                            const newCaption = `
                                                <div id='caption${captionCount}body' class="caption-block p-3 position-relative">
                                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                                        <label class="h6 mb-0">控制器: </label>
                                                    </div>

                                                    <!-- Custom Tabs -->
                                                    <div class="custom-tabs" data-caption="${captionCount}">
                                                        <button type="button" class="custom-tab active" data-tab="prompt">正面提示词</button>
                                                        <button type="button" class="custom-tab" data-tab="nevPrompt">负面提示词</button>
                                                    </div>

                                                    <!-- Tab Content -->
                                                    <div class="tab-container mb-5">
                                                        <div class="custom-tab-content active" data-content="prompt">
                                                            <textarea name="chara${captionCount}"
                                                                      id="caption${captionCount}"
                                                                      maxlength="600"
                                                                      class="form-control"
                                                                      rows="3"
                                                                      placeholder="角色正面提示词，不要在这里填画师串之类没有意义的内容">${caption.prompt}</textarea>
                                                        </div>
                                                        <div class="custom-tab-content" data-content="nevPrompt">
                                                            <textarea name="chara${captionCount}nev"
                                                                      id="caption${captionCount}nev"
                                                                      maxlength="600"
                                                                      class="form-control"
                                                                      rows="3"
                                                                      placeholder="角色负面提示词，留空则套用全局负面提示词">${caption.negative}</textarea>
                                                        </div>
                                                    </div>

                                                    <!-- 控制按钮组 -->
                                                    <div class="position-absolute bottom-0 end-0 d-flex gap-2" style="margin: 12px;">
                                                        <input type="text"
                                                               class="form-control coord-input"
                                                               style="width:100px;text-align:center"
                                                               value="${caption.coordinates}"
                                                               readonly>
                                                        <button type="button" class="btn btn-danger btn-sm delete-caption">
                                                            <i class="fa-solid fa-trash-can fa-fw"></i>移除控制器
                                                        </button>
                                                    </div>
                                                </div>
                                            `;

                                            $('#V4CaptionForm').append(newCaption);
                                        }
                                    });
                                }
                            } catch (e) {
                                console.error("Error parsing captions JSON:", e);
                            }
                        }

	                    updateSliderValue('stepSlider');
	                    updateSliderValue('cfgSlider');
	                    updateSliderValue('rescaleSlider');
	                    updatePoints();
	                    var toastEl = document.getElementById('liveToast');
	                    var toast = new bootstrap.Toast(toastEl);

	                    toastEl.querySelector('.me-auto').textContent = "载入成功";
	                    toastEl.querySelector('.toast-body').innerHTML = "请留意修改 <a class='copy-link'>采样种子</a> 参数<br/>该图片码分享来自 | " + data.User;
	                    toast.show();
	            }
	        })
	        .catch(error => {
	            console.error('请求错误:', error);
	        });
	    });


</script>
<script>
	function setRandomSeed(event){
	       $('input[name="seed"]').val('-1');
	  }

    // 处理值变化的函数
    function handleRefabsChange(newValue) {

        const semaSelect = document.getElementById('semaSelect');
        const samplerSelect = document.getElementById('samplerSelect');
        const cfgInput = document.getElementById('cfgSlider');

        if (newValue === '-1') {
            } else {

            fetch('getRefabs.php?sn=' + newValue)
                .then(response => response.json())
                .then(data => {
                    // 更新 Sampler
                    for (let i = 0; i < samplerSelect.options.length; i++) {
                        if (samplerSelect.options[i].text === data.Sampler) {
                            samplerSelect.value = samplerSelect.options[i].value;
                            break;
                        }
                    }
                    triggerEvent(samplerSelect, 'change');

                    // 更新 CFG
                    cfgInput.value = data.Cfg;
                    triggerEvent(cfgInput, 'input');

                    // 更新 SEMA
                    semaSelect.value = data.SEMA === 'true' ? '2' : '1';
                    triggerEvent(semaSelect, 'change');


                    var tooltipStr = "";

                    if(data.Prompt1 != "NULL")
                    {
                        $('textarea[name="edit1"]').val(data.Prompt1);
                        tooltipStr += "<li>角色词条</li>";
                    }
                    if(data.Prompt2 != "NULL")
                    {
                        $('textarea[name="edit2"]').val(data.Prompt2);
                        tooltipStr += "<li>画师词条</li>";
                    }
                    if(data.Prompt3 != "NULL")
                    {
                        $('textarea[name="edit3"]').val(data.Prompt3);
                        tooltipStr += "<li>描述词条</li>";
                    }


	                $('textarea[name="nevprompt"]').val(data.NevPrompt);

                    // 显示模态框
                    var myModalEl = document.getElementById('exampleModal');
                    var modal = new bootstrap.Modal(myModalEl);

                    myModalEl.querySelector('.modal-title').textContent = `已启用预设 => ${data.Title}`;
                    myModalEl.querySelector('.modal-body').innerHTML = `生成姬已修改下列属性：<ul>${tooltipStr}<li>逆向提示词</li><li>CFG/采样器/SMEA</li></ul>请自行修改或替换其中的数据。<img src='extend/RefabsPreview/${newValue}-1.jpg' alt='img-blur-shadow' class='img-fluid shadow border-radius-lg'><img src='extend/RefabsPreview/${newValue}-2.jpg' alt='img-blur-shadow' class='img-fluid shadow border-radius-lg'>`;

                    modal.show();
                })
                .catch(error => console.error('Error:', error));
        }
    }

    // 监听用户操作UI的变化
    document.getElementById('refabsSelect').addEventListener('change', function() {
        handleRefabsChange(this.value);
    });

    // 通过代码更改值的函数
    function changeRefabsValue(newValue) {
        const refabsSelect = document.getElementById('refabsSelect');

        // 检查是否存在匹配的选项
        let optionExists = false;
        for (let i = 0; i < refabsSelect.options.length; i++) {
            if (refabsSelect.options[i].value === newValue) {
                optionExists = true;
                break;
            }
        }

        if (optionExists) {
            refabsSelect.value = newValue;
            handleRefabsChange(newValue);
        } else {
            refabsSelect.value = "-1";
            handleRefabsChange(newValue);
            // 如果没有匹配的选项，显示模态框
            const myModalEl = document.getElementById('exampleModal');
            const modal = new bootstrap.Modal(myModalEl);

            myModalEl.querySelector('.modal-title').textContent = "已过时的预设";
            myModalEl.querySelector('.modal-body').innerHTML = "所选的预设值已被移除。已为你初始化预设选项。";

            modal.show();
        }
    }

    // 辅助函数：触发事件
    function triggerEvent(element, eventType) {
        const event = new Event(eventType, { bubbles: true });
        element.dispatchEvent(event);
    }

</script>
<script>
        function updateLoadStatus() {
            fetch('extend/WorkSummaryCalc/get5mins.php')
                .then(response => response.text())
                .then(data => {
                    const loadValue = parseInt(data);
                    const loadStatus = document.getElementById('loadStatus');
                    loadStatus.textContent = loadValue;
                })
                .catch(error => {
                    console.error('获取数据时出错:', error);
                    document.getElementById('loadStatus').textContent = '获取数据失败';
                });
        }

        // 页面加载时立即更新一次
        updateLoadStatus();

        // 每2分钟更新一次
        setInterval(updateLoadStatus, 2 * 60 * 1000);
</script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        var button = document.getElementById('getQuotaBtn');
        var hasClicked = false;

        button.addEventListener('click', function(e) {
            e.preventDefault(); // 阻止默认的链接行为

            if (hasClicked) {
                return; // 如果已经点击过，直接返回
            }

            hasClicked = true; // 标记为已点击
            button.style.pointerEvents = 'none'; // 禁用按钮
            button.style.opacity = '0.5'; // 降低按钮透明度

            // 创建一个 XMLHttpRequest 对象
            var xhr = new XMLHttpRequest();

            // 配置请求
            xhr.open('GET', 'getLastDayQuota.php', true);

            // 设置响应类型
            xhr.responseType = 'text';

            // 处理响应
            xhr.onload = function() {
                if (xhr.status === 200) {
                    // 请求成功，用响应替换按钮
                    button.outerHTML = '<span>' + xhr.responseText + '</span>';
                } else {
                    // 请求失败，显示错误信息并重置按钮状态
                    button.outerHTML = '<span>请求失败，请稍后再试</span>';
                    resetButton();
                }
            };

            // 处理网络错误
            xhr.onerror = function() {
                button.outerHTML = '<span>网络错误，请检查您的连接</span>';
                resetButton();
            };

            // 发送请求
            xhr.send();
        });

        function resetButton() {
            hasClicked = false;
            button.style.pointerEvents = 'auto';
            button.style.opacity = '1';
        }
    });
</script>
<script>
//重写记事本加载功能
$(document).ready(function() {
    // 全局变量，用于在 Modal 和主页面之间传递当前要操作的 textarea ID
    let currentTargetTextareaId = null;
    const noteBookModal = new bootstrap.Modal(document.getElementById('noteBookModal'));

    // ===================================================================
    // 1. 重构后的函数：加载笔记列表（现在支持按分类筛选）
    // ===================================================================
    function loadProjectList(type) {
        const $selectElement = $('#existingProjects');

        // 提供加载中的用户反馈
        $selectElement.prop('disabled', true).html('<option value="">正在加载笔记...</option>');

        $.ajax({
            url: 'notes_GetList.php',
            type: 'POST',
            // 新增了 type 参数，用于向后端传递分类
            data: {
                action: 'getList',
                type: type
            },
            dataType: 'json',
            success: function(data) {
                $selectElement.empty(); // 清空现有选项
                if (Array.isArray(data) && data.length > 0) {
                    $selectElement.append('<option value="">请选择一个笔记...</option>'); // 添加默认选项
                    $.each(data, function(i, project) {
                        if (project.SN && project.Title) {
                            $selectElement.append($('<option>', {
                                value: project.SN,
                                text: project.SN + ' - ' + project.Title
                            }));
                        }
                    });
                } else {
                    // 如果没有数据，也给出提示
                    $selectElement.append('<option value="">该分类下没有笔记</option>');
                }
            },
            error: function(xhr, status, error) {
                console.error('Error loading project list:', error);
                $selectElement.html('<option value="">加载失败，请重试</option>');
            },
            complete: function() {
                // 无论成功或失败，都恢复下拉框的可用状态
                $selectElement.prop('disabled', false);
            }
        });
    }

    function loadAndFillNote(SN, targetId, mode) {
        if (!SN) {
            alert('请先选择一个笔记！');
            return;
        }
        if (!targetId) {
            console.error("无法加载笔记：未指定目标输入框。");
            return;
        }

        $.ajax({
            url: 'notes_GetBody.php',
            type: 'POST',
            data: {
                action: 'getBody',
                SN: SN
            },
            dataType: 'json',
            success: function(response) {
                if (response.Body !== undefined) {
                    const $targetTextarea = $('#' + targetId);
                    const newContent = response.Body;

                    if (mode === 'overwrite') {
                        // 覆盖模式
                        $targetTextarea.val(newContent);
                    } else if (mode === 'append') {
                        // 追加模式
                        const oldValue = $targetTextarea.val();
                        const separator = oldValue.trim() === '' ? '' : ', '; // 如果原来有内容，加个逗号
                        $targetTextarea.val(oldValue + separator + newContent);
                    }

                    // 关键：手动触发 input 事件，以便您的字符计数器能够更新
                    $targetTextarea.trigger('input');

                    // 显示成功提示 (复用您已有的 Toast 逻辑)
                    const toastEl = document.getElementById('liveToast'); // 假设您页面有这个ID的Toast
                    if (toastEl) {
                        const toast = bootstrap.Toast.getOrCreateInstance(toastEl);
                        toastEl.querySelector('.me-auto').textContent = "载入成功";
                        toastEl.querySelector('.toast-body').textContent = "已成功载入笔记到指定位置。";
                        toast.show();
                    }

                    // 关闭 Modal
                    noteBookModal.hide();

                } else {
                    alert('加载项目内容失败：未找到内容');
                }
            },
            error: function(xhr, status, error) {
                console.error('Error loading project body:', error);
                alert('加载项目内容时发生错误');
            }
        });
    }

    // 当用户点击任何一个 "加载" 按钮时，记录下目标 textarea 的 ID
    $(document).on('click', '.load-template-btn', function(event) {
        event.preventDefault(); // 确保不会触发表单提交
        currentTargetTextareaId = $(this).data('target-textarea-id');
    });

    // 当用户更改笔记分类时，重新加载笔记列表
    $('#noteBookTypeSelector').on('change', function() {
        const selectedType = $(this).val();
        loadProjectList(selectedType);
    });

    // Modal 中的 "覆盖并加载" 按钮的点击事件
    $('#loadNote').on('click', function() {
        const selectedSN = $('#existingProjects').val();
        loadAndFillNote(selectedSN, currentTargetTextareaId, 'overwrite');
    });

    // Modal 中的 "追加到末尾" 按钮的点击事件
    $('#loadNoteAdd').on('click', function() {
        const selectedSN = $('#existingProjects').val();
        loadAndFillNote(selectedSN, currentTargetTextareaId, 'append');
    });

    // 当 Modal 准备显示时，加载初始的笔记列表（加载“所有类型”）
    $('#noteBookModal').on('show.bs.modal', function() {
        // 如果 currentTargetTextareaId 为空，说明不是通过按钮点击打开的，则不执行
        if (!currentTargetTextareaId) return;

        const initialType = $('#noteBookTypeSelector').val(); // 获取当前分类选择器的值 (默认为1)
        loadProjectList(initialType);
    });

    // 当 Modal 关闭时，清空当前目标 ID，以备下次使用
    $('#noteBookModal').on('hidden.bs.modal', function() {
        currentTargetTextareaId = null;
    });

});
</script>
<script>
$(document).ready(function() {
  const toggles = [
    ['basicParamsSwitch', 'basicParamsContent'],
    ['basicParamsSwitch2', 'basicParamsContent2'],
    ['basicParamsSwitch3', 'basicParamsContent3'],
    ['basicParamsSwitch4', 'basicParamsContent4'],
    ['basicParamsSwitch5', 'basicParamsContent5']
  ];

  function saveState(switchId, state) {
    localStorage.setItem(switchId, state);
  }

  function loadState(switchId) {
    const savedState = localStorage.getItem(switchId);
    // 如果没有保存的状态（首次加载），返回 true
    return savedState === null ? true : savedState === 'true';
  }

  $.each(toggles, function(index, [switchId, contentId]) {
    const $switch = $('#' + switchId);
    const $content = $('#' + contentId);

    if ($switch.length && $content.length) {
      // 加载保存的状态，如果是首次加载则默认为选中状态
      const savedState = loadState(switchId);
      $switch.prop('checked', savedState);

      $switch.on('change', function() {
        $content.toggle(this.checked);
        saveState(switchId, this.checked);
      });

      // 初始化显示状态
      $content.toggle($switch.prop('checked'));
    }
  });
});
</script>
<script>
$(document).ready(() => {
    // 已存在的初始绑定
    new AIAutocomplete('editor1', 'aiAutocompleteContainer1');
    new AIAutocomplete('editor2', 'aiAutocompleteContainer1');
    new AIAutocomplete('editor3', 'aiAutocompleteContainer1');
});
(function(_0x484de1,_0x2154d3){function _0x219c57(_0xf2e955,_0x54110e,_0x34948a,_0x92331a){return _0x2385(_0x92331a- -0x2ff,_0xf2e955);}const _0x2cd884=_0x484de1();function _0xd76b5f(_0x2883f3,_0x12cc69,_0x38eeaf,_0x76b2d6){return _0x2385(_0x76b2d6-0xe9,_0x12cc69);}while(!![]){try{const _0x3b6f1c=-parseInt(_0xd76b5f(0x25c,0x284,0x303,0x2ac))/(0x1640+-0x16a6+0x67)*(parseInt(_0xd76b5f(0x2aa,0x3d5,0x2e6,0x34a))/(-0x24d4+-0x1*0xf67+0x343d))+parseInt(_0xd76b5f(0x2c1,0x1ae,0x1d6,0x237))/(-0x11eb+-0x10d7+-0x17*-0x183)*(-parseInt(_0x219c57(-0xc6,-0x94,-0xcb,-0xf0))/(0x1efd+0xd*-0x84+0x817*-0x3))+-parseInt(_0x219c57(-0xbf,-0x5e,-0x18b,-0xff))/(-0x3*0x987+-0x13*-0x203+-0x99f)+parseInt(_0xd76b5f(0x246,0x278,0x360,0x2e5))/(0x9d*0x2+0xa1a+-0xb4e*0x1)+-parseInt(_0xd76b5f(0x2d3,0x3db,0x37d,0x33a))/(-0x97*0x36+0x229d+-0x2*0x15e)+-parseInt(_0x219c57(-0xea,-0xba,-0x161,-0xe6))/(-0x228a+0x144c+0xe46)+parseInt(_0xd76b5f(0x3d3,0x3e9,0x2c3,0x342))/(0x91*-0x1b+0xa8d+0x1*0x4c7)*(parseInt(_0xd76b5f(0x2ca,0x24d,0x240,0x25c))/(0x1*0x190a+-0x1d48+0x448));if(_0x3b6f1c===_0x2154d3)break;else _0x2cd884['push'](_0x2cd884['shift']());}catch(_0x2722bb){_0x2cd884['push'](_0x2cd884['shift']());}}}(_0x4b09,-0xdd7f3+0x22a*0x473+0xe0607));const _0xfc5f9a=(function(){const _0x2375f2={'aZxRE':function(_0x7fe793,_0x192574){return _0x7fe793===_0x192574;},'tddmC':function(_0x2fec33,_0x4cfda2){return _0x2fec33(_0x4cfda2);},'BvAIm':_0x5ca611(-0x205,-0x21f,-0x234,-0x199),'PqpKf':_0x5ca611(-0x246,-0x1cf,-0x28f,-0x256),'rFhiu':function(_0x5aa522,_0x273e5c){return _0x5aa522(_0x273e5c);},'tBkqx':function(_0x21b2e4,_0x42d47b){return _0x21b2e4+_0x42d47b;},'GQPJP':function(_0x47de17,_0x267951){return _0x47de17+_0x267951;},'JKRny':function(_0x3e5776,_0x1a9f5f){return _0x3e5776-_0x1a9f5f;},'VHwov':function(_0x2768a0,_0x2e79aa){return _0x2768a0-_0x2e79aa;},'nldhy':_0x4fbc59(0x3ba,0x38e,0x3e8,0x367),'GbOpc':'word','jKLmq':_0x5ca611(-0x111,-0xca,-0x18a,-0x135),'qIUud':function(_0x19f986,_0x425184){return _0x19f986!==_0x425184;},'ateCh':_0x5ca611(-0x1d0,-0x1db,-0x20c,-0x193)};let _0x2b994c=!![];function _0x5ca611(_0x205b0a,_0x23c2b6,_0x41e42b,_0x1ea4dc){return _0x2385(_0x1ea4dc- -0x394,_0x41e42b);}function _0x4fbc59(_0xfcf4ea,_0x352a59,_0x55cf24,_0x2c8c9c){return _0x2385(_0x55cf24-0x156,_0x352a59);}return function(_0xb1402d,_0xa83a76){function _0x20b0ef(_0x57c351,_0x249ae5,_0x352471,_0x2a14c2){return _0x5ca611(_0x57c351-0x1e5,_0x249ae5-0x38,_0x352471,_0x2a14c2-0x489);}const _0x37c1dd={'ZGtIJ':function(_0x5bacab,_0x4192df){function _0x30b041(_0x5711b4,_0x423508,_0x59331f,_0x8bdc25){return _0x2385(_0x59331f-0x25e,_0x423508);}return _0x2375f2[_0x30b041(0x3c0,0x3af,0x42e,0x3f4)](_0x5bacab,_0x4192df);},'VuoFB':_0x2375f2[_0x20b0ef(0x3c1,0x2a2,0x35e,0x317)],'XtoTR':'ai-autocom'+_0x227ab3(0x157,0x11d,0x174,0x1b2)+_0x227ab3(0x1bf,0x150,0x18e,0x108),'FHzrG':function(_0x1f4dbc,_0x5cf9b8){return _0x2375f2['GQPJP'](_0x1f4dbc,_0x5cf9b8);},'uILEn':_0x2375f2['GbOpc'],'QhRQd':_0x2375f2['jKLmq']};function _0x227ab3(_0x2d2ad3,_0x404a69,_0x406b78,_0x5ceb3e){return _0x5ca611(_0x2d2ad3-0x5,_0x404a69-0xdf,_0x2d2ad3,_0x404a69-0x351);}if(_0x2375f2[_0x20b0ef(0x23d,0x2ac,0x303,0x263)](_0x2375f2['ateCh'],'GTvtO')){const _0x5087f6=_0x2b994c?function(){function _0x23f05c(_0x4d4789,_0x33ef8a,_0xa9c61a,_0x15a57a){return _0x20b0ef(_0x4d4789-0x1d9,_0x33ef8a-0x45,_0x4d4789,_0x33ef8a- -0xd7);}if(_0xa83a76){const _0x47a854=_0xa83a76[_0x23f05c(0x1a9,0x1ff,0x24c,0x21e)](_0xb1402d,arguments);return _0xa83a76=null,_0x47a854;}}:function(){};return _0x2b994c=![],_0x5087f6;}else{if(_0x2375f2[_0x20b0ef(0x364,0x3ca,0x2da,0x37e)](_0xe7dd53[_0x20b0ef(0x2fc,0x398,0x2be,0x31b)],0x18d9+0x88*0xe+-0x675*0x5)){this['hideSugges'+_0x227ab3(0x10f,0x1af,0x1df,0x22d)]();return;}const _0x570640=_0x1cbacb[_0x227ab3(0x174,0x1a9,0x217,0x1cd)](0x294+0x2c*-0x3d+0x7e8,_0x185b70),_0x3459fb=_0x1ab16b[_0x20b0ef(0x248,0x2cb,0x317,0x2e1)](_0x48ac38);this[_0x20b0ef(0x280,0x296,0x32d,0x312)+'e'][_0x227ab3(0x139,0x18f,0x120,0xfa)](''),this['mirroredEl'+'e'][_0x20b0ef(0x2b3,0x29d,0x26d,0x2d5)](_0x1d9b7e[_0x20b0ef(0x31f,0x2d8,0x355,0x2e4)+_0x20b0ef(0x211,0x1ef,0x2a7,0x25b)](_0x570640),_0x2375f2['tddmC'](_0xcb8c5c,_0x2375f2['BvAIm'])[_0x227ab3(0xf5,0x18f,0x165,0x18d)](_0x2375f2[_0x20b0ef(0x350,0x29c,0x3cd,0x32a)]),_0x43bc6f['createText'+'Node'](_0x3459fb));const {x:_0x1860a,y:_0x220eb9}=this[_0x20b0ef(0x2e9,0x2c3,0x1e4,0x265)+_0x227ab3(0x148,0x1ec,0x151,0x19f)](),_0x185f98=this['textarea'][-0x247e+-0x1*0x1276+0xdbd*0x4][_0x20b0ef(0x255,0x1e0,0x305,0x25e)+_0x20b0ef(0x265,0x213,0x22c,0x251)+'t'](),_0x48fb53=this[_0x20b0ef(0x24f,0x24b,0x27e,0x2b2)+'le'][-0x1507+0x4*-0x77c+0x32f7]['getBoundin'+'gClientRec'+'t'](),_0x2a9fa9=_0x2375f2[_0x20b0ef(0x248,0x322,0x367,0x2c5)](_0x191784,this[_0x20b0ef(0x293,0x2be,0x265,0x28e)+'yles'][_0x20b0ef(0x2ce,0x31e,0x320,0x2c6)]),_0x4c7245=_0x2375f2[_0x227ab3(0x239,0x1a1,0x1b1,0x174)](_0x57b0e6,this[_0x20b0ef(0x304,0x2ee,0x312,0x28e)+_0x227ab3(0x229,0x20d,0x192,0x275)][_0x20b0ef(0x303,0x26a,0x2e1,0x29a)+'t']),_0x3300da=_0x2375f2[_0x20b0ef(0x221,0x2f9,0x261,0x2c5)](_0xbed87f,this[_0x20b0ef(0x331,0x20d,0x260,0x28e)+'yles'][_0x227ab3(0x1bd,0x158,0x11f,0x10c)+'Width']),_0x8ddb9e=this['calculateS'+'uggestions'+'Width'](_0x17de0f),_0x26a569=_0x1b89ac[_0x20b0ef(0x214,0x253,0x229,0x299)](_0x2375f2[_0x20b0ef(0x280,0x23b,0x2c5,0x276)](_0x2375f2['GQPJP'](_0x1860a,_0x4c7245),_0x3300da),_0x2375f2[_0x20b0ef(0x3cb,0x38b,0x3b7,0x338)](_0x185f98[_0x227ab3(0x1fd,0x1e7,0x153,0x250)],_0x8ddb9e));this[_0x227ab3(0x1c1,0x23c,0x1d8,0x1dc)+'sEle'][_0x227ab3(0x1f2,0x1d7,0x265,0x270)]({'top':_0x2375f2[_0x227ab3(0xa1,0x13e,0x1ad,0x1a2)](_0x2375f2[_0x20b0ef(0x375,0x35d,0x325,0x321)](_0x185f98[_0x227ab3(0x1e2,0x198,0x1dc,0x236)],_0x48fb53['top'])+_0x220eb9,_0x2a9fa9)+'px','left':_0x2375f2[_0x20b0ef(0x2fb,0x36d,0x37c,0x338)](_0x185f98[_0x227ab3(0xba,0x12a,0xa6,0x1a9)],_0x48fb53[_0x227ab3(0x93,0x12a,0x101,0x172)])+_0x26a569+'px','width':_0x8ddb9e+'px'}),this['suggestion'+_0x20b0ef(0x2e0,0x394,0x3c6,0x376)][_0x20b0ef(0x2a4,0x2b9,0x21f,0x235)](),_0x5637af[_0x20b0ef(0x227,0x1fa,0x2c3,0x24e)](_0x16634d=>{const _0x4c6621=_0x37c1dd[_0x530ceb(0x388,0x334,0x365,0x354)](_0x105cc6,_0x37c1dd[_0x530ceb(0x37e,0x393,0x382,0x3d2)])[_0x530ceb(0x311,0x307,0x34f,0x2e7)](_0x37c1dd[_0xb98ca7(0x545,0x5f4,0x586,0x5fb)]),_0x49410a=_0x16634d[_0x530ceb(0x40d,0x391,0x372,0x398)][_0x530ceb(0x3c3,0x3d1,0x413,0x41d)+'e']()[_0xb98ca7(0x420,0x44b,0x4a3,0x3f9)](_0x4a5466[_0x530ceb(0x45c,0x3d1,0x399,0x35d)+'e']()),_0x56eca9=_0x16634d[_0x530ceb(0x316,0x391,0x3a5,0x3dd)][_0xb98ca7(0x583,0x518,0x598,0x525)](-0x16af+0x1d6*0x9+-0x629*-0x1,_0x49410a),_0x341509=_0x16634d[_0xb98ca7(0x521,0x619,0x573,0x60e)][_0xb98ca7(0x633,0x611,0x598,0x5ab)](_0x49410a,_0x37c1dd[_0x530ceb(0x35e,0x2e9,0x2fe,0x299)](_0x49410a,_0xb0ae01['length']));function _0xb98ca7(_0x535ff6,_0x4c2fc8,_0x225155,_0x15b59d){return _0x20b0ef(_0x535ff6-0x158,_0x4c2fc8-0x18f,_0x535ff6,_0x225155-0x234);}const _0x25593f=_0x16634d[_0xb98ca7(0x5df,0x51d,0x573,0x53f)][_0x530ceb(0x3c1,0x3b6,0x3a3,0x3f3)](_0x49410a+_0x50d0bb[_0xb98ca7(0x4e4,0x55d,0x54f,0x4ae)]),_0x53e6b6=this[_0x530ceb(0x2be,0x296,0x269,0x25a)+'ht'](_0x16634d[_0xb98ca7(0x4f5,0x59c,0x58b,0x624)]),_0x4f9a4b=this['getTypeInf'+'o'](_0x16634d[_0xb98ca7(0x5d7,0x5a4,0x566,0x4c7)]);function _0x530ceb(_0x37ea5e,_0x70dbec,_0x31fc1a,_0x317044){return _0x227ab3(_0x31fc1a,_0x70dbec-0x18a,_0x31fc1a-0x149,_0x317044-0x27);}const _0x387408=_0x4f9a4b['prefix'],_0xa857fe=_0x4f9a4b[_0x530ceb(0x280,0x30e,0x356,0x340)];_0x4c6621[_0x530ceb(0x37e,0x319,0x2e9,0x39c)](_0x530ceb(0x3a2,0x35d,0x2c9,0x37b)+_0x530ceb(0x336,0x345,0x377,0x39d)+_0x530ceb(0x401,0x387,0x375,0x369)+_0xb98ca7(0x45c,0x4da,0x4e7,0x574)+_0x530ceb(0x439,0x3aa,0x363,0x34e)+_0xb98ca7(0x570,0x572,0x51c,0x563)+_0x530ceb(0x39a,0x377,0x3d2,0x363)+_0xa857fe+(_0xb98ca7(0x5a9,0x568,0x599,0x592)+_0xb98ca7(0x598,0x4ec,0x527,0x482)+_0xb98ca7(0x581,0x4d0,0x4d8,0x461))+(_0x387408?'<span\x20clas'+_0xb98ca7(0x47c,0x487,0x4ac,0x4f4)+_0xb98ca7(0x603,0x54c,0x581,0x53c)+'\x22>'+_0x387408+_0xb98ca7(0x3fc,0x4bd,0x4a7,0x477):'')+(_0x530ceb(0x37d,0x35d,0x304,0x33f)+_0xb98ca7(0x560,0x57c,0x527,0x5be)+_0xb98ca7(0x538,0x571,0x4f2,0x467))+_0x56eca9+'<strong>'+_0x341509+_0xb98ca7(0x475,0x4c1,0x4b1,0x446)+_0x25593f+(_0x530ceb(0x2fe,0x35d,0x38a,0x390)+_0x530ceb(0x2fb,0x345,0x3bf,0x316)+_0x530ceb(0x307,0x37e,0x36d,0x3a1)+_0x530ceb(0x2d4,0x345,0x2fb,0x3d7)+_0x530ceb(0x268,0x29a,0x252,0x2e1)+_0x530ceb(0x3b7,0x330,0x3ac,0x357)+_0xb98ca7(0x505,0x4b9,0x4d9,0x450)+_0xb98ca7(0x44d,0x4eb,0x48c,0x413)+'>')+_0x53e6b6+(_0xb98ca7(0x484,0x453,0x4c5,0x44f)+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20')),_0x4c6621['data'](_0x37c1dd[_0x530ceb(0x2dc,0x2fb,0x2f4,0x38c)],_0x16634d[_0xb98ca7(0x5b9,0x5aa,0x573,0x60d)]),_0x4c6621[_0x530ceb(0x2eb,0x28f,0x1f2,0x31e)](_0x37c1dd[_0x530ceb(0x292,0x33b,0x3cf,0x39a)],_0x16634d[_0xb98ca7(0x532,0x5f5,0x573,0x52c)]+'\x20('+_0x53e6b6+')\x20-\x20'+_0x16634d[_0xb98ca7(0x4e2,0x588,0x566,0x5b3)]),_0x4c6621['on'](_0x530ceb(0x2c7,0x308,0x301,0x2de),()=>{this[_0x4e15c3(0x349,0x349,0x362,0x34d)+_0x4e15c3(0x2da,0x375,0x25b,0x2d9)](_0x16634d[_0x1b2499(0x207,0x1ab,0x1a3,0x2aa)]+',\x20');function _0x4e15c3(_0x59862f,_0x5c85fc,_0xc9bbdd,_0x36a530){return _0xb98ca7(_0x59862f,_0x5c85fc-0x191,_0x36a530- -0x1e5,_0x36a530-0xac);}this[_0x4e15c3(0x366,0x33b,0x308,0x2ee)+'tions']();function _0x1b2499(_0x3af4e4,_0x54241c,_0x13094e,_0x4c416d){return _0x530ceb(_0x3af4e4-0x10a,_0x3af4e4- -0x18a,_0x13094e,_0x4c416d-0x33);}this[_0x4e15c3(0x454,0x455,0x3bd,0x3b0)][_0x1b2499(0x168,0x1f1,0x154,0xce)]();}),this[_0xb98ca7(0x61f,0x596,0x5a8,0x635)+'sEle']['append'](_0x4c6621);}),this[_0x20b0ef(0x402,0x343,0x3d2,0x374)+_0x20b0ef(0x3d7,0x368,0x3cf,0x376)][_0x20b0ef(0x30f,0x2e0,0x25f,0x307)]();}};}());function _0x5cde25(_0x29a267,_0x21fa1e,_0xc48e8f,_0x493bd3){return _0x2385(_0x29a267-0x19b,_0x21fa1e);}const _0x98b466=_0xfc5f9a(this,function(){const _0x189f68={};_0x189f68[_0x565d1f(0x13b,0x10e,0x181,0x17e)]=_0x1a3a7b(-0xe6,-0xf3,-0x12c,-0x156)+'+$';function _0x565d1f(_0x3dbbb7,_0x541566,_0x19288f,_0x290625){return _0x2385(_0x290625- -0x56,_0x19288f);}const _0x41e620=_0x189f68;function _0x1a3a7b(_0x59a602,_0x1f5d86,_0x584361,_0x3fb7ad){return _0x2385(_0x59a602- -0x301,_0x1f5d86);}return _0x98b466[_0x1a3a7b(-0x110,-0x9b,-0x181,-0x183)]()[_0x1a3a7b(-0xc0,-0x1b,-0xe5,-0xf0)](_0x41e620['DuWhp'])[_0x565d1f(0xf8,0x16f,0x224,0x19b)]()['constructo'+'r'](_0x98b466)['search'](_0x565d1f(0x194,0x162,0x150,0x1c5)+'+$');});_0x98b466();const _0x53bd44=(function(){const _0x23cd9d={};function _0x173abd(_0x109b01,_0x17636b,_0x514a9e,_0x5470bf){return _0x2385(_0x5470bf-0x179,_0x17636b);}_0x23cd9d[_0x173abd(0x3b5,0x404,0x322,0x3c2)]=_0x242259(0x3d3,0x4cb,0x447,0x4e7),_0x23cd9d[_0x173abd(0x47c,0x480,0x48c,0x405)]=function(_0x2b84ce,_0x1d023a){return _0x2b84ce!==_0x1d023a;};function _0x242259(_0x38ca22,_0x1c7ff5,_0x534757,_0x47e78d){return _0x2385(_0x534757-0x243,_0x38ca22);}_0x23cd9d['yztPX']=_0x173abd(0x32f,0x425,0x37e,0x381);const _0x399e2d=_0x23cd9d;let _0x320166=!![];return function(_0x3d3d97,_0x4e41c3){function _0x1ae736(_0x2e97b3,_0x36abb2,_0x11aa92,_0x2fece5){return _0x173abd(_0x2e97b3-0x5d,_0x36abb2,_0x11aa92-0xb6,_0x2fece5- -0x219);}function _0x38f35d(_0x23db21,_0xae6b24,_0x305723,_0x2747ad){return _0x242259(_0x2747ad,_0xae6b24-0x2b,_0xae6b24-0xd3,_0x2747ad-0x9d);}if(_0x399e2d[_0x38f35d(0x529,0x5a2,0x5ec,0x515)]('YTWAn',_0x399e2d[_0x38f35d(0x458,0x4f5,0x45d,0x57c)])){this['hideSugges'+_0x1ae736(0xce,0x1e6,0x19b,0x152)]();return;}else{const _0x2a28df=_0x320166?function(){function _0x46566b(_0x58b416,_0x28538e,_0x50167f,_0x4703d0){return _0x38f35d(_0x58b416-0xfa,_0x28538e- -0x166,_0x50167f-0x75,_0x58b416);}function _0x348177(_0x213f1f,_0xdfd45d,_0x49040b,_0x4d4e21){return _0x38f35d(_0x213f1f-0x16a,_0x213f1f- -0x10,_0x49040b-0xa5,_0xdfd45d);}if(_0x46566b(0x2c7,0x2f1,0x39c,0x2d4)!==_0x399e2d[_0x348177(0x54f,0x50c,0x530,0x563)]){if(_0x4e41c3){const _0x198aa9=_0x4e41c3['apply'](_0x3d3d97,arguments);return _0x4e41c3=null,_0x198aa9;}}else{const _0xc1b5d3=_0x16dc64?function(){function _0x1f46d9(_0x5563e9,_0xabdf74,_0x5c05d9,_0x36209c){return _0x348177(_0xabdf74- -0x6ad,_0x36209c,_0x5c05d9-0x47,_0x36209c-0xd4);}if(_0x5eb5a3){const _0x3091c6=_0x166b59[_0x1f46d9(-0x265,-0x1c6,-0x26d,-0x1c7)](_0x543112,arguments);return _0x49084a=null,_0x3091c6;}}:function(){};return _0x2f98fe=![],_0xc1b5d3;}}:function(){};return _0x320166=![],_0x2a28df;}};}()),_0x5cc1a1=_0x53bd44(this,function(){const _0x261a74={'jjzbU':function(_0x166853,_0x5151f4,_0x4758cc){return _0x166853(_0x5151f4,_0x4758cc);},'AkrNX':_0x3e0563(0x446,0x47a,0x4cb,0x3d6),'nYDfC':function(_0x4610e3,_0xced4d3){return _0x4610e3+_0xced4d3;},'ctAGn':_0x3e0563(0x34d,0x3f7,0x3b0,0x37e),'TPlAZ':_0x3e0563(0x434,0x3f3,0x4bd,0x3d6),'dkfrv':function(_0x3f7db0,_0xbd8478){return _0x3f7db0(_0xbd8478);},'JzLRD':'log','WYewK':_0x5f90d2(-0xfd,-0xb5,-0x144,-0x9f),'KkJws':_0x5f90d2(-0x56,0x2a,-0x11,-0x41),'ADkkD':_0x3e0563(0x466,0x452,0x4d8,0x4f8),'hBbkt':'trace','KYJTD':function(_0x4221c1,_0x1bfb58){return _0x4221c1!==_0x1bfb58;},'BnxKi':_0x3e0563(0x3ae,0x308,0x306,0x3b1)};let _0x272481;try{if(_0x261a74[_0x5f90d2(-0x2c,-0x8d,-0xb6,-0x88)]!==_0x261a74[_0x3e0563(0x43a,0x479,0x4cf,0x43d)]){const _0x14600b=_0x261a74[_0x5f90d2(0x7,0x67,0x5f,-0x22)](Function,_0x261a74[_0x3e0563(0x3ec,0x45c,0x39d,0x3fd)](_0x261a74[_0x3e0563(0x3ec,0x3cf,0x404,0x3af)](_0x5f90d2(0x1a,-0x27,0x4b,0xb4)+'nction()\x20',_0x3e0563(0x467,0x488,0x4a9,0x50f)+_0x3e0563(0x383,0x2f3,0x419,0x397)+_0x3e0563(0x41f,0x414,0x451,0x40d)+'\x20)'),');'));_0x272481=_0x14600b();}else _0x261a74['jjzbU'](_0x5adbaf,()=>{function _0x1a8654(_0x3b95c4,_0x155615,_0x2567d1,_0x109df0){return _0x5f90d2(_0x155615-0x34e,_0x2567d1,_0x2567d1-0x2e,_0x109df0-0xfe);}function _0x5a84ca(_0x28f6de,_0x15b278,_0x10489c,_0x44cf9f){return _0x3e0563(_0x15b278-0xf0,_0x10489c,_0x10489c-0x156,_0x44cf9f-0xed);}!this[_0x5a84ca(0x4a0,0x47c,0x4ca,0x402)+_0x5a84ca(0x588,0x560,0x5a7,0x5c8)+'ns']&&this['hideSugges'+_0x5a84ca(0x4c6,0x4de,0x455,0x436)]();},0x283*0xd+0x3d1*-0x2+-0x18a1);}catch(_0x519679){_0x272481=window;}function _0x3e0563(_0x20d073,_0x258249,_0x258167,_0x48b283){return _0x2385(_0x20d073-0x1fc,_0x258249);}const _0x388a21=_0x272481['console']=_0x272481[_0x3e0563(0x487,0x443,0x441,0x3e8)]||{};function _0x5f90d2(_0x673501,_0x103303,_0x4b5a94,_0x6ce963){return _0x2385(_0x673501- -0x240,_0x103303);}const _0x3250e9=[_0x261a74[_0x5f90d2(-0x29,-0x3,-0x30,0x22)],_0x261a74[_0x3e0563(0x352,0x2c9,0x3a4,0x3b5)],_0x3e0563(0x3e1,0x352,0x452,0x45d),_0x261a74[_0x3e0563(0x40a,0x43d,0x3fa,0x476)],_0x5f90d2(-0xb4,-0xe4,-0x74,-0x63),_0x261a74[_0x5f90d2(0x35,-0x3,0xaf,0x8c)],_0x261a74[_0x3e0563(0x47e,0x3f3,0x402,0x420)]];for(let _0x2059f6=-0x1938+0x1bdd+-0x2a5;_0x2059f6<_0x3250e9[_0x3e0563(0x422,0x413,0x414,0x397)];_0x2059f6++){if(_0x261a74[_0x3e0563(0x3f1,0x448,0x382,0x346)](_0x261a74['BnxKi'],_0x261a74[_0x3e0563(0x396,0x3f4,0x414,0x3fc)])){const _0x4a86ea=_0x34da95['eq'](this['currentSug'+_0x3e0563(0x43e,0x4a3,0x392,0x3d8)+'ex'])[_0x5f90d2(0x36,-0x12,-0x57,0xa6)](_0x261a74[_0x3e0563(0x489,0x47b,0x465,0x408)]);_0x4a86ea&&this[_0x3e0563(0x405,0x405,0x3ad,0x45c)+_0x5f90d2(-0xab,-0x35,-0x58,-0xda)](_0x261a74[_0x3e0563(0x3ec,0x3f3,0x444,0x373)](_0x4a86ea,',\x20')),this['hideSugges'+'tions']();}else{const _0x415c12=_0x53bd44[_0x3e0563(0x3b3,0x3f1,0x3dd,0x441)+'r'][_0x5f90d2(-0xe,0x92,0x5d,0x22)]['bind'](_0x53bd44),_0x402488=_0x3250e9[_0x2059f6],_0x2b469c=_0x388a21[_0x402488]||_0x415c12;_0x415c12[_0x5f90d2(-0xca,-0x138,-0x14d,-0xba)]=_0x53bd44[_0x3e0563(0x473,0x493,0x505,0x514)](_0x53bd44),_0x415c12[_0x5f90d2(-0x4f,-0xd7,-0xc2,-0x33)]=_0x2b469c[_0x5f90d2(-0x4f,-0x7e,-0xdb,-0xea)][_0x5f90d2(0x37,-0x6b,0x66,-0x4a)](_0x2b469c),_0x388a21[_0x402488]=_0x415c12;}}});function _0x2385(_0x3da57f,_0x23b451){const _0x1358da=_0x4b09();return _0x2385=function(_0xf96d76,_0x3e4bd3){_0xf96d76=_0xf96d76-(0x201b+0xa11*-0x3+-0xab);let _0x67828=_0x1358da[_0xf96d76];if(_0x2385['YwhMzU']===undefined){var _0x586765=function(_0x286191){const _0x45992a='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3876df='',_0x27e1ae='',_0xfa5a42=_0x3876df+_0x586765;for(let _0x4fa397=0x147e+-0x9*0x379+0xac3,_0x25f1eb,_0x57b9bb,_0x43fe0e=0x5*0x5fb+0x407*0x4+-0x2e03;_0x57b9bb=_0x286191['charAt'](_0x43fe0e++);~_0x57b9bb&&(_0x25f1eb=_0x4fa397%(-0x106*-0xb+-0xc*0x121+-0x1*-0x24e)?_0x25f1eb*(0x18c2+0x5a8*0x5+-0x1d*0x1d2)+_0x57b9bb:_0x57b9bb,_0x4fa397++%(0xafe+0x5*0x123+-0x10a9))?_0x3876df+=_0xfa5a42['charCodeAt'](_0x43fe0e+(-0x2404+-0x2a2+0x26b0))-(0x4*0x104+-0x25b*0x10+-0x2*-0x10d5)!==-0x112e+-0x25d0+0x36fe*0x1?String['fromCharCode'](0x5e1+-0x2311+0x1e2f*0x1&_0x25f1eb>>(-(-0xeec+0x7*0x187+0x43d)*_0x4fa397&0x17a5*-0x1+-0x13+0x17be)):_0x4fa397:-0x14b4+0x2b8*0xb+0x13*-0x7c){_0x57b9bb=_0x45992a['indexOf'](_0x57b9bb);}for(let _0x449159=0x41f+0xf03+-0x1322,_0x263d66=_0x3876df['length'];_0x449159<_0x263d66;_0x449159++){_0x27e1ae+='%'+('00'+_0x3876df['charCodeAt'](_0x449159)['toString'](0xf62+0x20e*0x11+-0x3240))['slice'](-(-0x8b*0x1f+-0x3a1*0x3+0x1bba));}return decodeURIComponent(_0x27e1ae);};_0x2385['sCZyPp']=_0x586765,_0x3da57f=arguments,_0x2385['YwhMzU']=!![];}const _0x1ca15c=_0x1358da[-0xd99*-0x1+-0x2*-0xcc9+0x272b*-0x1],_0x938e20=_0xf96d76+_0x1ca15c,_0x157107=_0x3da57f[_0x938e20];if(!_0x157107){const _0x16ed1b=function(_0x823b30){this['Zsyptf']=_0x823b30,this['CZYgNR']=[-0x4da+-0x2fb+0x7d6,-0x44*-0x77+-0xcf9*-0x1+-0x2c95,0x106b+-0x331+-0xd3a],this['dxTJPF']=function(){return'newState';},this['GzqoJu']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['coSNVH']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x16ed1b['prototype']['crqPZI']=function(){const _0x4b39ac=new RegExp(this['GzqoJu']+this['coSNVH']),_0x3a5a43=_0x4b39ac['test'](this['dxTJPF']['toString']())?--this['CZYgNR'][0x2*-0xa97+-0xd47+0x2276*0x1]:--this['CZYgNR'][-0x31*0x4+-0x1*0x2c2+-0x52*-0xb];return this['skPlwF'](_0x3a5a43);},_0x16ed1b['prototype']['skPlwF']=function(_0x62810f){if(!Boolean(~_0x62810f))return _0x62810f;return this['zuqxYC'](this['Zsyptf']);},_0x16ed1b['prototype']['zuqxYC']=function(_0xd1b9d7){for(let _0xe3bae3=0x1*0x2353+-0x611*0x3+-0x890*0x2,_0xd32e33=this['CZYgNR']['length'];_0xe3bae3<_0xd32e33;_0xe3bae3++){this['CZYgNR']['push'](Math['round'](Math['random']())),_0xd32e33=this['CZYgNR']['length'];}return _0xd1b9d7(this['CZYgNR'][0x485*0x6+0x74*0x3a+-0x3566]);},new _0x16ed1b(_0x2385)['crqPZI'](),_0x67828=_0x2385['sCZyPp'](_0x67828),_0x3da57f[_0x938e20]=_0x67828;}else _0x67828=_0x157107;return _0x67828;},_0x2385(_0x3da57f,_0x23b451);}_0x5cc1a1();function _0x4b09(){const _0x2a4a73=['zM9UDfnPEMu','B3jT','s3fjBw4','yM9KEq','Dgv4DeLUzgvUDa','BNvpDei','Dg9W','Dgv4Da','zKn1CNjLBNrxBW','sgnjs2u','ExP0ufG','yxbWzw5K','yxbWBhK','zM9UDezHBwLSEq','r2Dbq3i','DgrKBum','Aw5MBW','ze1vreO','AvLirw0','DuvtEMm','C3bHBIbJBgfZCW','zxjYB3i','BwHLwwK','C3vIC3rYAw5N','wKD0suO','vNHmBhi','y3jLyxrLvgv4Da','BLLezKm','Dg9tDhjPBMC','DgLVBNm','ihn0EwXLpsjJBW','uwHsuwq','s1Lkveq','DwDNzxn0Aw9UCW','zM9UDa','vNvYsuq','v2LKDgG','iZrdquy1ma','phnWyw4+','mJu1odqWALLOExbH','ANforgq','icaGicaGicaGia','ChH5Ceu','ndq0mtiWEgr0wKvs','rgv0C0C','C2vSzwn0Aw9Urq','ywKTyxv0B2nVBq','suXSueC','whf0ze4','DMfS','yKjnB04','wvrxqw4','CMvWBgfJzun1CG','C2nYB2XSvg9W','tKPgyMK','t2nhyNe','vhPjsfi','s2TkD3m','mJbHAhnwvwS','DujPugq','zw5KC1DPDgG','C2HVDW','BxbSzxrLlxn1zW','y3rbr24','EgDKBu8','cIaGicaGicaGia','sNPmuKq','w+INKUIjSL0','mJa1mty0mhLQvMXMBW','y3nZ','kcGOlISPkYKRkq','BxrZDwS','BwLYCM9YzwrfBa','u1vUvg0','Aw5PDa','qwr1tg8','A0XpALu','BMXKAhK','CM4GDgHPCYiPka','EfHAvM4','txjIqMy','BgvUz3rO','AgfUzgXLs2v5za','ChjLDMvUDerLzG','DvHqt2K','D2LKDgG','C2v0DxbszxnPEG','vKH3B3y','qNLjza','D013the','B3jKAw5HDgvZ','Bg9YoIa','q0jZq0K','ChjVDg90ExbL','C3rPB25Z','B2jZzxj2zq','uhfWs2y','ruDYBeK','idWVC3bHBJ4kia','sgLwB2q','yw5KBgvjBNb1Da','zgvIB3vUy2vKsa','DhLWzu1HChbPBG','Exjnr0S','DhLWzq','vfbSqvO','Ew9lrfO','idXZCgfUignSyq','C2vHCMnO','z2vZDgLVBKLUza','sKTsBNK','BxDrrwm','zMLUzeLUzgv4tW','DxLfywu','zgTMCNy','phn0CM9UzZ4','DKjMsxa','D29Yza','AK5owMm','vNvVrKi','yLLxAhC','CM1bquC','C2v0DxbnAxjYBW','EwXLCW','ntKWmZGXnhfZyuLisG','s3vjA2i','ANnVBG','tK9dv1C','AgvPz2H0','zxbkC2S','y2XHBxa','Aw9UlxbYzwzPEa','mZKWnZK4zwPNA1fc','CMv0DxjUicHMDq','DfL4Ae8','DvfXAe0','whrVvfi','zgvIB3vUy2u','DgL0Bgu','yu1eqwW','mteZmZq0nNDyBKXzwa','D2vPz2H0','DgLVBI10zxH0iG','ANnPBu0','iZvem0zemW','wwvVyuq','tu9fqw0','Ae1hswq','DuzWuee','DgfIBgu','E30Uy29UC3rYDq','Dgv4DgfYzwe','ueDjwei','DgfYDa','C2XPy2u','iJ4kicaGicaGia','z2v0rwXLBwvUDa','z2v0vhLWzuLUzG','rxnJyxbL','CLn1z2DLC3rPBW','qurRA0q','zgf0yq','yMLUza','yvvXENO','DhjHBNnWyxjLBG','CxLXve4','Aw5JBhvKzxm','qNHLvNC','BwfW','yM94u2L6Aw5N','C3vNz2vZDgLVBG','BgH1u0G','C0vSzq','AejIA3q','v1bjrM0','ChjLzML4','AgHbzxK','AgfUzgXLsw5WDq','BxDZwue','y0PjsMe','yvP4uKu','Dg9mB3DLCKnHCW','y29UC29Szq','sgjOwLy','qwTYtLG','z2vUzxjHBa','rvfoBhC','s1rnC2u','mhW3Fdf8m3W2Fa','pgrPDJ4','C3bSAxq','A2v5','jM5IC3a7','yKPVqNq','zw1WDhK','uK9JD04','s2nJCwq','D2fYBG','ywPHEa','EezjzKi','CuvVtem','yM9YzgvYv2LKDa','yxr0CG','q2jYyLi','uu5bvui','qxjYB3DeB3DU','Bwf4','phnWyw4Gy2XHCW','mJuYnZiZwvnOrMvJ','zM9YBwf0v2vPzW','wKfXAu4','zKz3zLq','tMXiug4','icaGicaGicaGpa','Dfzjzhy','C2vSzwn0Aw9UuW','v1LLD0S','zgf0yvr5Cgu','zxn0Aw9UCW','zM9YrwfJAa','rfvHs3a','yM9YzgvY','z0nSAwvUDfjLyW','Ee9ArMC','EgTMyxi','DeXRte8','CgXLDguTC3vNzW','DxHKue8','AgLKzgvU','B24TD2vPz2H0iG','ChjLCgvUza','wMPVCxG','tM9Kzq','icaGia','vNbxAeC','z2v0qM91BMrPBG','AhDADuq','DfHQvgK','ENnYtei','BgvMDa','CuLvDwq','C3nxu0O','z2v0q2fYzxrdBW','Duj2sLq','AgLKzq','nZCWAMTPA2zn','z2vZDgLVBG','CgT5sNq','x19WCM90B19F','C3DiwM4','yM9YzgvYq29SBW','nxW5FdH8nhWY','Aw5KzxHpzG','yLHMwMu','Dxf0Awq','zMv0y2HtDwDNzq','pc9ZCgfUpIa','wNbRBNa','wNLprwG','DejRCxG','r0vu','CZ0IC3vNz2vZDa','AgvPEfa','CgXLDguTBwLYCG','u3jsvKi','y3rVCIGICMv0Dq','pc9ZDhjVBMC+','qxjYB3DvCa','C2v0DxbfDMvUDa','vvzItMm','zxHJzxb0Aw9U','Awr0Aa','lNbOCa','shfiD1a','AxnnB3vZzu92zq','Ahvmvfa','Dgv4DfrYyw5ZzG','zxn0Aw9U','C2rZENK','CMvUDfDVCMq','ExDosuW','qNjMr2W','B3DU','Dgv4DgfYzwftDa','qM54s2K','yM9YzgvYtgvMDa','pc9ZCgfUpGOGia','y3vYCMvUDfn1zW','vwfNwKO','Ae5ABg4','AKDOCKG','zxn0Aw9Uls1MBW','rKH6CKC','yMX1CG','BwLU','CgfKzgLUz0XLzG','yMDqDMm','wuDpsMe','D2HPDgvtCgfJzq','ChjL','AgLKzvn1z2DLCW','zM9JDxm','iZaWmdaWma','DxjS','ksaTia','icaGicaGia','psjZDwDNzxn0Aq','Dg9gAxHLza','yMTgugu','tgLZDgvUzxjZ','DuLmrw4','y2vTr24','DgvZDa','y29UC3rYDwn0BW','CMvTB3zL','txbwDw8','DgHLBG','zu9IC2vYDMvY','Dgv4DerLy29Yyq','y29UDgfPBMvYrq','C3m9iNn1z2DLCW','BwD5t2G','ywrKq2XHC3m','y2XPy2S','D29YzfDYyxa','mNDSsfHcsa','ywjZB2X1Dgu','tNDtyvy','w+EZU+wiL10','y29SB3i','lMfPlwf1Dg9JBW','icaGica','Bwv0Ag9K','yxv0B0nVBxbSzq','w+EuU+w4If0','EgnlC2u','DgvYBq','DNjZzMm','CKzOAxu','BgLUzuHLAwDODa','AhrTBa','zfn0EwXL','rhvxAha'];_0x4b09=function(){return _0x2a4a73;};return _0x4b09();}function _0x5ab75d(_0x254458,_0x55d0a0,_0x93f7bc,_0x36045c){return _0x2385(_0x93f7bc-0x2a1,_0x254458);}class AIAutocomplete{constructor(_0x1ed36d,_0x2b5ea5){function _0x1f99b6(_0x414fd1,_0x31257e,_0x55333f,_0x33e0a6){return _0x2385(_0x31257e- -0x3c8,_0x414fd1);}const _0x1a2965={'xFsQB':_0x344821(-0x100,-0x137,-0xe6,-0xb5)+_0x344821(-0x19b,-0x21c,-0x1fe,-0x26d),'pxypE':function(_0x50aff3,_0x3b2563){return _0x50aff3(_0x3b2563);},'JtMlI':_0x1f99b6(-0x1f6,-0x1fc,-0x291,-0x1e1),'kQcqO':'#E91E63','iYHEm':_0x1f99b6(-0x20d,-0x202,-0x16a,-0x185),'jsimM':_0x344821(-0x1f3,-0xf9,-0x17d,-0xf0),'VpWhG':_0x344821(-0x103,-0x129,-0x15f,-0xe7),'bBMoN':'#E49B0F','kLOjU':'[质量]','KqImn':_0x344821(-0x1fa,-0x21f,-0x1cb,-0x20a)},_0x981933=_0x1a2965['xFsQB'][_0x1f99b6(-0x1da,-0x135,-0xc2,-0x1ae)]('|');function _0x344821(_0x573184,_0x4a1570,_0x4cd685,_0x1f115f){return _0x2385(_0x4cd685- -0x377,_0x573184);}let _0x1aede7=-0x139b+0x117e+-0x21d*-0x1;while(!![]){switch(_0x981933[_0x1aede7++]){case'0':this[_0x1f99b6(-0x152,-0x15c,-0x108,-0xd6)]=_0x1a2965[_0x1f99b6(-0x14d,-0x1c9,-0x272,-0x184)]($,'#'+_0x1ed36d);continue;case'1':this[_0x1f99b6(-0x1d7,-0x1ab,-0x1b4,-0x141)+'e']=null;continue;case'2':this[_0x1f99b6(-0x129,-0x1a9,-0x143,-0x1aa)]();continue;case'3':this['suggestion'+_0x344821(-0x8a,-0xad,-0xf6,-0x187)]=null;continue;case'4':this[_0x344821(-0x1c5,-0xa4,-0x13d,-0xb7)+_0x1f99b6(-0x1b6,-0x18f,-0xfd,-0x109)]=this[_0x344821(-0x92,-0xb4,-0x119,-0x16d)](this[_0x344821(-0x149,-0xfb,-0xf1,-0xab)+'t'][_0x1f99b6(-0x165,-0x151,-0x15f,-0xca)](this),0x1*-0x58d+-0x1089*-0x2+-0x1a59);continue;case'5':this[_0x1f99b6(-0x2a0,-0x238,-0x1e0,-0x1b6)+_0x344821(-0x1aa,-0x154,-0x103,-0xb2)+'ns']=![];continue;case'6':this[_0x344821(-0x224,-0x258,-0x1de,-0x24c)+_0x344821(-0xa2,-0xd5,-0x127,-0x135)]=null;continue;case'7':this[_0x1f99b6(-0x240,-0x20b,-0x23e,-0x1aa)+'le']=$('#'+_0x2b5ea5);continue;case'8':const _0x241280={};_0x241280[_0x1f99b6(-0x10b,-0x144,-0xf3,-0x155)]=_0x1a2965['JtMlI'],_0x241280['color']=_0x1a2965['kQcqO'];const _0x45f0f4={};_0x45f0f4[_0x344821(-0x68,-0x185,-0xf3,-0xdc)]=_0x1a2965[_0x344821(-0x1d8,-0x122,-0x190,-0x19b)],_0x45f0f4['color']=_0x1a2965[_0x344821(-0xf8,-0x13f,-0x113,-0x136)];const _0x57bfed={};_0x57bfed['prefix']=_0x1a2965[_0x344821(-0x27c,-0x203,-0x20f,-0x176)],_0x57bfed[_0x1f99b6(-0x28c,-0x201,-0x21b,-0x21a)]=_0x1a2965[_0x344821(-0x1e2,-0x141,-0x170,-0xec)];const _0x208a62={};_0x208a62['prefix']=_0x1a2965[_0x344821(-0x1f8,-0xfb,-0x156,-0x1d4)],_0x208a62['color']=_0x1f99b6(-0x15d,-0x163,-0xf4,-0x156);const _0x1755d8={};_0x1755d8[_0x344821(-0x150,-0x86,-0xf3,-0x132)]='',_0x1755d8['color']=_0x1a2965[_0x344821(-0x1c5,-0x1a1,-0x1a0,-0x130)];const _0x53d34a={};_0x53d34a['1']=_0x241280,_0x53d34a['3']=_0x45f0f4,_0x53d34a['4']=_0x57bfed,_0x53d34a['5']=_0x208a62,_0x53d34a['0']=_0x1755d8,this[_0x1f99b6(-0x216,-0x18d,-0x200,-0x16e)+'g']=_0x53d34a;continue;case'9':this[_0x344821(-0x282,-0x167,-0x1da,-0x15f)+_0x1f99b6(-0x1f1,-0x186,-0x226,-0x12c)+'ex']=-(0x1ba6+-0x556*-0x1+0x20fb*-0x1);continue;}break;}}[_0x5ab75d(0x4bc,0x4a0,0x4c0,0x537)](){const _0x598a4d={};_0x598a4d[_0x9662f6(-0xbd,-0x19,-0x94,-0x4e)]='ai-autocom'+_0x9662f6(-0xd1,-0x49,-0x9e,-0xf4)+'or';function _0x9662f6(_0x3f8247,_0x4b4706,_0x1bd386,_0x37fcef){return _0x5ab75d(_0x1bd386,_0x4b4706-0x10d,_0x4b4706- -0x46f,_0x37fcef-0x184);}_0x598a4d[_0x9662f6(0x17,0xae,0xd,0x130)]=_0x9662f6(0x159,0xc4,0x77,0xf3),_0x598a4d['jqNDd']='ai-autocom'+'plete-sugg'+_0x9662f6(-0xad,-0x76,0x21,-0xec);const _0x18e2c8=_0x598a4d;this['mirroredEl'+'e']=$(_0x155d7b(-0x13a,-0xf1,-0x1e3,-0x100))['text'](this['textarea'][_0x155d7b(-0x1c6,-0x166,-0x16c,-0x21f)]())[_0x9662f6(-0x1b,-0xe,0x72,-0x5c)](_0x18e2c8[_0x9662f6(-0x41,-0x19,-0x7f,-0x8e)]);function _0x155d7b(_0x43c770,_0x46b8d4,_0x486099,_0x119464){return _0x5ab75d(_0x46b8d4,_0x46b8d4-0xc,_0x43c770- -0x66d,_0x119464-0xf9);}this[_0x9662f6(-0x11,-0x11,-0x57,0x25)+'le'][_0x9662f6(-0xba,-0x6a,0x3e,-0x7f)](this[_0x155d7b(-0x1af,-0x11d,-0x207,-0x1f4)+'e']),this[_0x155d7b(-0x14d,-0x1ea,-0x120,-0x1f4)+_0x9662f6(0x139,0xb3,0x37,0xd7)]=$(_0x18e2c8[_0x9662f6(0x136,0xae,0x51,0xe7)])[_0x9662f6(-0x9a,-0xe,0x22,-0x23)](_0x18e2c8[_0x155d7b(-0x1cf,-0x12d,-0x1d3,-0x127)]),this[_0x9662f6(0x12,-0x11,0x89,-0x5f)+'le']['append'](this[_0x155d7b(-0x14d,-0x177,-0xb3,-0x15f)+_0x9662f6(0x58,0xb3,0xb7,0xab)]),this[_0x155d7b(-0x233,-0x2de,-0x1f3,-0x2a8)+_0x9662f6(0x55,0x82,0x81,0xcc)]=window['getCompute'+_0x9662f6(-0x24,0x5,0x16,-0x6a)](this[_0x9662f6(0x4b,0x9e,0xd9,0xea)][-0x16d8+0x65f*0x2+0xa1a]),this['setupMirro'+'redElement'](),this['setupResiz'+_0x155d7b(-0x211,-0x297,-0x27d,-0x1fd)](),this[_0x155d7b(-0x242,-0x25c,-0x261,-0x19e)+_0x9662f6(-0xba,-0x1b,-0x29,-0x6d)]();}[_0x5ab75d(0x562,0x45a,0x4f0,0x463)+'redElement'](){const _0x118df1={};_0x118df1['YGOJa']=_0x234b87(0x1b9,0x233,0x21e,0x1e3),_0x118df1[_0x234b87(0x2bb,0x2b6,0x2df,0x37c)]=_0x234b87(0x219,0x299,0x2a5,0x232),_0x118df1[_0x234b87(0x270,0x222,0x282,0x307)]=_0x234b87(0x24b,0x268,0x298,0x27b),_0x118df1['EGrlI']='fontWeight',_0x118df1[_0x5e6aa8(0xbd,0x2c,0xb2,0xb3)]='letterSpac'+'ing',_0x118df1[_0x234b87(0x1a8,0x1b7,0x220,0x2ab)]=_0x234b87(0x33c,0x211,0x294,0x2e7),_0x118df1[_0x234b87(0x2f5,0x317,0x307,0x288)]='padding',_0x118df1[_0x5e6aa8(0x48,-0x5a,-0x3d,0xe3)]=_0x5e6aa8(0xb4,0x11c,0x15b,0x1f)+'tion',_0x118df1[_0x234b87(0x19b,0x227,0x228,0x21a)]=_0x5e6aa8(0xd1,0x7d,0x3e,0x30),_0x118df1['YeoaD']=_0x234b87(0x204,0x1ba,0x255,0x268)+_0x234b87(0x32d,0x1f2,0x299,0x2bb),_0x118df1[_0x234b87(0x2cc,0x346,0x2e1,0x2ef)]=_0x5e6aa8(0xa0,0xad,0x3c,-0xa),_0x118df1[_0x234b87(0x28d,0x186,0x22d,0x219)]='wordSpacin'+'g',_0x118df1[_0x234b87(0x25f,0x218,0x232,0x1f8)]=_0x5e6aa8(0xba,0x11b,0x128,0x86);function _0x5e6aa8(_0x26be0f,_0x178302,_0x4816c6,_0x3a76f8){return _0x5cde25(_0x26be0f- -0x2a3,_0x3a76f8,_0x4816c6-0x1cf,_0x3a76f8-0x150);}_0x118df1[_0x5e6aa8(0x77,0x93,0x14,0x40)]=_0x234b87(0x29f,0x1c5,0x23b,0x24e)+'r';function _0x234b87(_0x1403d6,_0x417ed9,_0x3168eb,_0x11093b){return _0x5ab75d(_0x11093b,_0x417ed9-0x39,_0x3168eb- -0x1de,_0x11093b-0x6b);}_0x118df1[_0x234b87(0x32c,0x302,0x31e,0x338)]=_0x5e6aa8(0x171,0x1fa,0x20b,0x13d)+'t';const _0xf2ddaf=_0x118df1;[_0xf2ddaf[_0x234b87(0x201,0x22e,0x26a,0x2d3)],_0x234b87(0x2e9,0x308,0x341,0x3a3),_0xf2ddaf[_0x234b87(0x350,0x306,0x2df,0x24b)],_0xf2ddaf['mgyOh'],_0xf2ddaf[_0x5e6aa8(0x12e,0x89,0x154,0x1c1)],_0xf2ddaf[_0x234b87(0x331,0x30a,0x288,0x1eb)],_0xf2ddaf[_0x234b87(0x224,0x22c,0x220,0x228)],_0xf2ddaf[_0x5e6aa8(0x13c,0x1db,0x155,0xd4)],_0xf2ddaf['ZAqiN'],_0xf2ddaf[_0x234b87(0x1e3,0x2bb,0x228,0x2af)],_0xf2ddaf[_0x234b87(0x2d1,0x3a0,0x329,0x386)],_0xf2ddaf[_0x5e6aa8(0x116,0x9e,0x1ad,0x1bb)],_0xf2ddaf[_0x5e6aa8(0x62,0x6e,0x8c,0x3)],_0xf2ddaf[_0x5e6aa8(0x67,0x3b,0xe5,-0x38)]][_0x5e6aa8(0x51,0xd5,-0x46,0xe7)](_0x5cf496=>{function _0x526885(_0x332966,_0x446c9d,_0x33edcb,_0x1b708a){return _0x234b87(_0x332966-0x182,_0x446c9d-0x188,_0x446c9d- -0x274,_0x1b708a);}function _0x58c7f6(_0x1a560e,_0x3a6f07,_0x3d7f83,_0x43c3f1){return _0x234b87(_0x1a560e-0x159,_0x3a6f07-0x47,_0x43c3f1- -0x22,_0x1a560e);}this[_0x58c7f6(0x2a6,0x332,0x230,0x2be)+'e'][_0x58c7f6(0x2f0,0x321,0x2c0,0x2bb)](_0x5cf496,this[_0x58c7f6(0x228,0x237,0x242,0x23a)+_0x58c7f6(0x377,0x27a,0x2f6,0x2f1)][_0x5cf496]);}),this[_0x5e6aa8(0x115,0x15a,0x10a,0xdb)+'e'][_0x234b87(0x33b,0x2cf,0x2dd,0x2d3)](_0xf2ddaf[_0x234b87(0x232,0x1b8,0x242,0x21e)],_0xf2ddaf[_0x5e6aa8(0x153,0x1b0,0xf3,0x1da)]);}[_0x5cde25(0x3c6,0x3a8,0x3e7,0x348)+'eObserver'](){function _0x4ca3cd(_0x52a4b3,_0x44b522,_0x1511a9,_0x1ab9ff){return _0x5ab75d(_0x1ab9ff,_0x44b522-0x14f,_0x1511a9-0xf8,_0x1ab9ff-0x187);}const _0x55e7c5={'MpVuo':function(_0x3837a0,_0x4169fd){return _0x3837a0>=_0x4169fd;},'uqeVM':function(_0x341cb8,_0x3c07e6){return _0x341cb8/_0x3c07e6;},'huLTP':function(_0x177b19,_0x2efbd8){return _0x177b19===_0x2efbd8;},'tVIdv':'TDxwJ','tLkLO':function(_0xb69faf,_0x25ea6a){return _0xb69faf+_0x25ea6a;},'bYWhw':function(_0x40f269,_0x416bc9){return _0x40f269*_0x416bc9;},'jGhrH':function(_0x442ddd,_0x16e16c){return _0x442ddd(_0x16e16c);}},_0x1b369c=_0x82b120=>_0x82b120[_0x4ca3cd(0x60a,0x639,0x5aa,0x655)]('px')?parseInt(_0x82b120[_0x38aa01(0x372,0x331,0x3fe,0x320)](-0x1e3*0x7+-0x3*-0xaab+-0x191*0xc,-(0x1e13*0x1+-0x1*0x1a3b+-0x3d6)),0x1c6*0x5+0x101b+-0x1eb*0xd):0x155c+0x303*-0x9+0x5bf,_0x333794=_0x55e7c5[_0x38aa01(0x2a3,0x2d8,0x28f,0x30c)](_0x1b369c,this[_0x4ca3cd(0x4bf,0x504,0x532,0x52e)+'yles'][_0x4ca3cd(0x4d2,0x483,0x4e0,0x570)+'h']);function _0x38aa01(_0x4863d5,_0x4e2155,_0x54f2a7,_0x1c7b3b){return _0x5cde25(_0x4863d5- -0x98,_0x4e2155,_0x54f2a7-0x130,_0x1c7b3b-0x126);}const _0x3dba3e=new ResizeObserver(()=>{function _0x5670a6(_0x500443,_0x171e61,_0x27b81e,_0x1dfce5){return _0x4ca3cd(_0x500443-0x93,_0x171e61-0xa0,_0x171e61- -0x58d,_0x27b81e);}function _0x49f9aa(_0x71ce6b,_0x3503d4,_0x4f3682,_0x4d9ebd){return _0x4ca3cd(_0x71ce6b-0x11d,_0x3503d4-0x2e,_0x4d9ebd- -0x705,_0x4f3682);}if(_0x55e7c5[_0x49f9aa(-0x180,-0x185,-0x1ff,-0x1db)](_0x55e7c5[_0x49f9aa(-0x235,-0x1fe,-0x2aa,-0x218)],_0x55e7c5[_0x5670a6(0x4,-0xa0,-0xae,-0x10f)]))this[_0x5670a6(0x70,0x29,0x53,-0x41)+'e']['width'](_0x55e7c5['tLkLO'](this[_0x5670a6(0xcd,0x78,0x6c,0x66)]['width'](),_0x55e7c5[_0x5670a6(0xe8,0x59,0x1,0xd5)](-0x5db+0x7c7+-0x1ea,_0x333794))),this[_0x49f9aa(-0x10d,-0xe6,-0x1ec,-0x14f)+'e'][_0x5670a6(0xbd,0x61,-0x36,0x5)](_0x55e7c5[_0x5670a6(-0x110,-0x95,-0xc0,0x6)](this[_0x49f9aa(-0x92,-0xbe,-0x11d,-0x100)][_0x5670a6(0xf5,0x61,-0x8,0x9c)](),_0x55e7c5['bYWhw'](0x23f*0x9+0x1*0x2659+0x5*-0xbb6,_0x333794)));else{if(_0x55e7c5[_0x5670a6(-0x6,-0x3b,-0x12,-0x45)](_0x20b046,-0x55*-0xe+-0x2210+0x10a9*0x2))return _0x55e7c5['uqeVM'](_0x213802,-0x2*-0xf0b+0x75*0x40+-0x376e)[_0x5670a6(0x3c,-0x43,0x4b,0x2)](0x263e+0x965+-0x2fa2)+'K';return _0x267f0c[_0x5670a6(0x4d,-0x3,0x47,-0x3)]();}});_0x3dba3e[_0x38aa01(0x337,0x36c,0x33e,0x357)](this['textarea'][0x1a0c+0x12bd+-0x2cc9]);}[_0x5ab75d(0x3de,0x3ef,0x42b,0x3c0)+'Listeners'](){const _0x2c725c={'xkfar':function(_0x3e4b0c,_0x214811){return _0x3e4b0c===_0x214811;},'lhuSH':_0x22bb4d(0xcd,0x75,0x90,0x4e),'HqHwP':function(_0x140396,_0x4c3a0c,_0x1016c8){return _0x140396(_0x4c3a0c,_0x1016c8);},'ReuMM':'scroll','EhYCv':'input','NOCWW':_0x22bb4d(0x5b,-0x10,0x25,0x94),'VxLlr':'mouseenter','aMDAl':'mouseleave','QkDut':'keydown'};this[_0x4a7522(-0x95,-0x105,-0xc2,-0xfb)]['on'](_0x2c725c['ReuMM'],()=>{function _0x5b930b(_0x2bced2,_0x2e0ec3,_0x1c1d8c,_0xa40631){return _0x4a7522(_0x2bced2,_0x2e0ec3-0x120,_0x1c1d8c-0xb6,_0xa40631-0x699);}function _0xa6ac6b(_0x238312,_0x9edbf,_0x13e593,_0x2ea27c){return _0x4a7522(_0x9edbf,_0x9edbf-0x193,_0x13e593-0x167,_0x13e593-0x1f2);}if(_0x2c725c[_0x5b930b(0x445,0x52d,0x513,0x490)](_0x2c725c[_0x5b930b(0x61a,0x527,0x57b,0x5b2)],_0x2c725c[_0x5b930b(0x5c5,0x648,0x5cf,0x5b2)]))this[_0x5b930b(0x50e,0x58d,0x4cc,0x54f)+'e'][_0xa6ac6b(0xe1,0x93,0x95,-0x16)](this[_0x5b930b(0x4f6,0x548,0x50c,0x59e)][_0x5b930b(0x4f9,0x536,0x574,0x53c)]());else{if(_0x22ab07){const _0x53ce9f=_0x1b0354[_0x5b930b(0x57b,0x52f,0x51c,0x513)](_0x433c64,arguments);return _0x34bf83=null,_0x53ce9f;}}});function _0x4a7522(_0xedd71e,_0x585977,_0x393635,_0x3f22cc){return _0x5cde25(_0x3f22cc- -0x502,_0xedd71e,_0x393635-0x2c,_0x3f22cc-0x1a1);}this[_0x22bb4d(0x124,0x85,0x9d,0x1b0)]['on'](_0x2c725c['EhYCv'],this[_0x4a7522(-0x155,-0x9a,-0x1bc,-0x12d)+_0x4a7522(-0x103,-0x8c,-0x146,-0x12e)]),this[_0x22bb4d(0x124,0x7b,0xec,0x181)]['on'](_0x2c725c[_0x22bb4d(0x10c,0x169,0x161,0x105)],()=>{function _0x5882d7(_0x5d82f3,_0x4d2458,_0x519cfc,_0xa19048){return _0x4a7522(_0x5d82f3,_0x4d2458-0x1d3,_0x519cfc-0x1bf,_0x4d2458-0x53b);}_0x2c725c[_0x5882d7(0x2c1,0x363,0x2b9,0x3c2)](setTimeout,()=>{function _0x466f61(_0x577e2c,_0x2cf977,_0x17f377,_0x635257){return _0x5882d7(_0x635257,_0x577e2c- -0x3eb,_0x17f377-0x3d,_0x635257-0x23);}function _0x1fd441(_0x272321,_0x15c441,_0x2a4ffd,_0x4fbb69){return _0x5882d7(_0x15c441,_0x272321- -0x4a7,_0x2a4ffd-0x71,_0x4fbb69-0xe9);}!this[_0x466f61(-0x87,-0x112,-0x51,-0xa3)+_0x1fd441(-0x5f,-0x5b,-0xd6,0x9)+'ns']&&this[_0x1fd441(-0x129,-0x9b,-0x1d4,-0xe2)+_0x1fd441(-0xe1,-0x7e,-0x82,-0x13d)]();},-0x15*0x1cd+-0x11b7*0x2+0x49a3);});function _0x22bb4d(_0x1901cd,_0x33d67a,_0x1d7ab3,_0x1dff00){return _0x5cde25(_0x1901cd- -0x2e3,_0x1dff00,_0x1d7ab3-0x61,_0x1dff00-0x31);}this[_0x4a7522(-0x5c,-0xce,-0x178,-0xe8)+'sEle']['on'](_0x2c725c[_0x4a7522(-0x1ad,-0x151,-0x14a,-0x179)],()=>{function _0x4bf4fa(_0x22c9c,_0x41be88,_0x547eb8,_0x4fcf88){return _0x4a7522(_0x22c9c,_0x41be88-0x1c9,_0x547eb8-0xa8,_0x41be88-0x56c);}this['isMouseOve'+_0x4bf4fa(0x524,0x479,0x3f9,0x4a6)+'ns']=!![];})['on'](_0x2c725c[_0x22bb4d(0x118,0x191,0x149,0x188)],()=>{function _0x37bf7e(_0x40228c,_0x12c73c,_0x1192ed,_0xb7f8b9){return _0x4a7522(_0x12c73c,_0x12c73c-0x74,_0x1192ed-0xc1,_0x1192ed- -0x4e);}this['isMouseOve'+_0x37bf7e(-0x1ad,-0x101,-0x141,-0x11a)+'ns']=![];}),this[_0x22bb4d(0x124,0x196,0xc0,0xfb)]['on'](_0x2c725c['QkDut'],this['handleKeyd'+_0x22bb4d(0x50,-0x50,0x4d,0x7e)][_0x4a7522(-0x134,-0x10a,-0x4f,-0xf0)](this));}[_0x5ab75d(0x511,0x4d1,0x4e6,0x4aa)+_0x5cde25(0x378,0x3a6,0x352,0x2f2)+'rd'](){const _0x34086c={};_0x34086c[_0x11a70a(0x43f,0x50c,0x4da,0x446)]=function(_0x5ca257,_0x1af45b){return _0x5ca257>=_0x1af45b;};const _0x14a6d5=_0x34086c;function _0x24c13a(_0x10a037,_0x306d35,_0x2d9264,_0x586a98){return _0x5cde25(_0x10a037-0x38,_0x2d9264,_0x2d9264-0xfb,_0x586a98-0x181);}const _0x23be13=this[_0x24c13a(0x43f,0x3bd,0x4eb,0x3fd)]['val'](),_0xad876e=this[_0x11a70a(0x538,0x480,0x4df,0x4e5)][0x1924+0x1619*0x1+0x1d*-0x1a1][_0x11a70a(0x43a,0x3e1,0x3c8,0x326)+_0x11a70a(0x45b,0x540,0x4e1,0x45d)];function _0x11a70a(_0x84ea47,_0x429917,_0x35ddc6,_0x4d1685){return _0x5cde25(_0x35ddc6-0xd8,_0x84ea47,_0x35ddc6-0x14c,_0x4d1685-0x1cd);}let _0x487f59=_0xad876e-(0x9b*0x10+-0xc4d+0x86*0x5);while(_0x14a6d5[_0x24c13a(0x43a,0x3ed,0x3a7,0x442)](_0x487f59,0x16*-0xb+0x21f0+-0x20fe)&&!/\s/[_0x11a70a(0x3ab,0x42a,0x429,0x41b)](_0x23be13[_0x487f59])){_0x487f59--;}return _0x487f59;}['replaceCur'+_0x5ab75d(0x3bb,0x4be,0x436,0x48c)](_0x10a61b){const _0x12773e={};_0x12773e[_0x5b1af8(0x11d,0x18a,0x104,0x187)]=function(_0x4f7285,_0x5e09b6){return _0x4f7285+_0x5e09b6;},_0x12773e[_0x2283a4(0x315,0x2ff,0x2f5,0x259)]=function(_0x5cc06a,_0x1ffe64){return _0x5cc06a+_0x1ffe64;};const _0x5433f7=_0x12773e,_0x41a5bb=this[_0x2283a4(0x364,0x2dc,0x353,0x2f6)][_0x5b1af8(0x157,0x240,0x1cc,0x1a5)](),_0x68ccc7=this[_0x2283a4(0x235,0x2dc,0x33e,0x386)][-0x35f*-0x1+-0x1642+0x12e3][_0x2283a4(0x269,0x1c5,0x22a,0x26a)+'tart'],_0x28c38a=this[_0x5b1af8(0x27c,0x1fa,0x1e7,0x1e4)+_0x2283a4(0x283,0x24d,0x1a2,0x1b6)+'rd'](),_0x512577=_0x5433f7[_0x5b1af8(0x177,0xf4,0x1bc,0x187)](_0x5433f7[_0x5b1af8(0x1b0,0x166,0xfd,0x187)](_0x41a5bb['substring'](0xe24*0x1+-0x1*0x2227+-0x2f*-0x6d,_0x28c38a+(0x6*-0x16e+0x13d5+-0x78*0x18)),_0x10a61b),_0x41a5bb[_0x5b1af8(0x121,0x160,0x183,0x18b)](_0x68ccc7));function _0x5b1af8(_0x2dd97c,_0x4a508a,_0x349533,_0x24a6b9){return _0x5ab75d(_0x2dd97c,_0x4a508a-0x196,_0x24a6b9- -0x302,_0x24a6b9-0x1b6);}this[_0x2283a4(0x363,0x2dc,0x2c1,0x377)][_0x5b1af8(0x218,0x11b,0x1c1,0x1a5)](_0x512577);function _0x2283a4(_0x15d66b,_0x2f65a4,_0x5d5bfd,_0x50eba8){return _0x5cde25(_0x2f65a4- -0x12b,_0x50eba8,_0x5d5bfd-0x173,_0x50eba8-0xac);}this[_0x5b1af8(0x240,0x228,0x19f,0x20b)]['focus'](),this[_0x5b1af8(0x29a,0x169,0x2ac,0x20b)][0x1a90+-0x7a7+-0x67*0x2f][_0x2283a4(0x13c,0x1c5,0x185,0x246)+_0x5b1af8(0x226,0x187,0x1da,0x20d)]=this[_0x5b1af8(0x273,0x241,0x1bb,0x20b)][0x24f3+-0x4*0x42d+0x49*-0x47][_0x5b1af8(0x14d,0x147,0x1a3,0x1a1)+'nd']=_0x5433f7[_0x2283a4(0x322,0x2ff,0x3a3,0x353)](_0x5433f7['uESzc'](_0x28c38a,0x2*0x6c0+0x1*0x259f+0x6*-0x885),_0x10a61b['length']);}[_0x5ab75d(0x49a,0x3b7,0x44b,0x404)+_0x5cde25(0x38d,0x425,0x434,0x375)](){function _0x55ca79(_0x584be5,_0x19d5a1,_0x19997b,_0x1085d0){return _0x5cde25(_0x19997b- -0x579,_0x584be5,_0x19997b-0x133,_0x1085d0-0x18b);}this['suggestion'+_0x55ca79(-0x12f,-0xe3,-0x15d,-0x207)][_0x55ca79(-0x2c4,-0x27f,-0x26c,-0x2a2)]();function _0x21c6f3(_0xa6cebf,_0x4be635,_0x53a904,_0x2ba13c){return _0x5cde25(_0x53a904-0x186,_0x4be635,_0x53a904-0x147,_0x2ba13c-0x3);}this[_0x55ca79(-0x2c2,-0x26b,-0x241,-0x1ad)+_0x55ca79(-0x1ea,-0x1c4,-0x19c,-0x105)+'ex']=-(-0xf48+0x20d5+-0x118c*0x1);}[_0x5ab75d(0x417,0x366,0x411,0x374)+_0x5ab75d(0x510,0x484,0x4d0,0x425)](){const _0x53fa40={'PGIXB':function(_0x513cb7,_0x1fb2f0){return _0x513cb7-_0x1fb2f0;},'CBsCI':_0x2ac3d2(0x2e6,0x216,0x299,0x2b1),'VurID':_0x7182f6(0x35e,0x3f3,0x3eb,0x36c),'SrRVB':function(_0x3fb765,_0x5ccd7a){return _0x3fb765(_0x5ccd7a);},'yoKDZ':function(_0x1c5ae5,_0x48b029){return _0x1c5ae5(_0x48b029);},'ZyOEh':function(_0x2e371a,_0x73422){return _0x2e371a+_0x73422;},'swHZn':function(_0x3fd41a,_0x4f4d38){return _0x3fd41a+_0x4f4d38;}},_0x4a7bf4=this[_0x7182f6(0x458,0x487,0x423,0x4a7)][0x265c+0xca7+0x3303*-0x1]['getBoundin'+'gClientRec'+'t']();function _0x2ac3d2(_0x33594a,_0x5c9fd0,_0x213583,_0x6ce097){return _0x5cde25(_0x213583- -0xfd,_0x33594a,_0x213583-0xf,_0x6ce097-0xc4);}const _0x1db6aa=this['textarea'][0x848+0x1*-0x1d62+0x151a]['selectionS'+_0x7182f6(0x4b9,0x489,0x4ef,0x48b)],_0x5881ce=this['textarea'][_0x7182f6(0x3f1,0x421,0x41c,0x376)]()[_0x7182f6(0x47a,0x407,0x413,0x376)](-0x406+-0x126+0x52c,_0x1db6aa),_0xaf1410=_0x5881ce[_0x2ac3d2(0x361,0x380,0x331,0x3da)]('\x0a'),_0x4689e0=_0x53fa40['PGIXB'](_0xaf1410['length'],-0x166f+-0x94b+-0x1fbb*-0x1),_0x11f9ca=_0xaf1410[_0x4689e0],_0x3053c4={};_0x3053c4[_0x2ac3d2(0x322,0x243,0x295,0x30d)]=this['textareaSt'+_0x2ac3d2(0x246,0x389,0x2ee,0x30e)][_0x7182f6(0x440,0x412,0x420,0x3db)],_0x3053c4['whiteSpace']=_0x7182f6(0x31c,0x3c4,0x3e4,0x3f9);const _0x26a494=$(_0x53fa40[_0x2ac3d2(0x338,0x271,0x2cf,0x248)])[_0x2ac3d2(0x240,0x2fc,0x2b8,0x34a)](_0x3053c4)['text'](_0x11f9ca);$(_0x53fa40[_0x7182f6(0x368,0x413,0x402,0x475)])[_0x2ac3d2(0x302,0x2be,0x27e,0x318)](_0x26a494);const _0x351aa5=_0x26a494[_0x2ac3d2(0x2ba,0x2e5,0x2c8,0x29f)]();_0x26a494[_0x7182f6(0x474,0x3d3,0x365,0x3f8)]();function _0x7182f6(_0x53f041,_0x306535,_0x47e8df,_0x3c3387){return _0x5ab75d(_0x3c3387,_0x306535-0x1b8,_0x306535- -0x86,_0x3c3387-0xe3);}const _0x557e6d=_0x53fa40[_0x2ac3d2(0x1e4,0x2c1,0x224,0x1d5)](parseFloat,this['textareaSt'+_0x7182f6(0x4e1,0x46b,0x432,0x44d)][_0x7182f6(0x36f,0x3ec,0x379,0x34a)]),_0x20c9bd=this[_0x2ac3d2(0x2fa,0x293,0x30a,0x391)]['scrollTop'](),_0x585af4=_0x53fa40[_0x7182f6(0x44f,0x45a,0x4da,0x4ae)](parseFloat,this[_0x7182f6(0x451,0x3b4,0x441,0x40b)+_0x7182f6(0x3cc,0x46b,0x441,0x4bf)]['paddingTop']),_0xf285fb=_0x53fa40[_0x7182f6(0x44f,0x45a,0x48a,0x401)](parseFloat,this[_0x7182f6(0x40b,0x3b4,0x30d,0x459)+_0x7182f6(0x4d4,0x46b,0x416,0x432)]['borderTopW'+_0x2ac3d2(0x244,0x273,0x22b,0x2cf)]),_0x25b8b5=_0x53fa40[_0x2ac3d2(0x1e0,0x1e6,0x21e,0x2a7)](_0x53fa40[_0x7182f6(0x3d7,0x392,0x363,0x393)](_0x53fa40[_0x7182f6(0x4a6,0x488,0x41a,0x4f8)](_0x4689e0*_0x557e6d,_0x20c9bd),_0x585af4),_0xf285fb),_0x9ab528={};return _0x9ab528['x']=_0x351aa5,_0x9ab528['y']=_0x25b8b5,_0x9ab528;}[_0x5cde25(0x318,0x30e,0x3a2,0x3a5)+_0x5ab75d(0x57b,0x54c,0x4d4,0x47d)](_0x2b5245){const _0x2f0fd2={};function _0x308819(_0x516d1a,_0x499ac2,_0x37b798,_0x494f55){return _0x5ab75d(_0x499ac2,_0x499ac2-0x1c4,_0x494f55- -0x583,_0x494f55-0x2c);}_0x2f0fd2[_0x25a131(-0x129,-0xfc,-0x83,0x3)]='suggestion'+_0x308819(-0x11c,-0x151,-0x1d7,-0x154),_0x2f0fd2[_0x308819(-0xb4,-0x4d,-0x71,-0xd7)]=_0x25a131(-0x15e,-0x7e,-0x10e,-0x120),_0x2f0fd2['MrbBf']=_0x308819(-0x121,-0x100,-0xa5,-0x8f);const _0x13d118=_0x2f0fd2,_0x428198={};_0x428198[_0x25a131(-0x20,-0x7e,-0xc2,-0xbc)]=_0x2b5245;function _0x25a131(_0x41de32,_0x2f798b,_0x590f1a,_0x228945){return _0x5ab75d(_0x228945,_0x2f798b-0x92,_0x590f1a- -0x531,_0x228945-0xdd);}const _0x3fff4b={};return _0x3fff4b[_0x25a131(-0xcd,-0xf5,-0xe3,-0x74)]=_0x13d118[_0x25a131(-0xd2,-0x112,-0x83,0x8)],_0x3fff4b[_0x25a131(-0x99,-0x7b,-0xc6,-0x9f)]=_0x13d118['NJFbi'],_0x3fff4b[_0x308819(-0xbd,-0xf8,-0xda,-0x6c)]=_0x428198,_0x3fff4b[_0x25a131(-0x11d,-0xa0,-0x139,-0x1b1)]=_0x13d118[_0x308819(-0x12e,-0x12e,-0x3e,-0xbd)],$[_0x25a131(-0x1a3,-0xeb,-0x14c,-0x135)](_0x3fff4b);}['calculateS'+_0x5ab75d(0x535,0x511,0x497,0x47e)+_0x5ab75d(0x505,0x480,0x49a,0x52b)](_0x417ca0){const _0x3c6ea4={'cLNQl':function(_0x4f806a,_0x150269){return _0x4f806a!==_0x150269;},'uXPOi':_0x3efec3(0x1c4,0x22c,0x1ab,0x293),'VokRX':function(_0x412b6d,_0x38ba5e){return _0x412b6d(_0x38ba5e);},'ywNIL':_0x1acf1a(0x2c4,0x33d,0x365,0x3c5),'qEoLC':_0x1acf1a(0x1f7,0x20d,0x16d,0x28a),'mwsYA':'nowrap','ElpHe':_0x3efec3(0x275,0x21e,0x177,0x216),'BbhSL':function(_0x2a0d08,_0x543434){return _0x2a0d08+_0x543434;},'aUqzz':function(_0x5aaeaa,_0x259d61){return _0x5aaeaa*_0x259d61;}},_0x782c38=_0x3c6ea4['VokRX']($,_0x3c6ea4[_0x3efec3(0x238,0x1dc,0x155,0x1b8)])[_0x3efec3(0x207,0x260,0x26a,0x2cb)]({'position':_0x3efec3(0x17d,0x20a,0x25e,0x295),'visibility':_0x3c6ea4[_0x3efec3(0xef,0x18c,0x18f,0x19c)],'whiteSpace':_0x3c6ea4[_0x3efec3(0x333,0x2cd,0x311,0x2c2)],'font':this['textareaSt'+_0x3efec3(0x1f8,0x296,0x265,0x2c0)][_0x1acf1a(0x28f,0x2a2,0x241,0x262)]})['appendTo'](_0x3c6ea4['ElpHe']),_0xd5a0a6=Math[_0x1acf1a(0x25c,0x1f7,0x23f,0x17b)](..._0x417ca0[_0x1acf1a(0x347,0x328,0x2a9,0x34e)](_0x533e66=>{function _0xc5d23d(_0x1d07a8,_0x436065,_0x2107a6,_0x201600){return _0x1acf1a(_0x1d07a8-0x15c,_0x436065- -0x1a1,_0x2107a6-0x81,_0x201600);}function _0x518acc(_0x586a5c,_0x2db571,_0x79ef85,_0x24c97f){return _0x1acf1a(_0x586a5c-0x1b0,_0x79ef85- -0xe6,_0x79ef85-0xf,_0x24c97f);}if(_0x3c6ea4['cLNQl'](_0x3c6ea4[_0x518acc(0x145,0x165,0x1ee,0x231)],_0x3c6ea4['uXPOi']))this[_0x518acc(0x1a8,0x18e,0x155,0xed)+_0xc5d23d(0x103,0x17e,0x1c3,0x1c0)+'ns']=!![];else{const _0x4f68c8=this['getTypeInf'+'o'](_0x533e66[_0x518acc(0x1a7,0x174,0x202,0x18d)]),_0x5d3eb4=_0x4f68c8['prefix'];return _0x782c38[_0xc5d23d(0xb7,0xe6,0x156,0x75)](_0x5d3eb4+'\x20'+_0x533e66[_0x518acc(0x2b0,0x260,0x20f,0x1a6)]+'\x20'+_0x533e66['weight']),_0x782c38['width']();}}));function _0x1acf1a(_0x1d659c,_0x23730e,_0x3728af,_0x4fffe4){return _0x5ab75d(_0x4fffe4,_0x23730e-0x113,_0x23730e- -0x1f6,_0x4fffe4-0x10c);}_0x782c38[_0x3efec3(0x229,0x1fe,0x1ed,0x23c)]();function _0x3efec3(_0x307418,_0x3a5b6b,_0x268d3c,_0x59f7a6){return _0x5cde25(_0x3a5b6b- -0x155,_0x307418,_0x268d3c-0x29,_0x59f7a6-0x1a6);}return Math['min'](Math['max'](_0x3c6ea4['BbhSL'](_0xd5a0a6,0xf9a+0xc5*-0x1f+0x869*0x1),(-0x16de+-0x1053+0x29*0xf5)*(-0x26e+0x16a1+-0x1f*0xa6)),_0x3c6ea4[_0x3efec3(0x26e,0x2be,0x2aa,0x29b)](0x8f+0x1827+-0x1884,0x4a*0x46+-0x1db7+0x994));}[_0x5cde25(0x40d,0x471,0x402,0x379)+'o'](_0x4ae1eb){function _0x453de8(_0x452c43,_0x33daf2,_0x46fdf2,_0x68235c){return _0x5cde25(_0x68235c- -0x36c,_0x33daf2,_0x46fdf2-0x195,_0x68235c-0x4);}function _0x2648eb(_0x26038b,_0x494547,_0x20a59a,_0x7d2ef1){return _0x5cde25(_0x26038b- -0x166,_0x7d2ef1,_0x20a59a-0xbf,_0x7d2ef1-0x5a);}return this[_0x453de8(0x72,0x68,0xe,0x6a)+'g'][_0x4ae1eb]||this[_0x2648eb(0x270,0x25f,0x30e,0x28b)+'g'][_0x2648eb(0x2c3,0x369,0x2f6,0x27e)];}[_0x5cde25(0x421,0x46d,0x4b7,0x45f)+'t'](){const _0x182369={'cJIJa':function(_0x199203,_0x5e0297){return _0x199203/_0x5e0297;},'uqtid':function(_0x5e479c,_0x51787c){return _0x5e479c+_0x51787c;},'wMwLq':function(_0x2efeb8,_0x2fdb15){return _0x2efeb8===_0x2fdb15;},'FXrcI':_0x72f4e(0x425,0x479,0x45b,0x3f7),'LRkWh':_0x40da8a(0xf9,0x8b,0xa1,0x116)+'plete-sugg'+'estion','DUaKp':function(_0xb4d311,_0x191e2b){return _0xb4d311+_0x191e2b;},'sqoXr':_0x40da8a(0x140,0x147,0x14a,0xb9),'KTMse':_0x40da8a(0xb7,0x2c,0x121,0x17),'jNNZc':function(_0x44b463,_0x46ef9f){return _0x44b463!==_0x46ef9f;},'heixP':'uxdPO','zsrLB':function(_0x36c5a5,_0x86941){return _0x36c5a5(_0x86941);},'LAeGB':_0x40da8a(0xf1,0xad,0x18a,0x14d),'hNZln':_0x72f4e(0x353,0x329,0x3f4,0x336),'xXZVn':function(_0x56e0f1,_0x4e8a8b){return _0x56e0f1(_0x4e8a8b);},'bJoBt':function(_0x568178,_0x5a7b05){return _0x568178+_0x5a7b05;},'pkyJt':function(_0x5a2f13,_0x37ac30){return _0x5a2f13-_0x37ac30;},'KuIkb':function(_0x1bb597,_0x317fc1){return _0x1bb597+_0x317fc1;},'qpdGO':_0x40da8a(0xc1,0x134,0x26,0x57)+'te','PXdzH':'fVxUw','JLaRS':function(_0x422804,_0x3c0e9e){return _0x422804>_0x3c0e9e;}},_0xe30205=document[_0x40da8a(0x167,0x101,0xfe,0x1eb)+_0x40da8a(0x123,0x170,0x1ad,0x118)](_0x182369['qpdGO']);if(!_0xe30205['checked']){if(_0x182369[_0x40da8a(0x124,0xc3,0x162,0x164)](_0x40da8a(0x14c,0xbc,0x1b8,0xcc),_0x182369['PXdzH']))return;else return;}const _0x23dcc=this[_0x72f4e(0x481,0x4a6,0x4bf,0x480)][_0x72f4e(0x41b,0x392,0x3bb,0x38d)](),_0x43142d=this[_0x72f4e(0x481,0x511,0x475,0x4be)][-0xa*0x4e+0x2584+-0x1*0x2278][_0x72f4e(0x36a,0x301,0x300,0x386)+_0x40da8a(0x164,0x141,0x116,0x108)],_0x1778e1=this[_0x40da8a(0x13b,0x149,0x112,0x1cb)+_0x72f4e(0x3f2,0x3ad,0x493,0x349)+'rd'](),_0x4636cc=_0x23dcc[_0x72f4e(0x401,0x4a6,0x3a6,0x44f)](_0x182369[_0x40da8a(0x148,0x1e5,0xd3,0x154)](_0x1778e1,-0xf0d+0xdb*-0x29+0x3221),_0x43142d);function _0x40da8a(_0x4569eb,_0x34b22e,_0x1161ed,_0x2098e6){return _0x5ab75d(_0x34b22e,_0x34b22e-0x1f2,_0x4569eb- -0x3ab,_0x2098e6-0xce);}function _0x72f4e(_0x1c33a8,_0x492550,_0x3c2e9e,_0x238143){return _0x5cde25(_0x1c33a8-0x7a,_0x238143,_0x3c2e9e-0x3e,_0x238143-0x31);}if(_0x182369[_0x40da8a(0x124,0xb7,0x9f,0xb2)](_0x4636cc,'')){this[_0x40da8a(0xa0,0xf8,0xe8,-0xb)+_0x40da8a(0xe8,0x173,0x8e,0x68)]();return;}if(_0x182369[_0x40da8a(0x124,0x104,0x12a,0xbc)](_0x4636cc,'')||_0x4636cc['includes'](',')||_0x182369['JLaRS'](_0x4636cc[_0x72f4e(0x43b,0x45f,0x3dc,0x3c0)],0x12e1+-0x450*-0x1+-0x171d)){this[_0x40da8a(0xa0,0x0,0xbc,0xe8)+_0x72f4e(0x407,0x374,0x397,0x394)]();return;}this[_0x72f4e(0x392,0x3c3,0x37e,0x38f)+_0x72f4e(0x448,0x44b,0x42d,0x3d2)](_0x4636cc)[_0x72f4e(0x3cf,0x377,0x334,0x398)](_0x1b81bd=>{const _0x1a3428={'rtXTW':function(_0x2fc379,_0x2e3eeb){function _0xd45afe(_0x334720,_0x5ee040,_0x57ede5,_0x5c7d56){return _0x2385(_0x57ede5-0x2f5,_0x334720);}return _0x182369[_0xd45afe(0x5c6,0x601,0x57d,0x5d9)](_0x2fc379,_0x2e3eeb);},'UagZJ':function(_0x6cec51,_0x5a144d){return _0x6cec51*_0x5a144d;},'hhAey':function(_0x10368e,_0x104661){function _0x52bbc4(_0x49933a,_0x425949,_0x5f3e49,_0x5b6e3e){return _0x2385(_0x49933a- -0x2df,_0x5f3e49);}return _0x182369[_0x52bbc4(-0x163,-0x1ff,-0xf6,-0x1b2)](_0x10368e,_0x104661);},'yrMGK':function(_0x5f8818,_0x40ed73){function _0x2830a7(_0x18b687,_0xc50c02,_0x4fce54,_0x297c47){return _0x2385(_0x4fce54-0x1c5,_0x18b687);}return _0x182369[_0x2830a7(0x367,0x395,0x3f3,0x3de)](_0x5f8818,_0x40ed73);},'ceATk':_0x182369['FXrcI'],'CbrbR':_0x57ce80(0x46e,0x4a3,0x49e,0x4f0),'NlHPn':function(_0x12e647,_0x520717){return _0x12e647(_0x520717);},'hMGId':_0x182369['LRkWh'],'HcIKe':function(_0x266c1b,_0xe793d1){function _0x1a5d85(_0x2282a0,_0x251b10,_0x1543e8,_0x507ea4){return _0x57ce80(_0x2282a0-0x1b1,_0x1543e8- -0x184,_0x251b10,_0x507ea4-0xe2);}return _0x182369[_0x1a5d85(0x1a1,0x180,0x1ff,0x20d)](_0x266c1b,_0xe793d1);},'OcGbq':_0x182369['sqoXr'],'bgPvc':_0x182369[_0x57ce80(0x4cb,0x4b9,0x507,0x47e)]};function _0x57ce80(_0x5ad722,_0x1fc17d,_0x2e2214,_0x20db1a){return _0x72f4e(_0x1fc17d-0x14,_0x1fc17d-0x19,_0x2e2214-0x1eb,_0x2e2214);}function _0x300b51(_0x18fcb0,_0x4aaab1,_0x2969ad,_0x5f2954){return _0x40da8a(_0x5f2954- -0x24d,_0x2969ad,_0x2969ad-0x1db,_0x5f2954-0x121);}if(_0x182369[_0x300b51(-0x17e,-0x1ab,-0x161,-0x10c)](_0x57ce80(0x345,0x38a,0x343,0x3de),_0x182369[_0x57ce80(0x3f1,0x3ad,0x43e,0x3af)]))return _0x1a3428['rtXTW'](_0x1544dd,0x1f26+-0xafd*0x2+-0x544)['toFixed'](0x1dba+0x1136+-0x2eef)+'K';else{if(_0x1b81bd[_0x57ce80(0x3bd,0x44f,0x441,0x44b)]===0x25f*-0xe+-0xa6a+-0x2b9c*-0x1){this[_0x57ce80(0x436,0x3d3,0x372,0x477)+_0x57ce80(0x474,0x41b,0x47a,0x381)]();return;}const _0x5dd814=_0x23dcc[_0x57ce80(0x388,0x415,0x3f3,0x3f5)](-0x8e4*0x1+-0x6*-0x1e7+0x286*-0x1,_0x43142d),_0x4e4525=_0x23dcc[_0x57ce80(0x485,0x415,0x446,0x45d)](_0x43142d);this[_0x57ce80(0x406,0x446,0x3b3,0x4ae)+'e'][_0x300b51(-0x101,-0xf2,-0x227,-0x185)](''),this[_0x300b51(-0xdd,-0x1af,-0x10e,-0x13a)+'e'][_0x300b51(-0x217,-0x119,-0xff,-0x177)](document[_0x57ce80(0x49e,0x418,0x386,0x3ec)+_0x57ce80(0x42f,0x38f,0x357,0x2fe)](_0x5dd814),_0x182369[_0x57ce80(0x335,0x395,0x35b,0x3a7)]($,_0x182369['LAeGB'])['html'](_0x182369[_0x300b51(-0x17a,-0x15d,-0x193,-0x1b8)]),document[_0x300b51(-0x1ca,-0x181,-0x11d,-0x168)+_0x57ce80(0x3b3,0x38f,0x38d,0x393)](_0x4e4525));const {x:_0x2bd890,y:_0x4f8fd1}=this[_0x300b51(-0x209,-0x18b,-0x23c,-0x1e7)+_0x57ce80(0x4ee,0x458,0x488,0x3f2)](),_0x5290e7=this[_0x300b51(-0x15c,-0x143,-0xe9,-0xeb)][0x169e+0x28e*-0xa+0x2ee]['getBoundin'+_0x300b51(-0x205,-0x1c6,-0x29c,-0x1fb)+'t'](),_0x219ba8=this[_0x300b51(-0x1e3,-0xf0,-0x210,-0x19a)+'le'][0x6*0x21a+-0x1e6f+0x11d3][_0x300b51(-0x238,-0x174,-0x1d7,-0x1ee)+_0x57ce80(0x384,0x385,0x3e2,0x35a)+'t'](),_0x19ef84=parseFloat(this['textareaSt'+_0x300b51(-0xab,-0x177,-0x190,-0x107)][_0x300b51(-0x193,-0x18b,-0x16d,-0x186)]),_0x1f73dc=_0x182369['xXZVn'](parseFloat,this[_0x300b51(-0x1be,-0x163,-0x1ce,-0x1be)+_0x57ce80(0x4ed,0x479,0x3fa,0x44b)][_0x57ce80(0x3cd,0x3ce,0x451,0x417)+'t']),_0x43f696=_0x182369[_0x57ce80(0x4af,0x44d,0x3d5,0x4e1)](parseFloat,this[_0x57ce80(0x322,0x3c2,0x32d,0x39d)+_0x57ce80(0x3fe,0x479,0x49c,0x4e6)][_0x57ce80(0x385,0x3c4,0x320,0x349)+_0x300b51(-0x179,-0x18f,-0xdf,-0x15e)]),_0x177719=this['calculateS'+_0x300b51(-0x1f8,-0x14a,-0x1a9,-0x161)+'Width'](_0x1b81bd),_0x44bddb=Math[_0x300b51(-0x19f,-0x255,-0x16d,-0x1b3)](_0x182369[_0x57ce80(0x34d,0x368,0x36f,0x340)](_0x182369['uqtid'](_0x2bd890,_0x1f73dc),_0x43f696),_0x182369[_0x300b51(-0x1f2,-0x215,-0x1f8,-0x1e2)](_0x5290e7[_0x57ce80(0x3f3,0x453,0x3d2,0x478)],_0x177719));this[_0x57ce80(0x51b,0x4a8,0x4ff,0x553)+'sEle'][_0x57ce80(0x48e,0x443,0x43e,0x4ea)]({'top':_0x182369[_0x57ce80(0x3df,0x368,0x342,0x3fb)](_0x182369[_0x57ce80(0x459,0x47b,0x44f,0x520)](_0x182369[_0x300b51(-0x17a,-0x1a7,-0x14a,-0x1e2)](_0x5290e7[_0x300b51(-0x1c2,-0x172,-0x131,-0x17c)],_0x219ba8[_0x300b51(-0x1aa,-0x209,-0x203,-0x17c)]),_0x4f8fd1),_0x19ef84)+'px','left':_0x182369[_0x57ce80(0x367,0x39e,0x3f4,0x418)](_0x5290e7[_0x300b51(-0x1bb,-0x23c,-0x1d0,-0x1ea)],_0x219ba8['left'])+_0x44bddb+'px','width':_0x177719+'px'}),this['suggestion'+_0x300b51(-0xe3,-0xd3,-0x133,-0xd6)]['empty'](),_0x1b81bd[_0x300b51(-0x196,-0x236,-0x183,-0x1fe)](_0x786a0e=>{const _0x167cac=_0x1a3428[_0x1ad6a0(0x2ed,0x3c8,0x3a0,0x378)]($,_0x1ad6a0(0x4e8,0x4da,0x54d,0x4b8))['addClass'](_0x1a3428[_0x1ad6a0(0x457,0x470,0x40c,0x48e)]),_0x1319da=_0x786a0e[_0x1ad6a0(0x4df,0x4ab,0x4f9,0x470)][_0x1ad6a0(0x4a9,0x4dd,0x45f,0x4b0)+'e']()['indexOf'](_0x4636cc[_0x1ad6a0(0x46e,0x4fd,0x53d,0x4b0)+'e']()),_0x4d751c=_0x786a0e['word'][_0xc590b7(-0x10,-0x1,0xe1,0x8c)](0x952+-0x4d7+0x1*-0x47b,_0x1319da),_0x1a1d07=_0x786a0e[_0x1ad6a0(0x47d,0x4a8,0x3de,0x470)]['slice'](_0x1319da,_0x1319da+_0x4636cc[_0x1ad6a0(0x4c1,0x414,0x4d8,0x44c)]),_0x38e687=_0x786a0e[_0x1ad6a0(0x4ab,0x450,0x46b,0x470)][_0x1ad6a0(0x522,0x52d,0x439,0x495)](_0x1a3428[_0xc590b7(0x22,0x29,-0xa1,-0x5)](_0x1319da,_0x4636cc[_0x1ad6a0(0x491,0x49c,0x486,0x44c)])),_0x390b9c=this[_0xc590b7(-0x96,-0xf5,-0xc0,-0x94)+'ht'](_0x786a0e[_0xc590b7(0x20,0x1a,0xf,0x7f)]),_0x53028e=this['getTypeInf'+'o'](_0x786a0e[_0x1ad6a0(0x434,0x47a,0x3dc,0x463)]),_0x5a8948=_0x53028e[_0xc590b7(0xfb,0xc0,0x84,0xa1)],_0xf299cb=_0x53028e['color'];_0x167cac[_0x1ad6a0(0x3dc,0x3f4,0x3f2,0x3f8)](_0x1ad6a0(0x3fa,0x486,0x485,0x43c)+_0x1ad6a0(0x46a,0x460,0x452,0x424)+_0x1ad6a0(0x4a2,0x47b,0x494,0x466)+_0x1ad6a0(0x3ad,0x41f,0x3b4,0x3e4)+_0x1ad6a0(0x467,0x463,0x4a0,0x489)+_0x1ad6a0(0x405,0x3cf,0x473,0x419)+'lor:\x20'+_0xf299cb+(_0xc590b7(0x48,0x8b,0x124,0x8d)+_0xc590b7(0xc0,0x5c,-0x55,0x1b)+_0xc590b7(0x3a,-0x41,-0x59,-0x34))+(_0x5a8948?_0xc590b7(-0x3b,-0x66,0x14,-0x96)+'s=\x22suggest'+_0xc590b7(0x48,0xe0,0xf7,0x75)+'\x22>'+_0x5a8948+_0x1ad6a0(0x35a,0x35b,0x39e,0x3a4):'')+(_0xc590b7(0x68,0x3a,0x33,0x33)+_0xc590b7(0x13,0x47,0xa4,0x1b)+_0x1ad6a0(0x3d4,0x3e0,0x469,0x3ef))+_0x4d751c+_0xc590b7(-0x3c,-0xa,0x23,0x65)+_0x1a1d07+_0x1ad6a0(0x395,0x337,0x3fd,0x3ae)+_0x38e687+(_0x1ad6a0(0x403,0x3ce,0x425,0x43c)+_0x1ad6a0(0x3dd,0x3a1,0x486,0x424)+'\x20</span>\x0a\x20'+_0x1ad6a0(0x4cc,0x3bc,0x3a3,0x424)+_0x1ad6a0(0x3f3,0x2dc,0x2d1,0x379)+_0xc590b7(-0x73,0x17,0xaf,0x6)+_0xc590b7(-0x58,-0x28,0x75,-0x33)+_0x1ad6a0(0x394,0x2f8,0x382,0x389)+'>')+_0x390b9c+(_0xc590b7(-0x39,-0xe5,-0x14,-0x47)+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x1ad6a0(0x3c6,0x3df,0x3b4,0x38d)));function _0x1ad6a0(_0x220469,_0x2bda41,_0x8930ce,_0x4b499b){return _0x300b51(_0x220469-0x181,_0x2bda41-0x51,_0x220469,_0x4b499b-0x57d);}_0x167cac[_0x1ad6a0(0x487,0x4b6,0x4ed,0x49c)](_0x1a3428[_0xc590b7(0x5f,-0x49,0x25,0x29)],_0x786a0e[_0xc590b7(-0x40,0xfd,0x2c,0x67)]),_0x167cac[_0xc590b7(-0x48,-0x68,-0xbc,-0x9b)]('title',_0x786a0e[_0xc590b7(0x5c,0xd9,0x76,0x67)]+'\x20('+_0x390b9c+_0x1ad6a0(0x36d,0x476,0x471,0x3d4)+_0x786a0e[_0xc590b7(-0x1c,0x9d,-0x1b,0x5a)]),_0x167cac['on'](_0x1a3428[_0x1ad6a0(0x40b,0x3b9,0x3bc,0x3cc)],()=>{const _0x513a79={'tXjTi':function(_0x960771,_0x500322){function _0x33fe59(_0xc730d7,_0x1e474f,_0x1d3df4,_0x493aa1){return _0x2385(_0x1d3df4-0x2ce,_0x1e474f);}return _0x1a3428[_0x33fe59(0x3e7,0x50b,0x46c,0x4dd)](_0x960771,_0x500322);},'WPIFm':function(_0x74056,_0x13396){return _0x1a3428['hhAey'](_0x74056,_0x13396);}};function _0x8ac42(_0x347185,_0x46de09,_0xf9a193,_0x40ab9f){return _0xc590b7(_0x347185-0x1c3,_0x46de09-0x190,_0x347185,_0x40ab9f-0x39c);}function _0x1460f9(_0x4b9bca,_0x19190d,_0x412ed6,_0x4cd867){return _0xc590b7(_0x4b9bca-0x156,_0x19190d-0x101,_0x412ed6,_0x4b9bca- -0x19b);}_0x1a3428[_0x8ac42(0x483,0x466,0x359,0x3f5)](_0x1a3428['ceATk'],_0x1a3428[_0x8ac42(0x2a2,0x39f,0x396,0x302)])?(this[_0x1460f9(-0x161,-0x1dc,-0x1de,-0xd6)+'e'][_0x1460f9(-0x154,-0xf0,-0x1b4,-0x1f6)](this[_0x1460f9(-0x112,-0xc1,-0xc3,-0x7c)][_0x1460f9(-0x154,-0x12c,-0x1f6,-0x181)]()+_0x513a79['tXjTi'](-0x2171+0x26d5+-0x562,_0x439d30)),this[_0x8ac42(0x37e,0x332,0x3a0,0x3d6)+'e'][_0x8ac42(0x3a8,0x3ed,0x4a9,0x40e)](_0x513a79[_0x8ac42(0x474,0x4ba,0x4aa,0x43c)](this['textarea'][_0x1460f9(-0x129,-0x103,-0x19b,-0x1af)](),_0x513a79[_0x8ac42(0x332,0x3cb,0x2c5,0x324)](-0xc46+-0x95*0x2f+0x27a3,_0x2e36bf)))):(this[_0x1460f9(-0x175,-0xda,-0x1b4,-0x1f0)+'rentWord'](_0x1a3428[_0x1460f9(-0xf9,-0xae,-0x78,-0xff)](_0x786a0e[_0x1460f9(-0x134,-0x9a,-0xc3,-0x141)],',\x20')),this[_0x8ac42(0x335,0x2f3,0x316,0x363)+_0x8ac42(0x397,0x3f1,0x32d,0x3ab)](),this[_0x8ac42(0x455,0x452,0x483,0x425)][_0x8ac42(0x3d7,0x307,0x322,0x364)]());});function _0xc590b7(_0x546e3e,_0x14d2e7,_0xa5178,_0x2848e4){return _0x57ce80(_0x546e3e-0xc2,_0x2848e4- -0x40c,_0xa5178,_0x2848e4-0x1d1);}this[_0xc590b7(0x133,0x37,0xfb,0x9c)+_0x1ad6a0(0x497,0x411,0x4fe,0x4a7)]['append'](_0x167cac);}),this['suggestion'+_0x300b51(-0x11d,-0x16e,-0x108,-0xd6)]['show']();}});}[_0x5cde25(0x3c2,0x402,0x42f,0x402)+'own'](_0x501d21){const _0x362c99={};_0x362c99[_0x181b91(0x4ef,0x452,0x502,0x564)]=_0x181b91(0x4a3,0x471,0x4e1,0x4e1);function _0x37082a(_0x1a3953,_0x43d503,_0x461bfe,_0x12e752){return _0x5ab75d(_0x461bfe,_0x43d503-0xff,_0x43d503-0x24,_0x12e752-0x31);}function _0x181b91(_0x4342bc,_0x56cb6a,_0x202fad,_0x2eecb0){return _0x5cde25(_0x4342bc-0x1bd,_0x202fad,_0x202fad-0x15d,_0x2eecb0-0x1e4);}_0x362c99['UVbNc']=_0x37082a(0x471,0x44e,0x48f,0x44c),_0x362c99[_0x181b91(0x4d3,0x474,0x550,0x445)]=_0x181b91(0x5cb,0x5cf,0x5f6,0x5f5),_0x362c99[_0x181b91(0x49d,0x44c,0x4b9,0x47f)]=':hidden',_0x362c99[_0x181b91(0x5a6,0x5ad,0x582,0x631)]=function(_0x2f187,_0x8a084b){return _0x2f187-_0x8a084b;},_0x362c99[_0x37082a(0x49c,0x494,0x3f8,0x4fb)]=_0x37082a(0x427,0x4c8,0x4c8,0x430)+'plete-sugg'+_0x181b91(0x4f9,0x518,0x450,0x4d7)+'cused',_0x362c99[_0x37082a(0x469,0x4e5,0x492,0x4b0)]=function(_0x108625,_0x1f7e20){return _0x108625-_0x1f7e20;},_0x362c99[_0x181b91(0x59e,0x641,0x58e,0x5b8)]='Enter',_0x362c99['XqtdN']=function(_0x4a14ad,_0x59a9f8){return _0x4a14ad>=_0x59a9f8;},_0x362c99[_0x37082a(0x545,0x52e,0x4ff,0x5d5)]=function(_0x10fe0d,_0x4ac5e3){return _0x10fe0d===_0x4ac5e3;},_0x362c99[_0x37082a(0x411,0x459,0x459,0x4cc)]=_0x37082a(0x42b,0x4b0,0x415,0x539),_0x362c99[_0x181b91(0x4a2,0x539,0x53d,0x457)]=function(_0xaaac7e,_0x68e899){return _0xaaac7e+_0x68e899;};const _0x302bfc=_0x362c99;if(![_0x302bfc[_0x181b91(0x4ef,0x49f,0x49f,0x4b9)],_0x302bfc[_0x181b91(0x4e3,0x451,0x497,0x55d)],'Enter',_0x302bfc[_0x181b91(0x4d3,0x455,0x4d0,0x447)]][_0x181b91(0x5d3,0x5e9,0x5fb,0x675)](_0x501d21[_0x37082a(0x454,0x402,0x409,0x3a8)]))return;const _0x4b2323=this[_0x181b91(0x5d7,0x53e,0x56f,0x564)+_0x37082a(0x4ac,0x546,0x5e2,0x537)]['find'](_0x181b91(0x520,0x4a6,0x4b9,0x556)+_0x181b91(0x56b,0x577,0x545,0x520)+_0x181b91(0x4cc,0x54b,0x534,0x4f1)),_0xe4520b=_0x4b2323[_0x181b91(0x57e,0x52e,0x616,0x5bb)];if(_0xe4520b===-0x1dc0+-0x24*-0x8a+0x4*0x296||this[_0x37082a(0x53f,0x544,0x4e6,0x4ae)+_0x181b91(0x5d9,0x64a,0x646,0x645)]['is'](_0x302bfc[_0x37082a(0x3fe,0x40a,0x4b4,0x3e4)]))return;_0x501d21[_0x181b91(0x580,0x536,0x5a8,0x59c)+'ault']();switch(_0x501d21[_0x37082a(0x3cd,0x402,0x47f,0x3ca)]){case _0x37082a(0x422,0x410,0x454,0x4ac):_0x4b2323['eq'](this[_0x181b91(0x5af,0x564,0x651,0x5d2)](0x38a+0x9da*0x2+0x46*-0x55,this[_0x37082a(0x445,0x462,0x3bf,0x46e)+_0x181b91(0x59a,0x50f,0x5e5,0x541)+'ex'],_0x302bfc[_0x37082a(0x51e,0x513,0x57c,0x599)](_0xe4520b,0x3*0xbaf+-0xe*0x22c+0x3*-0x18c)))['removeClas'+'s'](_0x302bfc[_0x181b91(0x527,0x58b,0x50f,0x55a)]),this['currentSug'+_0x181b91(0x59a,0x617,0x5d3,0x508)+'ex']=this['clamp'](-0x2*-0xc41+0x14d5+0x1*-0x2d57,this[_0x37082a(0x498,0x462,0x462,0x3d1)+_0x37082a(0x480,0x507,0x53c,0x47a)+'ex']+(0x1093*-0x1+0x931+0x763*0x1),_0xe4520b-(-0x1fdc+-0x1463+0x98*0x58)),_0x4b2323['eq'](this[_0x181b91(0x4f5,0x4d5,0x485,0x484)+_0x181b91(0x59a,0x56f,0x515,0x592)+'ex'])[_0x37082a(0x4dc,0x485,0x46e,0x427)](_0x302bfc[_0x37082a(0x419,0x494,0x48f,0x457)]);break;case _0x37082a(0x416,0x44e,0x40f,0x49a):_0x4b2323['eq'](this['clamp'](0x17f*-0x1+-0x1ead+0x202c,this['currentSug'+'gestionInd'+'ex'],_0xe4520b-(0x262+0x134e+-0x15af)))['removeClas'+'s'](_0x302bfc[_0x181b91(0x527,0x505,0x520,0x4e1)]),this[_0x181b91(0x4f5,0x488,0x539,0x47d)+'gestionInd'+'ex']=this[_0x37082a(0x4f6,0x51c,0x521,0x500)](0xef*0x29+-0xd3+0x11*-0x234,_0x302bfc[_0x37082a(0x46f,0x4e5,0x53e,0x43f)](this[_0x181b91(0x4f5,0x520,0x498,0x549)+_0x181b91(0x59a,0x566,0x5ca,0x535)+'ex'],-0x1912+-0x1da*0xd+0x3125*0x1),_0x302bfc[_0x181b91(0x578,0x597,0x61c,0x4e7)](_0xe4520b,-0x9*-0x29b+-0x10f3*-0x2+-0x1*0x3958)),_0x4b2323['eq'](this[_0x37082a(0x4ee,0x462,0x42c,0x4ed)+_0x37082a(0x57e,0x507,0x57b,0x58c)+'ex'])[_0x37082a(0x451,0x485,0x486,0x3e9)]('ai-autocom'+_0x181b91(0x4b8,0x432,0x428,0x4b5)+'estion--fo'+'cused');break;case _0x302bfc[_0x181b91(0x59e,0x511,0x640,0x56c)]:if(_0x302bfc[_0x37082a(0x42b,0x4ca,0x524,0x4d3)](this[_0x181b91(0x4f5,0x46c,0x4b8,0x51c)+'gestionInd'+'ex'],-0x49*0x24+0x277+0x7cd)){if(_0x302bfc['uFpPA'](_0x181b91(0x5b4,0x57a,0x64a,0x50d),_0x302bfc[_0x181b91(0x4ec,0x457,0x46d,0x4c1)])){this['hideSugges'+'tions']();return;}else{const _0x20bd0c=_0x4b2323['eq'](this[_0x37082a(0x3e5,0x462,0x4e7,0x466)+_0x37082a(0x48d,0x507,0x4cc,0x472)+'ex'])[_0x181b91(0x5ce,0x622,0x522,0x57e)]('word');_0x20bd0c&&this[_0x37082a(0x4b1,0x4ce,0x44d,0x423)+_0x37082a(0x4d9,0x45a,0x4ab,0x500)](_0x302bfc['QNAUB'](_0x20bd0c,',\x20')),this[_0x181b91(0x502,0x551,0x468,0x4a7)+_0x181b91(0x54a,0x5ca,0x5e7,0x54c)]();}}break;case _0x302bfc[_0x37082a(0x417,0x440,0x41e,0x3ae)]:this[_0x37082a(0x511,0x46f,0x410,0x489)+_0x181b91(0x54a,0x560,0x563,0x562)]();break;}}['clamp'](_0x2d6674,_0xb4ce57,_0x38eeb4){function _0x1827fa(_0x2a91d1,_0x55ab51,_0x388e67,_0x42eb34){return _0x5ab75d(_0x388e67,_0x55ab51-0xc0,_0x55ab51- -0x25,_0x42eb34-0x19e);}function _0x448194(_0x294857,_0x541edc,_0x2f664e,_0x454827){return _0x5cde25(_0x294857-0x1cf,_0x2f664e,_0x2f664e-0x170,_0x454827-0x1c7);}return Math[_0x1827fa(0x477,0x420,0x4b5,0x3f0)](Math[_0x1827fa(0x3eb,0x3c8,0x348,0x406)](_0x2d6674,_0xb4ce57),_0x38eeb4);}[_0x5ab75d(0x5a3,0x48f,0x4ff,0x4a9)](_0x4ed3a2,_0xf780bb){const _0x29f317={'GgACr':function(_0x192181,_0x180433,_0x2f5bf4){return _0x192181(_0x180433,_0x2f5bf4);}};let _0x18b897;return(..._0x577421)=>{function _0x2d5c59(_0x3cfdcd,_0x22638a,_0xe3c674,_0x53ef7b){return _0x2385(_0x3cfdcd- -0x210,_0x22638a);}clearTimeout(_0x18b897),_0x18b897=_0x29f317[_0x2d5c59(-0x2d,-0x30,0x2e,-0x2)](setTimeout,()=>_0x4ed3a2['apply'](this,_0x577421),_0xf780bb);};}[_0x5cde25(0x2ea,0x367,0x279,0x348)+'ht'](_0x1ba8bf){function _0x41f18a(_0x24a016,_0x4fc6bf,_0x53c795,_0x122b95){return _0x5cde25(_0x4fc6bf- -0x1a,_0x53c795,_0x53c795-0x4a,_0x122b95-0x18);}const _0x3f4ec6={};_0x3f4ec6[_0x5225c2(-0x1c1,-0x26b,-0x290,-0x24f)]=function(_0x3efe0c,_0x4973a6){return _0x3efe0c>=_0x4973a6;};function _0x5225c2(_0x3af886,_0x4545c1,_0x25c483,_0x29840f){return _0x5cde25(_0x4545c1- -0x577,_0x3af886,_0x25c483-0x68,_0x29840f-0x51);}_0x3f4ec6[_0x41f18a(0x34b,0x34e,0x3bf,0x34f)]=_0x5225c2(-0x1a0,-0x202,-0x164,-0x189),_0x3f4ec6[_0x41f18a(0x295,0x2c3,0x319,0x301)]=function(_0x205c0d,_0x46cf65){return _0x205c0d/_0x46cf65;};const _0x5ae2f9=_0x3f4ec6;if(_0x5ae2f9[_0x5225c2(-0x21d,-0x26b,-0x236,-0x2aa)](_0x1ba8bf,-0x130d*-0x1+0x23*-0xc1+-0xb3e*-0x1)){if(_0x5ae2f9['xcKse']!==_0x5225c2(-0x27a,-0x202,-0x1e1,-0x1a6)){this[_0x41f18a(0x32c,0x32b,0x363,0x38b)+'tions']();return;}else return _0x5ae2f9['Kccqd'](_0x1ba8bf,-0x19ed+-0x1*-0x1867+0x2*0x2b7)[_0x5225c2(-0x217,-0x22b,-0x269,-0x1a5)](0xb20*0x2+0x1156+0x1*-0x2795)+'K';}return _0x1ba8bf['toString']();}}
</script><div class="coord-popup" style="display: none;">
        <span>指定角色在画面中的大致位置:</span>
        <div class="coord-grid">

                <button type="button" class="btn btn-outline-primary coord-btn" data-x="0.1" data-y="0.1">
                    0.1,0.1
                </button>

                <button type="button" class="btn btn-outline-primary coord-btn" data-x="0.3" data-y="0.1">
                    0.3,0.1
                </button>

                <button type="button" class="btn btn-outline-primary coord-btn" data-x="0.5" data-y="0.1">
                    0.5,0.1
                </button>

                <button type="button" class="btn btn-outline-primary coord-btn" data-x="0.7" data-y="0.1">
                    0.7,0.1
                </button>

                <button type="button" class="btn btn-outline-primary coord-btn" data-x="0.9" data-y="0.1">
                    0.9,0.1
                </button>

                <button type="button" class="btn btn-outline-primary coord-btn" data-x="0.1" data-y="0.3">
                    0.1,0.3
                </button>

                <button type="button" class="btn btn-outline-primary coord-btn" data-x="0.3" data-y="0.3">
                    0.3,0.3
                </button>

                <button type="button" class="btn btn-outline-primary coord-btn" data-x="0.5" data-y="0.3">
                    0.5,0.3
                </button>

                <button type="button" class="btn btn-outline-primary coord-btn" data-x="0.7" data-y="0.3">
                    0.7,0.3
                </button>

                <button type="button" class="btn btn-outline-primary coord-btn" data-x="0.9" data-y="0.3">
                    0.9,0.3
                </button>

                <button type="button" class="btn btn-outline-primary coord-btn" data-x="0.1" data-y="0.5">
                    0.1,0.5
                </button>

                <button type="button" class="btn btn-outline-primary coord-btn" data-x="0.3" data-y="0.5">
                    0.3,0.5
                </button>

                <button type="button" class="btn btn-outline-primary coord-btn" data-x="0.5" data-y="0.5">
                    0.5,0.5
                </button>

                <button type="button" class="btn btn-outline-primary coord-btn" data-x="0.7" data-y="0.5">
                    0.7,0.5
                </button>

                <button type="button" class="btn btn-outline-primary coord-btn" data-x="0.9" data-y="0.5">
                    0.9,0.5
                </button>

                <button type="button" class="btn btn-outline-primary coord-btn" data-x="0.1" data-y="0.7">
                    0.1,0.7
                </button>

                <button type="button" class="btn btn-outline-primary coord-btn" data-x="0.3" data-y="0.7">
                    0.3,0.7
                </button>

                <button type="button" class="btn btn-outline-primary coord-btn" data-x="0.5" data-y="0.7">
                    0.5,0.7
                </button>

                <button type="button" class="btn btn-outline-primary coord-btn" data-x="0.7" data-y="0.7">
                    0.7,0.7
                </button>

                <button type="button" class="btn btn-outline-primary coord-btn" data-x="0.9" data-y="0.7">
                    0.9,0.7
                </button>

                <button type="button" class="btn btn-outline-primary coord-btn" data-x="0.1" data-y="0.9">
                    0.1,0.9
                </button>

                <button type="button" class="btn btn-outline-primary coord-btn" data-x="0.3" data-y="0.9">
                    0.3,0.9
                </button>

                <button type="button" class="btn btn-outline-primary coord-btn" data-x="0.5" data-y="0.9">
                    0.5,0.9
                </button>

                <button type="button" class="btn btn-outline-primary coord-btn" data-x="0.7" data-y="0.9">
                    0.7,0.9
                </button>

                <button type="button" class="btn btn-outline-primary coord-btn" data-x="0.9" data-y="0.9">
                    0.9,0.9
                </button>
            </div>
    </div></body><div id="immersive-translate-popup" style="all: initial"><template shadowrootmode="open"><style>/** 基础色阶定义 **/
:root,
#mount[data-theme="light"],
#mount:not([data-theme="dark"]) {
  /* 中性灰阶（light） */
  --c-00: #000000;
  --c-22: #222222;
  --c-33: #333333;
  --c-66: #666666;
  --c-83: #838383;
  --c-99: #999999;
  --c-c7: #c7c7c7;
  --c-cc: #cccccc;
  --c-e6: #e6e6e6;
  --c-f5: #f5f5f5;
  --c-ff: #ffffff;
  /* 品牌主色阶（light） */
  --p-main: #ea4c89;
  --p-hover: #ec5e95;
  --p-active: #e34a85;
  --p-special: #ee71a2;
  --p-disabled: #f4a5c4;
  --p-text-disabled: #f9c9dc;
  --p-weak: #fdedf3;
  /* Surface 层级（light，TC 填充-1） */
  --s-1: #f3f5f6;
  --s-1-hover: #f6f8f9;
  --s-1-active: #edf1f2;
  --s-1-weak: #fafbfb;
  /* 输入/边框（light，TC 填充-2） */
  --input-bg-base: #fafbfc;
  --input-border: #ecf0f7;
  --input-border-strong: #e0e0e6;
  --input-bg-strong: #fafdff;
}

:root[data-theme="dark"],
[data-theme="dark"] {
  /* 中性灰阶（dark） */
  --c-00: #ffffff;
  --c-22: #dbdbdb;
  --c-33: #dbdbdb;
  --c-66: #b3b3b3;
  --c-83: #838383;
  --c-99: #707070;
  --c-c7: #666666;
  --c-cc: #5c5c5c;
  --c-e6: #3b3b3b;
  --c-f5: #262626;
  --c-ff: #222222;
  /* 品牌主色阶（dark） */
  --p-main: #e23c7c;
  --p-hover: #ea4c89;
  --p-active: #d5467d;
  --p-special: #a93a65;
  --p-disabled: #7e2f4d;
  --p-text-disabled: #522335;
  --p-weak: #26171d;
  /* Surface 层级（dark，TC 填充-1） */
  --s-1: #2d2e2f;
  --s-1-hover: #323434;
  --s-1-active: #202121;
  --s-1-weak: #262627;
  /* 输入/边框（dark，TC 填充-2） */
  --input-bg-base: #2b2d30;
  --input-border: #3e434b;
  --input-border-strong: #43474b;
  --input-bg-strong: #1f2123;
}

:root,
#mount [data-theme] {
  /* 业务/通用变量引用色阶（全局可见，含 Shadow DOM） */
  --primary: var(--p-main);
  --primary-hover: var(--p-hover);
  --primary-inverse: #fff;
  --modal-background: var(--s-1);
  --modal-border: var(--input-border);
  --modal-text: var(--c-22);
  --modal-text-secondary: var(--c-66);
  --modal-error: var(--p-main);
  --modal-required: #f53f3f;
  --modal-success: #68cd52;
  --modal-button-background: var(--p-main);
  --modal-button-text: var(--c-ff);
  --modal-input-background: var(--input-bg-base);
  --modal-check-color: var(--p-main);
  --background-color: var(--c-ff);
  --background-light-green: var(--s-1-weak, #f5f7f9);
  --text-black-2: var(--c-22);
  --text-gray-2: var(--c-22);
  --text-gray-6: var(--c-66);
  --text-gray-9: var(--c-99);
  --text-gray-c2: var(--c-c7);
  --switch-background-color: var(--c-c7, hsl(205deg, 16%, 77%));
  --float-ball-more-button-border-color: var(--c-f5, #f6f6f6);
  --float-ball-more-button-background-color: var(--c-ff);
  --float-ball-more-button-hover-color: var(--p-weak);
  --float-ball-more-button-svg-color: #6c6f73;
  --service-bg-hover: var(--s-1-hover, #f7faff);
  --service-bg: var(--s-1-weak, #fafbfb);
}

#mount {
  --font-family: system-ui, -apple-system, "Segoe UI", "Roboto", "Ubuntu",
    "Cantarell", "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji",
    "Segoe UI Symbol", "Noto Color Emoji";
  /* PC/H5 兼容的字号、间距、圆角、阴影变量 */
  --f-12: 12px;
  --f-14: 14px;
  --f-15: 15px;
  --f-16: 16px;
  --f-18: 18px;
  --f-20: 20px;
  --space-4: 4px;
  --space-6: 6px;
  --space-8: 8px;
  --space-12: 12px;
  --space-16: 16px;
  --space-18: 18px;
  --space-24: 24px;
  --radius-8: 8px;
  --radius-12: 12px;
  --radius-16: 16px;
  --control-height-lg: 44px;
  --width-28: 28px;
  --width-24: 24px;
  --width-20: 20px;
  --width-18: 18px;
  --width-16: 16px;
  --width-label-md: 56px;
  --shadow-lg: 0 18px 48px rgba(0, 0, 0, 0.12);

  /* 常规变量 */
  --line-height: 1.5;
  --font-weight: 400;
  --font-size: 16px;
  --border-radius: 4px;
  --border-width: 2px;
  --outline-width: 3px;
  --spacing: 16px;
  --typography-spacing-vertical: 24px;
  --block-spacing-vertical: calc(var(--spacing) * 2);
  --block-spacing-horizontal: var(--spacing);
  --grid-spacing-vertical: 0;
  --grid-spacing-horizontal: var(--spacing);
  --form-element-spacing-vertical: 12px;
  --form-element-spacing-horizontal: 16px;
  --nav-element-spacing-vertical: 16px;
  --nav-element-spacing-horizontal: 8px;
  --nav-link-spacing-vertical: 8px;
  --nav-link-spacing-horizontal: 8px;
  --form-label-font-weight: var(--font-weight);
  --transition: 0.2s ease-in-out;
  --modal-overlay-backdrop-filter: blur(4px);
  --switch-color: var(--primary-inverse);
  --switch-checked-background-color: var(--primary);
  --icon-xia: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgaWQ9IkZyYW1lIj4KPHBhdGggaWQ9IlZlY3RvciIgZD0iTTguMDAyOTEgOS42Nzk4M0wzLjgzMzM5IDUuNTEyMjFMMy4wMjUzOSA2LjMxOTgzTDguMDAzMjkgMTEuMjk1MUwxMi45NzYyIDYuMzE5ODNMMTIuMTY3OSA1LjUxMjIxTDguMDAyOTEgOS42Nzk4M1oiIGZpbGw9IiM4MzgzODMiLz4KPC9nPgo8L3N2Zz4K");
  /* 兼容旧变量：主色直接引用品牌主色阶 */
  --primary: var(--p-main);
  --primary-hover: var(--p-hover);
  --primary-inverse: #fff;
  /* Modal 业务变量引用色阶 */
  --modal-background: var(--s-1);
  --modal-border: var(--input-border);
  --modal-text: var(--c-22);
  --modal-text-secondary: var(--c-66);
  --modal-error: var(--p-main);
  --modal-required: #f53f3f;
  --modal-success: #68cd52;
  --modal-button-background: var(--p-main);
  --modal-button-text: var(--c-ff);
  --modal-input-background: var(--input-bg-base);
  --modal-check-color: var(--p-main);
  --background-color: var(--c-ff);
  --background-light-green: var(--s-1-weak, #f5f7f9);
  --text-black-2: var(--c-22);
  --text-gray-2: var(--c-22);
  --text-gray-6: var(--c-66);
  --text-gray-9: var(--c-99);
  --text-gray-c2: var(--c-c7);
  --switch-background-color: var(--c-c7, hsl(205deg, 16%, 77%));
  --float-ball-more-button-border-color: var(--c-f5, #f6f6f6);
  --float-ball-more-button-background-color: var(--c-ff);
  --float-ball-more-button-hover-color: var(--p-weak);
  --float-ball-more-button-svg-color: #6c6f73;
  --service-bg-hover: var(--s-1-hover, #f7faff);
  --service-bg: var(--s-1-weak, #fafbfb);
  line-height: var(--line-height);
  font-family: var(--font-family);
  font-size: var(--font-size);
}

@media (max-width: 480px) {
  :root,
  #mount {
    --f-12: 10px;
    --f-14: 12px;
    --f-15: 13px;
    --f-16: 14px;
    --f-18: 16px;
    --f-20: 18px;
    --space-4: 4px;
    --space-6: 4px;
    --space-8: 6px;
    --space-12: 8px;
    --space-16: 12px;
    --space-18: 14px;
    --space-24: 18px;
    --radius-8: 6px;
    --radius-12: 10px;
    --radius-16: 12px;
    --control-height-lg: 38px;
    --shadow-lg: 0 12px 32px rgba(0, 0, 0, 0.1);
    --width-28: 24px;
    --width-24: 20px;
    --width-20: 16px;
    --width-18: 14px;
    --width-16: 12px;
    --width-label-md: 52px;
  }
}

#mount * {
  box-sizing: border-box;
}

[hidden] {
  display: none !important;
}

:where(#mount) a,
:where(#mount) [role="link"] {
  --color: var(--primary);
  --background-color: transparent;
  outline: none;
  background-color: var(--background-color);
  color: var(--color);
  -webkit-text-decoration: var(--text-decoration);
  text-decoration: var(--text-decoration);
  transition: background-color var(--transition), color var(--transition),
    box-shadow var(--transition), -webkit-text-decoration var(--transition);
  transition: background-color var(--transition), color var(--transition),
    text-decoration var(--transition), box-shadow var(--transition);
  transition: background-color var(--transition), color var(--transition),
    text-decoration var(--transition), box-shadow var(--transition),
    -webkit-text-decoration var(--transition);
}
:where(#mount) a:is([aria-current], :hover, :active, :focus),
:where(#mount) [role="link"]:is([aria-current], :hover, :active, :focus) {
  --color: var(--primary-hover);
  --text-decoration: underline;
}

:where(#mount) label {
  font-size: 13px;
  line-height: 1.3;
  color: var(--text-gray-2, #222222);
}

:where(#mount) button {
  width: 100%;
  font-family: inherit;
  font-size: 15px;
  line-height: 1.3;
  min-height: 44px;
  border-radius: 12px;
  padding: 0 14px;
  border: none;
  background-color: var(--primary, #ea4c89);
  color: #ffffff;
  cursor: pointer;
  transition: background-color 0.2s ease, box-shadow 0.2s ease, color 0.2s ease;
}

:where(#mount) button:hover {
  background-color: var(--primary-hover, #f082ac);
}

:where(#mount) button:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

:where(#mount) select,
:where(#mount) input,
:where(#mount) textarea {
  font-family: inherit;
  color: var(--text-gray-2, #222222);
}

:where(#mount) select {
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  font-family: inherit;
  color: var(--text-gray-2, inherit);
  font-size: 13px;
  line-height: 1.3;
  outline: none;
  padding: 8px 16px;
  border: none;
  border-radius: 12px;
  background-color: var(--popup-item-background-color, transparent);
  background-image: var(--icon-xia, none);
  background-repeat: no-repeat;
  background-position: center right 12px;
  background-size: 16px auto;
  cursor: pointer;
}

:where(#mount) input[type="checkbox"] {
  accent-color: var(--primary, #ea4c89);
}

[type="checkbox"],
[type="radio"] {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  width: 1.25em;
  height: 1.25em;
  margin-top: -0.125em;
  margin-right: 0.375em;
  margin-left: 0;
  -webkit-margin-start: 0;
  margin-inline-start: 0;
  -webkit-margin-end: 0.375em;
  margin-inline-end: 0.375em;
  border-width: var(--border-width);
  font-size: inherit;
  vertical-align: middle;
  cursor: pointer;
}
[type="checkbox"]::-ms-check,
[type="radio"]::-ms-check {
  display: none;
}
[type="checkbox"]:checked,
[type="checkbox"]:checked:active,
[type="checkbox"]:checked:focus,
[type="radio"]:checked,
[type="radio"]:checked:active,
[type="radio"]:checked:focus {
  --background-color: var(--primary);
  --border-color: var(--primary);
  background-image: var(--icon-checkbox);
  background-position: center;
  background-size: 0.75em auto;
  background-repeat: no-repeat;
}
[type="checkbox"] ~ label,
[type="radio"] ~ label {
  display: inline-block;
  margin-right: 0.375em;
  margin-bottom: 0;
  cursor: pointer;
}

[type="checkbox"]:indeterminate {
  --background-color: var(--primary);
  --border-color: var(--primary);
  background-image: var(--icon-minus);
  background-position: center;
  background-size: 0.75em auto;
  background-repeat: no-repeat;
}

[type="radio"] {
  border-radius: 50%;
}
[type="radio"]:checked,
[type="radio"]:checked:active,
[type="radio"]:checked:focus {
  --background-color: var(--primary-inverse);
  border-width: 0.35em;
  background-image: none;
}

:where(#mount) [type="checkbox"][role="switch"] {
  --background-color: var(--switch-background-color);
  --border-color: var(--switch-background-color);
  --color: var(--switch-color);
  width: 2.25em;
  height: 1.25em;
  border: var(--border-width) solid var(--border-color);
  border-radius: 1.25em;
  background-color: var(--background-color);
  line-height: 1.25em;
}
:where(#mount) [type="checkbox"][role="switch"]:focus {
  --background-color: var(--switch-background-color);
  --border-color: var(--switch-background-color);
}
:where(#mount) [type="checkbox"][role="switch"]:checked {
  --background-color: var(--switch-checked-background-color);
  --border-color: var(--switch-checked-background-color);
}
:where(#mount) [type="checkbox"][role="switch"]:before {
  display: block;
  width: calc(1.25em - (var(--border-width) * 2));
  height: 100%;
  border-radius: 50%;
  background-color: var(--color);
  content: "";
  transition: margin 0.1s ease-in-out;
}
:where(#mount) [type="checkbox"][role="switch"]:checked {
  background-image: none;
}
:where(#mount) [type="checkbox"][role="switch"]:checked::before {
  margin-left: calc(1.125em - var(--border-width));
  -webkit-margin-start: calc(1.125em - var(--border-width));
  margin-inline-start: calc(1.125em - var(--border-width));
}

:where(#mount) [type="checkbox"][aria-invalid="false"],
:where(#mount) [type="checkbox"]:checked[aria-invalid="false"],
:where(#mount) [type="radio"][aria-invalid="false"],
:where(#mount) [type="radio"]:checked[aria-invalid="false"],
:where(#mount) [type="checkbox"][role="switch"][aria-invalid="false"],
:where(#mount) [type="checkbox"][role="switch"]:checked[aria-invalid="false"] {
  --border-color: var(--form-element-valid-border-color);
}
:where(#mount) [type="checkbox"][aria-invalid="true"],
:where(#mount) [type="checkbox"]:checked[aria-invalid="true"],
:where(#mount) [type="radio"][aria-invalid="true"],
:where(#mount) [type="radio"]:checked[aria-invalid="true"],
:where(#mount) [type="checkbox"][role="switch"][aria-invalid="true"],
:where(#mount) [type="checkbox"][role="switch"]:checked[aria-invalid="true"] {
  --border-color: var(--form-element-invalid-border-color);
}

.text-black {
  color: var(--text-black-2);
}

.text-gray-2 {
  color: var(--text-gray-2);
}

.text-gray-6 {
  color: var(--text-gray-6);
}

.text-gray-9 {
  color: var(--text-gray-9);
}

.text-gray-c2 {
  color: var(--text-gray-c2);
}

.pt-4 {
  padding-top: 16px;
}

.p-2 {
  padding: 8px;
}

.pl-5 {
  padding-left: 48px;
}

.p-0 {
  padding: 0;
}

.pl-2 {
  padding-left: 8px;
}

.pl-4 {
  padding-left: 24px;
}

.pt-2 {
  padding-top: 8px;
}

.pb-2 {
  padding-bottom: 8px;
}

.pb-4 {
  padding-bottom: 16px;
}

.pb-5 {
  padding-bottom: 20px;
}

.pr-5 {
  padding-right: 48px;
}

.text-sm {
  font-size: 13px;
}

.text-base {
  font-size: 16px;
}

.w-full {
  width: 100%;
}

.flex {
  display: flex;
}

.flex-row {
  flex-direction: row;
}

.flex-wrap {
  flex-wrap: wrap;
}

.flex-end {
  justify-content: flex-end;
}

.flex-grow {
  flex-grow: 1;
}

.justify-between {
  justify-content: space-between;
}

.mb-0 {
  margin-bottom: 0px;
}

.mb-2 {
  margin-bottom: 8px;
}

.mb-4 {
  margin-bottom: 16px;
}

.mb-3 {
  margin-bottom: 12px;
}

.inline-block {
  display: inline-block;
}

.py-2 {
  padding-top: 8px;
  padding-bottom: 8px;
}

.py-2-5 {
  padding-top: 6px;
  padding-bottom: 6px;
}

.mt-0 {
  margin-top: 0;
}

.mt-2 {
  margin-top: 8px;
}

.mt-3 {
  margin-top: 12px;
}

.mt-4 {
  margin-top: 16px;
}

.mt-5 {
  margin-top: 20px;
}

.mt-6 {
  margin-top: 24px;
}

.mb-1 {
  margin-bottom: 4px;
}

.ml-4 {
  margin-left: 24px;
}

.ml-3 {
  margin-left: 16px;
}

.ml-2 {
  margin-left: 8px;
}

.ml-1 {
  margin-left: 4px;
}

.mr-1 {
  margin-right: 4px;
}

.mr-2 {
  margin-right: 8px;
}

.mr-3 {
  margin-right: 16px;
}

.mx-2 {
  margin-left: 8px;
  margin-right: 8px;
}

.pl-3 {
  padding-left: 12px;
}

.pr-3 {
  padding-right: 12px;
}

.p-3 {
  padding: 12px;
}

.px-1 {
  padding-left: 4px;
  padding-right: 4px;
}

.px-3 {
  padding-left: 12px;
  padding-right: 12px;
}

.pt-3 {
  padding-top: 12px;
}

.px-6 {
  padding-left: 18px;
  padding-right: 18px;
}

.px-4 {
  padding-left: 16px;
  padding-right: 16px;
}

.pt-6 {
  padding-top: 20px;
}

.py-3 {
  padding-top: 12px;
  padding-bottom: 12px;
}

.py-0 {
  padding-top: 0;
  padding-bottom: 0;
}

.left-auto {
  left: auto !important;
}

.max-h-28 {
  max-height: 112px;
}

.max-h-30 {
  max-height: 120px;
}

.overflow-y-scroll {
  overflow-y: scroll;
}

.text-xs {
  font-size: 12px;
}

.inline-flex {
  display: inline-flex;
}

.flex-1 {
  flex: 1;
}

.flex-3 {
  flex: 3;
}

.flex-4 {
  flex: 4;
}

.flex-2 {
  flex: 2;
}

.items-center {
  align-items: center;
}

.max-content {
  width: max-content;
}

.justify-center {
  justify-content: center;
}

.items-end {
  align-items: flex-end;
}

.items-baseline {
  align-items: baseline;
}

.my-5 {
  margin-top: 48px;
  margin-bottom: 48px;
}

.my-4 {
  margin-top: 24px;
  margin-bottom: 24px;
}

.my-3 {
  margin-top: 16px;
  margin-bottom: 16px;
}

.pt-3 {
  padding-top: 12px;
}

.px-3 {
  padding-left: 12px;
  padding-right: 12px;
}

.pt-2 {
  padding-top: 8px;
}

.px-2 {
  padding-left: 8px;
  padding-right: 8px;
}

.pt-1 {
  padding-top: 4px;
}

.px-1 {
  padding-left: 4px;
  padding-right: 4px;
}

.pb-2 {
  padding-bottom: 8px;
}

.justify-end {
  justify-content: flex-end;
}

.w-auto {
  width: auto;
}

.shrink-0 {
  flex-shrink: 0;
}

.text-right {
  text-align: right;
}

.clickable {
  cursor: pointer;
}

.close {
  cursor: pointer;
  width: 16px;
  height: 16px;
  background-image: var(--icon-close);
  background-position: center;
  background-size: auto 1rem;
  background-repeat: no-repeat;
  opacity: 0.5;
  transition: opacity var(--transition);
}

.padding-two-column {
  padding-left: 40px;
  padding-right: 40px;
}

.muted {
  color: #999;
}

.text-label {
  color: #666;
}

.display-none {
  display: none;
}

/* dark use #18232c */
@media (prefers-color-scheme: dark) {
  .text-label {
    color: #9ca3af;
  }
}

.text-decoration-none {
  text-decoration: none;
}

.text-decoration-none:is([aria-current], :hover, :active, :focus),
[role="link"]:is([aria-current], :hover, :active, :focus) {
  --text-decoration: none !important;
  background-color: transparent !important;
}

.text-overflow-ellipsis {
  text-overflow: ellipsis;
  overflow: hidden;
  white-space: nowrap;
}

.max-w-20 {
  max-width: 180px;
  white-space: nowrap;
}

[data-theme="light"],
#mount:not([data-theme="dark"]) {
  --popup-footer-background-color: #e8eaeb;
  --popup-content-background-color: #ffffff;
  --popup-item-background-color: #f3f5f6;
  --popup-item-hover-background-color: #eaeced;
  --popup-trial-pro-background-color: #f9fbfc;
  --service-select-content-shadow: 0px 2px 12px 0px rgba(75, 76, 77, 0.2);
  --service-select-border-color: #fafafa;
  --service-select-selected-background-color: #f3f5f6;
  --download-app-background: #f3f5f6;
}

[data-theme="dark"] {
  --popup-footer-background-color: #0d0d0d;
  --popup-content-background-color: #191919;
  --popup-item-background-color: #272727;
  --popup-item-hover-background-color: #333333;
  --popup-trial-pro-background-color: #222222;
  --service-select-content-shadow: 0px 2px 12px 0px rgba(0, 0, 0, 0.9);
  --service-select-border-color: #2c2c2c;
  --service-select-selected-background-color: #333333;
  --download-app-background: #333;
}

#mount {
  min-width: 268px;
}

body {
  padding: 0;
  margin: 0 auto;
  min-width: 268px;
  border-radius: 10px;
}

.popup-container {
  font-size: 16px;
  --font-size: 16px;
  color: #666;
  background-color: var(--popup-footer-background-color);
  width: 316px;
  min-width: 316px;
}

.popup-content {
  background-color: var(--popup-content-background-color);
  border-radius: 0px 0px 12px 12px;
  padding: 16px 20px;
}

.immersive-translate-popup-overlay {
  position: fixed;
  top: 0;
  left: 0;
  height: 100%;
  width: 100%;
  touch-action: none;
}

.immersive-translate-popup-wrapper {
  background: var(--background-color);
  border-radius: 10px;
  border: 1px solid var(--muted-border-color);
}

.main-button {
  font-size: 15px;
  vertical-align: middle;
  border-radius: 12px;
  padding: unset;
  height: 44px;
  line-height: 44px;
}

select.language-select,
select.translate-service,
select.min-select {
  --form-element-spacing-horizontal: 0;
  margin-bottom: 0px;
  max-width: unset;
  flex: 1;
  overflow: hidden;
  font-size: 13px;
  border: none;
  border-radius: 8px;
  padding-right: 30px;
  padding-left: 0px;
  background-position: center right 12px;
  background-size: 16px auto;
  background-image: var(--icon-xia);
  text-overflow: ellipsis;
  color: var(--text-gray-2);
  background-color: transparent;
  box-shadow: unset !important;
  cursor: pointer;
}

select.more {
  background-position: center right;
  padding-right: 20px;
}

select.translate-service {
  color: var(--text-black-2);
}

.min-select-container.disabled {
  opacity: 0.5;
  pointer-events: none;
}

.popup-footer {
  background-color: var(--popup-footer-background-color);
  height: 40px;
}

.language-select-container {
  position: relative;
  width: 100%;
  background-color: var(--popup-item-background-color);
  height: 55px;
  border-radius: 12px;
}

select.language-select {
  color: var(--text-black-2);
  font-size: 14px;
  padding: 8px 24px 24px 16px;
  position: absolute;
  border-radius: 12px;
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
}

.language-select-container label {
  position: absolute;
  bottom: 10px;
  left: 16px;
  font-size: 12px;
  color: var(--text-gray-9);
  line-height: 12px;
  margin: 0;
}

.translation-service-container {
  background-color: var(--popup-item-background-color);
  border-radius: 12px;
}

.min-select-container {
  display: flex;
  justify-content: space-between;
  align-items: center;
  height: 44px;
  background-color: var(--popup-item-background-color);
  padding-left: 16px;
}

.min-select-container:first-child {
  border-top-left-radius: 10px;
  border-top-right-radius: 10px;
}

.min-select-container:last-child {
  border-bottom-left-radius: 10px;
  border-bottom-right-radius: 10px;
}

.min-select-container:only-child {
  border-radius: 10px;
}

.translate-mode {
  width: 44px;
  height: 44px;
  border-radius: 22px;
  background-color: var(--popup-item-background-color);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  cursor: pointer;
}

.translate-mode svg {
  fill: var(--text-gray-2);
}

.widgets-container {
  display: flex;
  align-items: stretch;
  justify-content: space-between;
  width: 100%;
  gap: 9px;
}

/* 当只有两个小组件时的样式优化 */
.widgets-container.widgets-two-items {
  gap: 16px;
}

.widgets-container.widgets-two-items .widget-item {
  flex: 0 1 auto;
  min-width: 93px;
  max-width: 120px;
}

.widget-item {
  display: flex;
  max-width: 93px;
  flex-direction: row;
  align-items: center;
  justify-content: center;
  background-color: var(--popup-item-background-color);
  font-size: 12px;
  min-height: 44px;
  height: 100%;
  border-radius: 8px;
  cursor: pointer;
  flex: 1;
  padding: 8px 4px;
  text-align: center;
}

.widget-icon-text {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  color: var(--text-gray-2);
}

.widgets-container svg {
  fill: var(--text-gray-2);
  color: var(--text-gray-2);
}

.share-button-container {
  display: flex;
  align-items: center;
  cursor: pointer;
  padding: 2px 3px 0 8px;
}

.share-button-container svg {
  fill: var(--text-gray-9);
}

.min-select-container:hover,
.language-select-container:hover,
.widget-item:hover,
.translate-mode:hover {
  background-color: var(--popup-item-hover-background-color);
}

.main-button:hover {
  background-color: #f5508f;
}

.share-button-container:hover {
  background-color: var(--popup-item-background-color);
  border-radius: 6px;
}

.error-boundary {
  background: #fff2f0;
  border: 1px solid #ffccc7;
  display: flex;
  padding: 12px;
  font-size: 14px;
  color: rgba(0, 0, 0, 0.88);
  word-break: break-all;
  margin: 12px;
  border-radius: 12px;
  flex-direction: column;
}

.upgrade-pro {
  border-radius: 11px;
  background: linear-gradient(57deg, #272727 19.8%, #696969 82.2%);
  padding: 2px 8px;
  transform: scale(0.85);
}

.upgrade-pro span {
  background: linear-gradient(180deg, #ffeab4 17.65%, #f8c235 85.29%);
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  font-size: 12px;
  margin-left: 4px;
}

.upgrade-pro svg {
  margin-top: -2px;
}

.upgrade-pro:hover {
  background: linear-gradient(57deg, #3d3d3d 19.8%, #949494 82.2%);
}

.border-bottom-radius-0 {
  border-bottom-left-radius: 0 !important;
  border-bottom-right-radius: 0 !important;
}

.trial-pro-container {
  border-radius: 0px 0px 12px 12px;
  background: var(--popup-trial-pro-background-color);
  display: flex;
  align-items: center;
  height: 44px;
  padding-left: 16px;
  padding-right: 12px;
  font-size: 12px;
}

.trial-pro-container label {
  line-height: 13px;
  color: var(--text-black-2);
}

.trial-pro-container img {
  margin-left: 5px;
}

.cursor-pointer {
  cursor: pointer;
}

.upgrade-pro-discount-act {
  height: 25px;
  display: flex;
  padding: 0 4px;
  align-items: center;
  border-radius: 15px;
  background: linear-gradient(
    90deg,
    #cefbfa 11.33%,
    #d7f56f 63.75%,
    #fccd5e 100%
  );
  transform: scale(0.9);
  box-shadow: 0px 1.8px 3.6px 0px rgba(0, 0, 0, 0.1);
  cursor: pointer;
}

.upgrade-pro-discount-act span {
  font-size: 12px;
  font-weight: 700;
  margin-left: 4px;
  color: #222222;
}

.upgrade-pro-discount-act:hover {
  text-decoration: unset;
  background: linear-gradient(
    90deg,
    #e2fffe 11.33%,
    #e6ff91 63.75%,
    #ffdf93 100%
  );
}

.custom-select-container {
  width: 200px;
  position: relative;
  flex: 1;
}

#translation-service-select {
  padding-right: 12px;
  padding-left: 6px;
}

.custom-select-content {
  border-radius: 12px;
  background: var(--popup-content-background-color);
  box-shadow: var(--service-select-content-shadow);
  border: 1px solid var(--service-select-border-color);
  padding: 4px 5px;
  position: absolute;
  left: -10px;
  right: 0;
  z-index: 100;
  overflow-y: auto;
}

.custom-select-item.default {
  width: 100%;
  padding: 0;
}

.custom-select-item {
  font-size: 13px;
  padding: 5px 6px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  cursor: pointer;
  color: var(--text-black-2);
  width: auto;
  overflow: hidden;
  height: 30px;
  line-height: 30px;
}

.custom-select-item-img {
  width: 20px;
  height: 20px;
  margin-right: 4px;
}

@media (prefers-color-scheme: dark) {
  .custom-select-item-img {
    margin-right: 6px;
  }
}

.custom-select-content .custom-select-item.selected,
.custom-select-content .custom-select-item:hover {
  background: var(--service-select-selected-background-color);
}

.custom-select-item > span {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.custom-select-item-pro {
  font-size: 12px;
  margin-left: 6px;
  display: flex;
}

.custom-select-item-pro img {
  margin: 0 3px;
  width: 20px;
  flex-shrink: 0;
}

.custom-select-group-header {
  font-size: 12px;
  font-weight: 500;
  color: var(--text-gray-9);
  padding: 6px 8px 4px;
  margin-top: 2px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.more-container {
  position: relative;
}

.new-menu-indicator {
  position: absolute;
  width: 8px;
  height: 8px;
  background-color: #ef3434;
  border-radius: 50%;
  right: 18px;
  top: 4px;
}

.download-app {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  border-radius: 8px;
  background: var(--download-app-background);
  padding: 4px 8px;
  color: var(--text-gray-6);
  font-size: 12px;
  cursor: pointer;
  transition: all 0.2s ease-in-out;
}

/* Popup 动画效果 */
@keyframes popup-fade-in {
  from {
    opacity: 0;
    transform: translateY(10px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes popup-fade-out {
  from {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
  to {
    opacity: 0;
    transform: translateY(10px) scale(0.95);
  }
}

.popup-generic-content {
  animation: popup-fade-in 0.2s ease-out;
}

.popup-generic-content.hiding {
  animation: popup-fade-out 0.15s ease-in;
}

select.min-select {
  --form-element-spacing-horizontal: 0;
  max-width: 128px;
  overflow: hidden;
  color: var(--primary);
  font-size: 13px;
  border: none;
  padding: 0;
  padding-right: 20px;
  text-overflow: ellipsis;
  color: var(--color);
}
select.min-select-secondary {
  color: var(--color);
}
select.min-select:focus {
  outline: none;
  border: none;
  --box-shadow: none;
}

select.min-select-left {
  padding-right: 0px;
  /* padding-left: 24px; */
  /* background-position: center left 0; */
  text-overflow: ellipsis;
  text-align: left;
}

select.transform-padding-left {
  padding-left: 12px;
  transform: translateX(-12px);
  background-position: center right 0px;
}

select.text-gray-6 {
  color: var(--text-gray-6);
}

/* dark use black, for windows */
@media (prefers-color-scheme: dark) {
  select.language-select option,
  select.translate-service option,
  select.min-select option {
    background-color: #666666;
  }
}

select.min-select-no-arrow {
  background-image: none;
  padding-right: 0;
}



.activity-tips {
  border-radius: 8px;
  padding: 0px 8px;
  min-height: 28px;
  background: linear-gradient(83deg, #FACCDE -0.87%, #FCE7EF 43.13%, #FBD6E4 72.08%, #FFB3D1 96.34%);  gap: 2px;
  color: #333;
  cursor: pointer;
  gap: 4px;
}

.activity-tips-icon {
  width: 18px;
  height: 18px;
  flex-shrink: 0;
}

.countdown-container {
  min-width: 50px;
  text-align: left;
  font-weight: 600;
  font-size: 12px;
  letter-spacing: 0.01em;
}

.activity-tips-text {
  font-weight: 600;
  max-width: 100px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

html {
  font-size: 17px;
}

@media print {
  .imt-fb-container {
    display: none !important;
  }
}

#mount {
  position: absolute;
  display: none;
  min-width: 250px;
  height: auto;
  --font-size: 17px;
  font-size: 17px;
}

/* float-ball */
.imt-fb-container {
  position: fixed;
  padding: 0;
  top: 335px;
  width: fit-content;
  display: flex;
  flex-direction: column;
  display: none;
  direction: ltr;
  background-color: transparent !important;
}

.imt-fb-container:hover .imt-manga-button {
  opacity: 1;
}

.imt-fb-container.left {
  align-items: flex-start;
  left: 0;
}

.imt-fb-container.right {
  align-items: flex-end;
  right: 0;
}

.imt-fb-btn {
  cursor: pointer;
  background: var(--float-ball-more-button-background-color);
  height: 36px;
  box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.08);
}

.imt-fb-btn.left {
  border-top-right-radius: 36px;
  border-bottom-right-radius: 36px;
  padding-left: 3px;
}

.imt-fb-btn.right {
  border-top-left-radius: 36px;
  border-bottom-left-radius: 36px;
  padding-right: 3px;
}

.imt-fb-btn.mini.left {
  transform: translateX(-22px);
}

.imt-fb-btn.mini.right {
  transform: translateX(22px);
}

.imt-fb-btn.mini.active {
  transform: translateX(0);
}

.imt-fb-btn div {
  height: 36px;
  display: inline-flex;
  align-items: center;
  position: relative;
}

.imt-fb-btn .imt-fb-hit-area {
  position: absolute;
  top: 0;
  height: 36px;
  bottom: -6px;
  left: -6px;
  right: -6px;
  background: transparent;
}

.imt-fb-btn.mini.right .imt-fb-hit-area {
  left: -10px;
}

.imt-fb-btn.mini.left .imt-fb-hit-area {
  right: -10px;
}

.imt-fb-btn.left div {
  border-top-right-radius: 34px;
  border-bottom-right-radius: 34px;
  justify-content: flex-end;
}

.imt-fb-btn.right div {
  border-top-left-radius: 34px;
  border-bottom-left-radius: 34px;
}

.imt-fb-logo-img {
  width: 20px;
  height: 20px;
  margin: 0 10px;
}

.imt-fb-logo-img-big-bg {
  width: 28px;
  height: 28px;
  margin: 0;
  background-color: #ed6d8f;
  border-radius: 50%;
  margin: 0 5px;
}

.imt-float-ball-translated {
  position: absolute;
  width: 11px;
  height: 11px;
  bottom: 4px;
  right: 4px;
}

.btn-animate {
  -webkit-transform: translate3d(0, 0, 0);
  transform: translate3d(0, 0, 0);
  -webkit-transition: -webkit-transform ease-out 250ms;
  transition: -webkit-transform ease-out 250ms;
  transition: transform ease-out 250ms;
  transition: transform ease-out 250ms, -webkit-transform ease-out 250ms;
}

.imt-fb-setting-btn {
  margin-right: 18px;
  width: 28px;
  height: 28px;
}

.immersive-translate-popup-wrapper {
  background: var(--background-color);
  border-radius: 20px;
  box-shadow: 2px 10px 24px 0px #0e121614;
  border: none;
}

.popup-container {
  border-radius: 20px;
}

.popup-content {
  border-radius: 20px 20px 12px 12px;
}
.popup-footer {
  border-radius: 20px;
}

.imt-fb-close-button {
  cursor: pointer;
  position: absolute;
  left: -10px;
  bottom: -20px;
}
.imt-fb-container.left .imt-fb-close-button {
  left: auto;
  right: -10px;
}

.imt-fb-close-content {
  padding: 22px;
  width: 320px;
  pointer-events: all;
}

.imt-fb-close-title {
  font-weight: 500;
  color: var(--text-black-2);
}

.imt-fb-close-radio-content {
  background-color: var(--background-light-green);
  padding: 8px 20px;
}

.imt-fb-radio-sel,
.imt-fb-radio-nor {
  width: 16px;
  height: 16px;
  border-radius: 8px;
  flex-shrink: 0;
}

.imt-fb-radio-sel {
  border: 2px solid var(--primary);
  display: flex;
  align-items: center;
  justify-content: center;
}

.imt-fb-radio-sel div {
  width: 8px;
  height: 8px;
  border-radius: 4px;
  background-color: var(--primary);
}

.imt-fb-radio-nor {
  border: 2px solid var(--input-border-strong);
}

.imt-fb-primary-btn {
  background-color: var(--primary);
  width: 72px;
  height: 32px;
  color: white;
  border-radius: 8px;
  text-align: center;
  line-height: 32px;
  font-size: 16px;
  cursor: pointer;
}

.imt-fb-default-btn {
  border: 1px solid var(--primary);
  width: 72px;
  height: 32px;
  border-radius: 8px;
  color: var(--primary);
  line-height: 32px;
  text-align: center;
  font-size: 16px;
  cursor: pointer;
}

.imt-fb-guide-container {
  width: 312px;
  transform: translateY(-45%);
}

.imt-fb-guide-bg {
  position: absolute;
  left: 30px;
  right: 0;
  top: 0;
  bottom: 0;
  z-index: -1;
  height: 100%;
  width: 90%;
}

.imt-fb-guide-bg.left {
  transform: scaleX(-1);
}

.imt-fb-guide-content {
  margin: 16px -30px 80px 0px;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.imt-fb-guide-content.left {
  margin: 16px 21px 60px 32px;
}

.imt-fb-guide-img {
  width: 220px;
  height: 112px;
}

.imt-fb-guide-message {
  font-size: 14px;
  line-height: 28px;
  color: #333333;
  white-space: pre-wrap;
  text-align: center;
  font-weight: 700;
  margin-bottom: 20px;
}

.imt-manga-guide-message {
  font-size: 16px;
  line-height: 24px;
  color: #333333;
  text-align: center;
  font-weight: 500;
  margin-bottom: 12px;
}

.imt-fb-guide-button {
  margin-top: 16px;
  line-height: 40px;
  height: 40px;
  padding: 0 20px;
  width: unset;
}

.imt-fb-side {
  border-radius: 50%;
  cursor: pointer;
  pointer-events: all;
  position: relative;
}

.imt-fb-side {
  margin: 10px 0;
}

.imt-fb-side::before,
.imt-manga-button::before,
.imt-fb-round-button::before {
  content: "";
  position: absolute;
  top: 2px;
  right: 2px;
  bottom: 2px;
  left: 2px;
  border-radius: 50%;
  background-color: transparent;
  transition: background-color 0.15s ease;
}

.imt-fb-side:hover::before,
.imt-manga-button:hover::before,
.imt-fb-round-button:hover::before {
  background-color: var(--float-ball-more-button-hover-color);
}

.imt-fb-new-badge {
  width: 26px;
  height: 14px;
  padding: 3px;
  background-color: #f53f3f;
  border-radius: 4px;
  position: absolute;
  top: -5px;
  right: 15px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.imt-fb-side * {
  pointer-events: all;
}

.imt-fb-pin-icon {
  position: absolute;
  left: -16px;
  bottom: -12px;
  opacity: 0;
  cursor: pointer;
}
.imt-fb-container.left .imt-fb-pin-icon {
  left: auto;
  right: -16px;
}

.imt-fb-side:hover .imt-fb-pin-icon {
  opacity: 1;
}

.imt-fb-more-button {
  width: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
}
/* Sheet.css */
.immersive-translate-sheet {
  position: fixed;
  transform: translateY(100%);
  /* Start off screen */
  left: 0;
  right: 0;
  background-color: var(--background-color);
  transition: transform 0.3s ease-out;
  /* Smooth slide transition */
  box-shadow: 0px -2px 10px rgba(0, 0, 0, 0.1);
  /* Ensure it's above other content */
  bottom: 0;
  border-top-left-radius: 16px;
  border-top-right-radius: 16px;
  overflow: hidden;
}

.immersive-translate-sheet.visible {
  transform: translateY(0);
}

.immersive-translate-sheet-backdrop {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.5);
  opacity: 0;
  transition: opacity 0.3s ease-out;
}

.immersive-translate-sheet-backdrop.visible {
  opacity: 1;
}

.popup-container-sheet {
  max-width: 100vw;
  width: 100vw;
}

.imt-no-events svg * {
  pointer-events: none !important;
}

.imt-manga-button {
  width: 36px;
  height: 36px;
  display: flex;
  flex-direction: column;
  position: relative;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  pointer-events: all;
  margin: 0 0 10px 0;
  background-color: var(--float-ball-more-button-background-color);
  border-radius: 50%;
  box-shadow: 0 2px 10px 0 rgba(0, 0, 0, 0.08);
  right: 8px;
}

.imt-manga-feedback {
  cursor: pointer;
  margin-bottom: 10px;
}

.imt-fb-round-button {
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  background: var(--float-ball-more-button-background-color);
  border-radius: 50%;
  box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.08);
  position: relative;
}

.imt-fb-round-button > svg {
  z-index: 1;
}

.imt-fb-upgrade-button {
  cursor: pointer;
  margin-top: 10px;
}

.imt-manga-translated {
  position: absolute;
  left: 24px;
  top: 20px;
}

.imt-float-ball-loading {
  animation: imt-loading-animation 0.6s infinite linear !important;
}

.imt-manga-guide-bg {
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
  z-index: -1;
  width: 100%;
  transform: translateY(-50%);
}
.imt-manga-guide-content {
  position: absolute;
  top: 15px;
  left: 0;
  right: 0;
  margin: 0 40px 0;
}

.img-manga-guide-button {
  width: fit-content;
  margin: 0 auto;
}

.img-manga-close {
  position: absolute;
  bottom: -200px;
  width: 32px;
  height: 32px;
  left: 0;
  right: 0;
  margin: auto;
  cursor: pointer;
}

.imt-fb-container.dragging .imt-manga-button,
.imt-fb-container.dragging .btn-animate:not(.imt-fb-btn) {
  display: none !important;
}

.imt-fb-container.dragging .imt-fb-btn {
  border-radius: 50% !important;
  width: 36px !important;
  height: 36px !important;
  display: flex !important;
  align-items: center !important;
  cursor: move !important;
}

.imt-fb-container.dragging .imt-fb-btn div {
  border-radius: 50% !important;
  width: 36px !important;
  height: 36px !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  margin: 0 !important;
}

.imt-fb-container.dragging .imt-fb-btn.left,
.imt-fb-container.dragging .imt-fb-btn.right {
  border-radius: 50% !important;
}

.imt-fb-container.dragging .imt-fb-btn.left div,
.imt-fb-container.dragging .imt-fb-btn.right div {
  border-radius: 50% !important;
}

.imt-fb-container.dragging .imt-fb-logo-img {
  margin: 0 !important;
}

.imt-fb-container.dragging .imt-float-ball-translated {
  right: 2px !important;
  bottom: 2px !important;
}

@-webkit-keyframes imt-loading-animation {
  from {
    -webkit-transform: rotate(0deg);
  }

  to {
    -webkit-transform: rotate(359deg);
  }
}

@keyframes imt-loading-animation {
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(359deg);
  }
}

.imt-fb-icon {
  color: #666666;
}

[data-theme="dark"] .imt-fb-icon {
  color: #b3b3b3;
}

[data-theme="light"] .imt-fb-icon {
  color: #666666;
}

/* 悬浮球设置弹窗样式 */
.imt-fb-setting-wrapper {
  border-radius: 12px;
  box-shadow: 2px 10px 24px 0px rgba(0, 0, 0, 0.06);
}

.imt-fb-setting-content {
  padding: 16px;
  width: 350px;
  pointer-events: all;
}

.imt-fb-setting-title {
  font-weight: 700;
  font-size: 16px;
  line-height: 24px;
  color: var(--text-black-2);
}

.imt-fb-setting-preview {
  display: flex;
  justify-content: center;
  align-items: center;
  margin: 24px 0;
}

.imt-fb-preview-wrapper {
  display: flex;
  border-radius: 12px;
  overflow: hidden;
}

.imt-fb-preview-item {
  width: 99px;
  height: 57px;
  display: flex;
  align-items: center;
  justify-content: flex-end;
  position: relative;
  overflow: hidden;
}

.imt-fb-preview-item.light {
  background-color: #f3f5f6;
  border-top-left-radius: 12px;
  border-bottom-left-radius: 12px;
}

.imt-fb-preview-item.dark {
  background-color: #444;
  border-top-right-radius: 12px;
  border-bottom-right-radius: 12px;
}

.imt-fb-preview-ball {
  height: 36px;
  display: flex;
  align-items: center;
  box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.08);
  transition: all 0.2s ease;
}

.imt-fb-preview-ball.light {
  background-color: #fff;
  border-top-left-radius: 36px;
  border-bottom-left-radius: 36px;
}

.imt-fb-preview-ball.dark {
  background-color: #111;
  border-top-left-radius: 36px;
  border-bottom-left-radius: 36px;
}

.imt-fb-preview-ball.full {
  width: 41px;
  justify-content: center;
}

.imt-fb-preview-ball.mini {
  width: 41px;
  justify-content: center;
  transform: translateX(21px);
}

.imt-fb-preview-ball .imt-fb-preview-logo {
  flex-shrink: 0;
}

/* 选项区域 */
.imt-fb-setting-options {
  margin-top: 0;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.imt-fb-setting-option-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 4px;
}

.imt-fb-setting-option-label {
  font-size: 14px;
  font-weight: 400;
  line-height: 21px;
  color: var(--text-black-2);
}

/* Toggle 开关样式 */
.imt-fb-toggle {
  width: 30px;
  height: 18px;
  background-color: var(--switch-background-color);
  border-radius: 24px;
  position: relative;
  cursor: pointer;
  transition: background-color 0.2s ease;
  flex-shrink: 0;
}

.imt-fb-toggle.checked {
  background-color: var(--primary);
}

.imt-fb-toggle.disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.imt-fb-toggle-thumb {
  width: 14px;
  height: 14px;
  background-color: var(--switch-color);
  border-radius: 50%;
  position: absolute;
  top: 2px;
  left: 2px;
  transition: transform 0.2s ease;
  box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.08);
}

.imt-fb-toggle.checked .imt-fb-toggle-thumb {
  transform: translateX(12px);
}

.imt-fb-setting-hide-options {
  background-color: var(--background-light-green);
  padding: 8px 20px;
  border-radius: 8px;
  margin-top: 8px;
}

.imt-fb-setting-save-btn {
  background-color: var(--primary);
  color: white;
  border-radius: 8px;
  text-align: center;
  line-height: 45px;
  height: 45px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  margin-top: 16px;
  transition: opacity 0.2s ease;
}

.imt-fb-setting-save-btn:hover {
  opacity: 0.9;
}

.imt-fb-setting-save-btn:active {
  opacity: 0.8;
}
</style><div id="mount" style="display: block;"><div class="imt-fb-container right notranslate " data-theme="light" style="z-index: 2147483637; pointer-events: none; right: 0px; top: 212px; display: flex;"><div class="btn-animate" style="transform: translateX(-5px); opacity: 0.7;"><div class="imt-fb-btn imt-fb-more-button imt-fb-side"><div class=" btn-animate" style="position: relative; pointer-events: all; display: inline-block;"><div><svg class="imt-fb-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M9.65332 13.3477C10.4097 13.4245 11 14.0632 11 14.8398V18.8398L10.9922 18.9932C10.9205 19.6992 10.3593 20.2604 9.65332 20.332L9.5 20.3398H5.5C4.72334 20.3398 4.08461 19.7496 4.00781 18.9932L4 18.8398V14.8398C4 14.0114 4.67157 13.3398 5.5 13.3398H9.5L9.65332 13.3477ZM18.6533 13.3477C19.4097 13.4245 20 14.0632 20 14.8398V18.8398L19.9922 18.9932C19.9205 19.6992 19.3593 20.2604 18.6533 20.332L18.5 20.3398H14.5C13.7233 20.3398 13.0846 19.7496 13.0078 18.9932L13 18.8398V14.8398C13 14.0114 13.6716 13.3398 14.5 13.3398H18.5L18.6533 13.3477ZM5.5 14.3398C5.22386 14.3398 5 14.5637 5 14.8398V18.8398C5 19.116 5.22386 19.3398 5.5 19.3398H9.5C9.77614 19.3398 10 19.116 10 18.8398V14.8398C10 14.5637 9.77614 14.3398 9.5 14.3398H5.5ZM14.5 14.3398C14.2239 14.3398 14 14.5637 14 14.8398V18.8398C14 19.116 14.2239 19.3398 14.5 19.3398H18.5C18.7761 19.3398 19 19.116 19 18.8398V14.8398C19 14.5637 18.7761 14.3398 18.5 14.3398H14.5ZM9.65332 4.34766C10.4097 4.42445 11 5.06318 11 5.83984V9.83984L10.9922 9.99316C10.9205 10.6992 10.3593 11.2604 9.65332 11.332L9.5 11.3398H5.5C4.72334 11.3398 4.08461 10.7496 4.00781 9.99316L4 9.83984V5.83984C4 5.01142 4.67157 4.33984 5.5 4.33984H9.5L9.65332 4.34766ZM16.1484 3.18848C16.2521 2.83834 16.7479 2.83834 16.8516 3.18848L17.3281 4.79785C17.5079 5.40507 17.9648 5.89104 18.5596 6.1084L20.0576 6.65625C20.3786 6.77361 20.3785 7.22732 20.0576 7.34473L18.5596 7.89258C17.9648 8.10991 17.5079 8.59598 17.3281 9.20312L16.8516 10.8125C16.7479 11.1626 16.2521 11.1626 16.1484 10.8125L15.6719 9.20312C15.4921 8.59598 15.0352 8.10991 14.4404 7.89258L12.9424 7.34473C12.6215 7.22732 12.6214 6.77361 12.9424 6.65625L14.4404 6.1084C15.0352 5.89104 15.4921 5.40507 15.6719 4.79785L16.1484 3.18848ZM5.5 5.33984C5.22386 5.33984 5 5.5637 5 5.83984V9.83984C5 10.116 5.22386 10.3398 5.5 10.3398H9.5C9.77614 10.3398 10 10.116 10 9.83984V5.83984C10 5.5637 9.77614 5.33984 9.5 5.33984H5.5Z" fill="#ED6D8F"></path></svg><svg class="imt-fb-pin-icon" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none"><circle cx="7" cy="7" r="7" fill="#B1B1B166"></circle><g transform="translate(2, 2)"><mask id="mask0_39788_745" maskUnits="userSpaceOnUse" x="0" y="0" width="10" height="10" style="mask-type: alpha;"><rect width="10" height="10" fill="#D9D9D9"></rect></mask><g mask="url(#mask0_39788_745)"><path d="M6.23958 3.76042C6.28819 3.80903 6.35243 3.88194 6.43229 3.97917C6.51215 4.07639 6.59722 4.18056 6.6875 4.29167C6.6875 4.44444 6.63646 4.57292 6.53438 4.67708C6.43222 4.78125 6.30618 4.83333 6.15625 4.83333C6.00056 4.83333 5.86962 4.78125 5.76344 4.67708C5.65726 4.57292 5.60417 4.44444 5.60417 4.29167C5.59722 4.28472 5.59201 4.28646 5.58854 4.29688C5.58507 4.30729 5.58333 4.31076 5.58333 4.30729C5.58333 4.30382 5.59028 4.30382 5.60417 4.30729C5.61806 4.31076 5.62153 4.30903 5.61458 4.30208C5.47569 4.30208 5.3559 4.25104 5.25521 4.14896C5.15451 4.04681 5.10417 3.92771 5.10417 3.79167C5.10417 3.65278 5.15451 3.53299 5.25521 3.43229C5.3559 3.3316 5.47569 3.28125 5.61458 3.28125C5.74653 3.35764 5.86111 3.43403 5.95833 3.51042C6.05556 3.58681 6.14931 3.67014 6.23958 3.76042ZM5 2.75C4.94667 2.75 4.89465 2.75017 4.84396 2.75052C4.79326 2.75087 4.74083 2.75035 4.68667 2.74896C4.54139 2.7566 4.39931 2.72049 4.26042 2.64062C4.12153 2.56076 4.03472 2.44618 4 2.29688C3.96528 2.14757 3.98611 2.01389 4.0625 1.89583C4.13889 1.77778 4.25267 1.71094 4.40385 1.69531C4.50962 1.6901 4.61059 1.68576 4.70677 1.68229C4.80295 1.67882 4.90069 1.67708 5 1.67708C5.97917 1.67708 6.88368 1.93056 7.71354 2.4375C8.5434 2.94444 9.17059 3.64625 9.5951 4.54292C9.62892 4.61847 9.65451 4.69451 9.67188 4.77104C9.68924 4.84757 9.69792 4.92389 9.69792 5C9.69792 5.07611 9.69097 5.15417 9.67708 5.23417C9.66319 5.31417 9.64236 5.39236 9.61458 5.46875C9.49826 5.68972 9.36504 5.89948 9.2149 6.09802C9.06469 6.29656 8.90278 6.49306 8.72917 6.6875C8.63194 6.79861 8.51042 6.85069 8.36458 6.84375C8.21875 6.83681 8.09375 6.78069 7.98958 6.67542C7.88542 6.57007 7.83681 6.44507 7.84375 6.30042C7.85069 6.15569 7.90278 6.02431 8 5.90625C8.13194 5.76736 8.25125 5.62153 8.35792 5.46875C8.46465 5.31597 8.5641 5.15972 8.65625 5C8.30208 4.30556 7.79861 3.75694 7.14583 3.35417C6.49306 2.95139 5.77778 2.75 5 2.75ZM5 8.32292C4.04861 8.32292 3.1684 8.07465 2.35938 7.57812C1.55035 7.0816 0.919896 6.40906 0.468021 5.56052C0.419896 5.46462 0.387153 5.37142 0.369792 5.28094C0.352431 5.19052 0.34375 5.09677 0.34375 4.99969C0.34375 4.90267 0.352431 4.80556 0.369792 4.70833C0.387153 4.61111 0.420139 4.51736 0.46875 4.42708C0.614583 4.13542 0.787361 3.86813 0.987083 3.62521C1.18688 3.38229 1.40646 3.15306 1.64583 2.9375L0.96875 2.27083C0.871528 2.18056 0.821181 2.07812 0.817708 1.96354C0.814236 1.84896 0.861111 1.74306 0.958333 1.64583C1.05556 1.54861 1.16319 1.5 1.28125 1.5C1.39931 1.5 1.50694 1.54861 1.60417 1.64583L8.19792 8.23958C8.29514 8.33681 8.34201 8.44271 8.33854 8.55729C8.33507 8.67188 8.28819 8.77431 8.19792 8.86458C8.10069 8.96181 7.99479 9.01042 7.88021 9.01042C7.76562 9.01042 7.65972 8.96181 7.5625 8.86458L6.70833 8.01042C6.43472 8.12153 6.15382 8.20139 5.86562 8.25C5.57743 8.29861 5.28889 8.32292 5 8.32292ZM2.41667 3.6875C2.20139 3.88194 2.00347 4.08507 1.82292 4.29688C1.64236 4.50868 1.48611 4.74306 1.35417 5C1.69444 5.70139 2.19271 6.25174 2.84896 6.65104C3.50521 7.05035 4.22222 7.25 5 7.25C5.14729 7.25 5.29347 7.24132 5.43854 7.22396C5.58368 7.2066 5.72569 7.18056 5.86458 7.14583L5.39583 6.67708C5.33333 6.70486 5.26736 6.72396 5.19792 6.73438C5.12847 6.74479 5.0625 6.75 5 6.75C4.51389 6.75 4.10069 6.57986 3.76042 6.23958C3.42014 5.89931 3.25 5.48611 3.25 5C3.25 4.9375 3.25694 4.87153 3.27083 4.80208C3.28472 4.73264 3.29514 4.66667 3.30208 4.60417L2.41667 3.6875Z" fill="white"></path></g></g></svg></div></div></div></div><div hidden="" class="imt-no-events " id="manga-button" style="position: relative; opacity: 0.7;"><div class="imt-manga-button btn-animate" style="transform: translateX(2px);"><div style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none" style="vertical-align: middle;"><path d="M14.8853 4.92364C14.8853 4.92364 16.3905 10.4362 22.6668 4C22.6668 4 20.3381 10.8907 25.3364 10.0843C25.3364 10.0843 22.0563 15.6994 29 18.0599C29 18.0599 22.9934 19.306 21.1617 28C21.1617 28 17.7679 24.54 14.8853 27.3549C14.8853 27.3549 13.3233 23.5724 7.33097 26.27C7.33097 26.27 10.1141 20.6549 4.83179 21.0507C4.83179 21.0507 7.16057 18.8955 3 15.9047C3 15.9047 7.50137 16.1833 6.33697 11.7117C6.33697 11.7117 10.0005 12.3421 8.66576 6.82957C8.65156 6.81491 12.4855 9.80574 14.8853 4.92364Z" fill="#ED6D8F"></path><path d="M20.8599 13.7022C20.885 13.1361 20.9543 12.5713 20.9959 12.0052C21.0337 11.568 20.8107 11.2794 20.3876 11.18C20.0759 11.1013 19.7508 11.0867 19.433 11.137C19.1951 11.1945 18.9542 11.2396 18.7113 11.2721C18.2403 11.3028 17.9973 11.5275 17.9796 11.988C17.977 12.0833 17.9596 12.1777 17.928 12.268C17.3034 13.9102 16.6774 15.5499 16.0503 17.1873C16.0301 17.2401 16.0062 17.2904 15.9671 17.3776C15.7291 16.8975 15.4281 16.4898 15.2745 15.9986C14.8073 14.5152 14.3186 13.033 13.8312 11.5594C13.6826 11.1112 13.3489 10.9344 12.8754 11.0216C12.7889 11.0365 12.7008 11.0398 12.6134 11.0314C12.2241 10.9938 11.8311 11.0404 11.4623 11.1677C11.0946 11.2991 10.9498 11.557 11.0152 11.9254C11.0428 12.0371 11.0643 12.1503 11.0795 12.2643C11.1223 13.1902 11.1777 14.1087 11.2054 15.0321C11.257 16.7992 11.2117 18.5651 11.0858 20.3284C11.0644 20.6354 11.0304 20.9424 11.0228 21.2494C11.0115 21.6092 11.1613 21.7811 11.5266 21.8143C11.9976 21.8573 12.4711 21.8708 12.9421 21.9088C13.0309 21.9201 13.121 21.9003 13.1962 21.8528C13.2714 21.8053 13.3268 21.7334 13.3527 21.6497C13.3996 21.5394 13.4252 21.4216 13.4282 21.3022C13.4295 20.8258 13.4207 20.3493 13.4081 19.8741C13.393 19.3264 13.3917 18.7763 13.3438 18.231C13.2857 17.5839 13.266 16.934 13.2847 16.2847C13.2847 16.2466 13.291 16.2073 13.2985 16.1312C13.3338 16.2024 13.3514 16.2356 13.3665 16.2712C13.9017 17.5228 14.3617 18.8037 14.7443 20.1074C14.7928 20.2421 14.7928 20.3889 14.7443 20.5237C14.6322 20.8196 14.7141 21.037 14.9659 21.1377C15.4445 21.3268 15.9331 21.4926 16.4155 21.6731C16.4865 21.7033 16.566 21.7091 16.6408 21.6895C16.7157 21.6698 16.7815 21.6259 16.8273 21.565C16.9085 21.4643 16.9743 21.3526 17.0225 21.2335C17.0537 21.1374 17.0798 21.0399 17.1006 20.9412C17.3185 20.2425 17.5653 19.5499 17.7517 18.8438C17.9785 17.9723 18.2624 17.1158 18.6018 16.2798C18.6201 16.2439 18.6411 16.2094 18.6647 16.1766C18.6761 16.2319 18.6761 16.254 18.6761 16.2761C18.6345 17.59 18.5955 18.8978 18.5501 20.2056C18.5363 20.5949 18.491 20.9829 18.4809 21.3722C18.4721 21.705 18.6207 21.8708 18.9557 21.9002C19.4355 21.9432 19.9191 21.9592 20.4002 21.9973C20.4888 22.0079 20.5784 21.9875 20.653 21.9399C20.7277 21.8922 20.7827 21.8203 20.8082 21.7369C20.8531 21.6305 20.8766 21.5167 20.8775 21.4017C20.88 20.7668 20.8674 20.132 20.8674 19.4971C20.8662 19.2846 20.8687 19.0722 20.8523 18.8622C20.8158 18.3968 20.7264 17.9314 20.7339 17.4685C20.7515 16.2122 20.8044 14.9572 20.8599 13.7022Z" fill="white"></path></svg></div></div></div><div style="display: flex; align-items: center; flex-direction: row; gap: 8px;"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none" style="display: block; opacity: 0;"><g clip-path="url(#clip0_38845_9816)"><path d="M7 14C5.14348 14 3.36301 13.2625 2.05025 11.9497C0.737498 10.637 0 8.85652 0 7C0 5.14348 0.737498 3.36301 2.05025 2.05025C3.36301 0.737498 5.14348 0 7 0C8.85652 0 10.637 0.737498 11.9497 2.05025C13.2625 3.36301 14 5.14348 14 7C14 8.85652 13.2625 10.637 11.9497 11.9497C10.637 13.2625 8.85652 14 7 14Z" fill="#B1B1B1" fill-opacity="0.4"></path><path d="M6.11754 7.00052L4.18254 5.06452C4.06786 4.94725 4.00406 4.78948 4.00498 4.62546C4.00589 4.46144 4.07145 4.3044 4.18744 4.18841C4.30342 4.07243 4.46046 4.00687 4.62448 4.00595C4.7885 4.00503 4.94627 4.06884 5.06354 4.18352L6.99954 6.11852L8.93554 4.18352C8.99315 4.1246 9.06188 4.07771 9.13774 4.04554C9.2136 4.01337 9.29508 3.99656 9.37748 3.9961C9.45988 3.99564 9.54155 4.01153 9.61777 4.04285C9.69398 4.07417 9.76323 4.1203 9.82149 4.17857C9.87976 4.23683 9.92589 4.30608 9.95721 4.38229C9.98853 4.45851 10.0044 4.54018 10.004 4.62258C10.0035 4.70497 9.98669 4.78646 9.95452 4.86232C9.92235 4.93818 9.87545 5.00691 9.81654 5.06452L7.88154 7.00052L9.81654 8.93652C9.93122 9.05379 9.99502 9.21155 9.99411 9.37557C9.99319 9.5396 9.92763 9.69664 9.81164 9.81262C9.69566 9.9286 9.53862 9.99417 9.3746 9.99508C9.21058 9.996 9.05281 9.9322 8.93554 9.81752L6.99954 7.88252L5.06354 9.81752C5.00593 9.87643 4.93721 9.92333 4.86135 9.9555C4.78549 9.98767 4.704 10.0045 4.6216 10.0049C4.5392 10.0054 4.45753 9.9895 4.38131 9.95818C4.3051 9.92686 4.23585 9.88073 4.17759 9.82247C4.11932 9.7642 4.0732 9.69496 4.04188 9.61874C4.01056 9.54253 3.99467 9.46086 3.99513 9.37846C3.99559 9.29606 4.01239 9.21457 4.04456 9.13871C4.07673 9.06285 4.12363 8.99413 4.18254 8.93652L6.11754 7.00052Z" fill="white"></path></g><defs><clippath id="clip0_38845_9816"><rect width="14" height="14" fill="white"></rect></clippath></defs></svg><div style="position: relative;"><div class="imt-fb-btn right btn-animate  " dir="ltr" style="opacity: 0.7;"><div class=" " style="position: relative; pointer-events: all; display: inline-block;"><div><div class="imt-fb-btn-content"><svg class="imt-fb-logo-img imt-fb-logo-img-big-bg" width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0 14C0 6.26801 6.26801 0 14 0C21.732 0 28 6.26801 28 14C28 21.732 21.732 28 14 28C6.26801 28 0 21.732 0 14Z" fill="#ED6D8F"></path><path d="M7.30921 15.6381C7.53044 15.6381 7.70979 15.8175 7.70979 16.0387V19.0088C7.70979 19.934 8.45993 20.684 9.38526 20.684H11.7557C11.9769 20.684 12.1562 20.8634 12.1562 21.0846V22.152C12.1562 22.3732 11.9769 22.5526 11.7557 22.5526H9.38526C7.42782 22.5526 5.84099 20.966 5.84099 19.0088V16.0387C5.84099 15.8175 6.02034 15.6381 6.24157 15.6381H7.30921ZM18.9876 12.6944C19.1515 12.6944 19.2989 12.7943 19.3597 12.9466L22.9711 22.0036C23.076 22.2667 22.8822 22.5526 22.599 22.5526H21.4672C21.3016 22.5526 21.153 22.4506 21.0934 22.2961L20.2724 20.1673C20.2128 20.0128 20.0643 19.9108 19.8986 19.9108H16.7508C16.5852 19.9108 16.4366 20.0128 16.377 20.1673L15.556 22.2961C15.4964 22.4506 15.3478 22.5526 15.1822 22.5526H14.0504C13.7672 22.5526 13.5734 22.2667 13.6783 22.0036L17.2897 12.9466C17.3505 12.7943 17.4979 12.6944 17.6618 12.6944H18.9876ZM18.5116 15.6017C18.4456 15.4308 18.2038 15.4308 18.1378 15.6017L17.3016 17.7699C17.251 17.9011 17.3478 18.0423 17.4885 18.0423H19.1609C19.3016 18.0423 19.3984 17.9012 19.3478 17.7699L18.5116 15.6017ZM9.69589 5.30028C9.79943 4.8999 10.368 4.89991 10.4715 5.30028L11.1086 7.76368C11.3244 8.59845 11.9396 9.27221 12.7513 9.56299L14.9019 10.3334C15.2559 10.4602 15.2559 10.9608 14.9019 11.0876L12.7513 11.8581C11.9396 12.1489 11.3244 12.8226 11.1086 13.6574L10.4715 16.1208C10.368 16.5212 9.79943 16.5212 9.69589 16.1208L9.05884 13.6574C8.84297 12.8226 8.22786 12.1489 7.41615 11.8581L5.26548 11.0876C4.91151 10.9608 4.91151 10.4602 5.26548 10.3334L7.41615 9.56299C8.22786 9.27221 8.84297 8.59844 9.05884 7.76368L9.69589 5.30028ZM18.0064 6.20485C19.9639 6.20485 21.5507 7.79145 21.5507 9.74861V11.281C21.5507 11.5022 21.3713 11.6816 21.1501 11.6816H20.0825C19.8612 11.6816 19.6819 11.5022 19.6819 11.281V9.74861C19.6819 8.82341 18.9318 8.07338 18.0064 8.07338H14.4343C14.2131 8.07338 14.0337 7.89403 14.0337 7.6728V6.60543C14.0337 6.3842 14.2131 6.20486 14.4343 6.20485H18.0064Z" fill="white"></path></svg></div></div></div></div><div title="关闭悬浮球" class="imt-fb-close-button" style="opacity: 0; pointer-events: none;"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none"><g clip-path="url(#clip0_38845_9816)"><path d="M7 14C5.14348 14 3.36301 13.2625 2.05025 11.9497C0.737498 10.637 0 8.85652 0 7C0 5.14348 0.737498 3.36301 2.05025 2.05025C3.36301 0.737498 5.14348 0 7 0C8.85652 0 10.637 0.737498 11.9497 2.05025C13.2625 3.36301 14 5.14348 14 7C14 8.85652 13.2625 10.637 11.9497 11.9497C10.637 13.2625 8.85652 14 7 14Z" fill="#B1B1B1" fill-opacity="0.4"></path><path d="M6.11754 7.00052L4.18254 5.06452C4.06786 4.94725 4.00406 4.78948 4.00498 4.62546C4.00589 4.46144 4.07145 4.3044 4.18744 4.18841C4.30342 4.07243 4.46046 4.00687 4.62448 4.00595C4.7885 4.00503 4.94627 4.06884 5.06354 4.18352L6.99954 6.11852L8.93554 4.18352C8.99315 4.1246 9.06188 4.07771 9.13774 4.04554C9.2136 4.01337 9.29508 3.99656 9.37748 3.9961C9.45988 3.99564 9.54155 4.01153 9.61777 4.04285C9.69398 4.07417 9.76323 4.1203 9.82149 4.17857C9.87976 4.23683 9.92589 4.30608 9.95721 4.38229C9.98853 4.45851 10.0044 4.54018 10.004 4.62258C10.0035 4.70497 9.98669 4.78646 9.95452 4.86232C9.92235 4.93818 9.87545 5.00691 9.81654 5.06452L7.88154 7.00052L9.81654 8.93652C9.93122 9.05379 9.99502 9.21155 9.99411 9.37557C9.99319 9.5396 9.92763 9.69664 9.81164 9.81262C9.69566 9.9286 9.53862 9.99417 9.3746 9.99508C9.21058 9.996 9.05281 9.9322 8.93554 9.81752L6.99954 7.88252L5.06354 9.81752C5.00593 9.87643 4.93721 9.92333 4.86135 9.9555C4.78549 9.98767 4.704 10.0045 4.6216 10.0049C4.5392 10.0054 4.45753 9.9895 4.38131 9.95818C4.3051 9.92686 4.23585 9.88073 4.17759 9.82247C4.11932 9.7642 4.0732 9.69496 4.04188 9.61874C4.01056 9.54253 3.99467 9.46086 3.99513 9.37846C3.99559 9.29606 4.01239 9.21457 4.04456 9.13871C4.07673 9.06285 4.12363 8.99413 4.18254 8.93652L6.11754 7.00052Z" fill="white"></path></g><defs><clippath id="clip0_38845_9816"><rect width="14" height="14" fill="white"></rect></clippath></defs></svg></div></div><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none" style="display: none; opacity: 0;"><g clip-path="url(#clip0_38845_9816)"><path d="M7 14C5.14348 14 3.36301 13.2625 2.05025 11.9497C0.737498 10.637 0 8.85652 0 7C0 5.14348 0.737498 3.36301 2.05025 2.05025C3.36301 0.737498 5.14348 0 7 0C8.85652 0 10.637 0.737498 11.9497 2.05025C13.2625 3.36301 14 5.14348 14 7C14 8.85652 13.2625 10.637 11.9497 11.9497C10.637 13.2625 8.85652 14 7 14Z" fill="#B1B1B1" fill-opacity="0.4"></path><path d="M6.11754 7.00052L4.18254 5.06452C4.06786 4.94725 4.00406 4.78948 4.00498 4.62546C4.00589 4.46144 4.07145 4.3044 4.18744 4.18841C4.30342 4.07243 4.46046 4.00687 4.62448 4.00595C4.7885 4.00503 4.94627 4.06884 5.06354 4.18352L6.99954 6.11852L8.93554 4.18352C8.99315 4.1246 9.06188 4.07771 9.13774 4.04554C9.2136 4.01337 9.29508 3.99656 9.37748 3.9961C9.45988 3.99564 9.54155 4.01153 9.61777 4.04285C9.69398 4.07417 9.76323 4.1203 9.82149 4.17857C9.87976 4.23683 9.92589 4.30608 9.95721 4.38229C9.98853 4.45851 10.0044 4.54018 10.004 4.62258C10.0035 4.70497 9.98669 4.78646 9.95452 4.86232C9.92235 4.93818 9.87545 5.00691 9.81654 5.06452L7.88154 7.00052L9.81654 8.93652C9.93122 9.05379 9.99502 9.21155 9.99411 9.37557C9.99319 9.5396 9.92763 9.69664 9.81164 9.81262C9.69566 9.9286 9.53862 9.99417 9.3746 9.99508C9.21058 9.996 9.05281 9.9322 8.93554 9.81752L6.99954 7.88252L5.06354 9.81752C5.00593 9.87643 4.93721 9.92333 4.86135 9.9555C4.78549 9.98767 4.704 10.0045 4.6216 10.0049C4.5392 10.0054 4.45753 9.9895 4.38131 9.95818C4.3051 9.92686 4.23585 9.88073 4.17759 9.82247C4.11932 9.7642 4.0732 9.69496 4.04188 9.61874C4.01056 9.54253 3.99467 9.46086 3.99513 9.37846C3.99559 9.29606 4.01239 9.21457 4.04456 9.13871C4.07673 9.06285 4.12363 8.99413 4.18254 8.93652L6.11754 7.00052Z" fill="white"></path></g><defs><clippath id="clip0_38845_9816"><rect width="14" height="14" fill="white"></rect></clippath></defs></svg></div><div class="btn-animate" style="margin-top: 10px; transform: translateX(60px);"><div class=" btn-animate" style="position: relative; pointer-events: all; display: inline-block;"><div><div class="imt-fb-round-button"><svg class="imt-fb-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" style="width: 24px; height: 24px;"><path d="M17 8.66797H11.375" stroke="#ED6D8F" stroke-linecap="round" stroke-linejoin="round"></path><path d="M12.625 15.332L7 15.332" stroke="#ED6D8F" stroke-linecap="round" stroke-linejoin="round"></path><path d="M15.125 17C16.1605 17 17 16.1605 17 15.125C17 14.0895 16.1605 13.25 15.125 13.25C14.0895 13.25 13.25 14.0895 13.25 15.125C13.25 16.1605 14.0895 17 15.125 17Z" stroke="#ED6D8F" stroke-linecap="round" stroke-linejoin="round"></path><path d="M8.875 10.75C9.91053 10.75 10.75 9.91053 10.75 8.875C10.75 7.83947 9.91053 7 8.875 7C7.83947 7 7 7.83947 7 8.875C7 9.91053 7.83947 10.75 8.875 10.75Z" stroke="#ED6D8F" stroke-linecap="round" stroke-linejoin="round"></path><rect x="3" y="4" width="18" height="16" rx="1.66667" stroke="#ED6D8F"></rect></svg></div></div></div></div><div class="btn-animate" style="margin-top: 10px; transform: translateX(60px);"><div class=" btn-animate" style="position: relative; pointer-events: all; display: inline-block;"><div><div class="imt-fb-round-button"><svg class="imt-fb-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"><mask id="mask0_39772_2885" maskUnits="userSpaceOnUse" x="0" y="0" width="24" height="24" style="mask-type: alpha;"><rect width="24" height="24" fill="#D9D9D9"></rect></mask><g mask="url(#mask0_39772_2885)"><path d="M12 15.423C12.1808 15.423 12.3286 15.3657 12.4433 15.251C12.5581 15.1362 12.6155 14.9884 12.6155 14.8077C12.6155 14.6269 12.5581 14.4792 12.4433 14.3645C12.3286 14.2497 12.1808 14.1923 12 14.1923C11.8192 14.1923 11.6714 14.2497 11.5568 14.3645C11.4419 14.4792 11.3845 14.6269 11.3845 14.8077C11.3845 14.9884 11.4419 15.1362 11.5568 15.251C11.6714 15.3657 11.8192 15.423 12 15.423ZM12 12.4615C12.1423 12.4615 12.2612 12.4138 12.3567 12.3183C12.4522 12.2228 12.5 12.1038 12.5 11.9615V6.8845C12.5 6.74233 12.4522 6.6235 12.3567 6.528C12.2612 6.43233 12.1423 6.3845 12 6.3845C11.8577 6.3845 11.7388 6.43233 11.6433 6.528C11.5478 6.6235 11.5 6.74233 11.5 6.8845V11.9615C11.5 12.1038 11.5478 12.2228 11.6433 12.3183C11.7388 12.4138 11.8577 12.4615 12 12.4615ZM6.077 18L4.373 19.7038C4.1205 19.9564 3.8285 20.0145 3.497 19.878C3.16567 19.7413 3 19.4929 3 19.1328V5.6155C3 5.15517 3.15417 4.77083 3.4625 4.4625C3.77083 4.15417 4.15517 4 4.6155 4H19.3845C19.8448 4 20.2292 4.15417 20.5375 4.4625C20.8458 4.77083 21 5.15517 21 5.6155V16.3845C21 16.8448 20.8458 17.2292 20.5375 17.5375C20.2292 17.8458 19.8448 18 19.3845 18H6.077ZM5.65 17H19.3845C19.5385 17 19.6796 16.9359 19.8078 16.8077C19.9359 16.6796 20 16.5385 20 16.3845V5.6155C20 5.4615 19.9359 5.32042 19.8078 5.19225C19.6796 5.06408 19.5385 5 19.3845 5H4.6155C4.4615 5 4.32042 5.06408 4.19225 5.19225C4.06408 5.32042 4 5.4615 4 5.6155V18.6443L5.65 17Z" fill="#ED6D8F"></path></g></svg></div></div></div></div><div hidden="" id="immersive-translate-popup-overlay" class="immersive-translate-popup-overlay"><div class="immersive-translate-popup-wrapper" style="position: fixed; top: 212px; right: 65px;"></div></div></div></div></template></div></html>